function getAttrFromResponse(html,id,attr){var attrValue="";return html.each(function(index){$j(this).attr("id")===id&&(attrValue=$j(this).attr(attr))}),attrValue}function trim(string){return string.replace(/(^\s*)|(\s*$)/g,"")}$j(document).ready(function(){authorizedCharacters()}),"undefined"==typeof bl&&(window.bl={}),bl.isDefined=function(obj,key){var isObj=null!=obj;return isObj&&"string"==typeof key?0<key.indexOf(".")?bl.isDefined(obj[key.split(".")[0]],key.split(".")[1]):bl.isDefined(obj[key]):isObj},jQuery.extend({isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)}}),$j.fn.removeClassRegEx=function(regex){var classes=$j(this).attr("class");if(!classes||!regex)return $j(this);for(var classArray=[],i=0,len=(classes=classes.split(" ")).length;i<len;i++)classes[i].match(regex)||classArray.push(classes[i]);return $j(this).attr("class",classArray.join(" ")),$j(this)},$j.initObject=function(obj){if("string"==typeof obj){var parent=window;$j.each(obj.split("."),function(index,name){void 0===parent[name]&&(parent[name]={}),parent=parent[name]})}},$j.leftPad=function(i,l,s){var o=i.toString();for(s||(s="0");o.length<l;)o=s+o;return o},$j.rightPad=function(i,l,s){var o=i.toString();for(s||(s="0");o.length<l;)o+=s;return o},$j.isBlank=function(text){return"string"!=typeof text||""===$j.trim(text)};var authorizedCharactersPatterns={alpha:/[.\-\s\ŒœŸÿ\0-9]/gi,numeric:/[^0-9]/g,alpha_numeric:/[.\-\s\ŒœŸÿ]/gi,email:/[^A-Z0-9@._\-]/gi};function replaceAccentedCharacters(value){return value=(value=(value=(value=value.replace(new RegExp(/œ/g),"oe")).replace(new RegExp(/Œ/g),"OE")).replace(new RegExp(/[ÿ]/g),"y")).replace(new RegExp(/[Ÿ]/g),"Y")}function removeUnauthorizedCharacters(elt,pattern,replace){var value=$j(elt).val(),start=$j(elt)[0].selectionStart,end=$j(elt)[0].selectionEnd,length=value.length;return value=replaceAccentedCharacters(value),$j(elt).val(value),length!=value.length?$j(elt)[0].setSelectionRange(start+Math.abs(length-value.length),end+Math.abs(length-value.length)):$j(elt)[0].setSelectionRange(start,end),new RegExp(pattern).test(value)&&(value=value.replace(pattern,replace),$j(elt).val(value),"function"==typeof $j(elt)[0].setSelectionRange&&(""===replace?$j(elt)[0].setSelectionRange(start-1,end-1):$j(elt)[0].setSelectionRange(start,end))),!0}function authorizeAlphaCharacters(){$j(".authorize_alpha").on("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.alpha," ")})}function authorizeNumCharacters(){$j(".authorize_num").on("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.numeric,"")})}function authorizeAplhaNumCharacters(){$j(".authorize_aplha_num").on("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.alpha_numeric," ")})}function authorizeEMailCharacters(){$j(".authorize_email").on("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.email,"")})}function trimWhiteSpaces(){$j(".authorize_alpha, .authorize_num, .authorize_aplha_num, .authorize_email").on("blur",function(e){$j(this).val(trim($j(this).val()))})}function authorizedCharacters(){authorizeAlphaCharacters(),authorizeNumCharacters(),authorizeAplhaNumCharacters(),authorizeEMailCharacters(),trimWhiteSpaces()}"ontouchstart"in window||navigator.msMaxTouchPoints?isTouch=!0:isTouch=!1;var loadingLayerHandle=null;function showLoadingLayer(){if(0<$j("#blLoadingLayer").length)return $j("#blLoadingLayer .popup").css({top:$j(window).scrollTop()+100+"px","z-index":99999999}),void $j("#blLoadingLayer").show();var html=$j('<div id="blLoadingLayer"></div>').css({height:$j(document).height()+"px"});$j(html).append('<div class="background"></div>'),/opera/.test(navigator.userAgent.toLowerCase())||$j(".background",html).css({height:$j(document).height()+"px"}),$j(html).append('<div class="popup"></div>'),$j(".popup",html).css({top:$j(window).scrollTop()+100+"px"});var path="../wcsstore/boulangerstg/statics/plugins/loader/img/ajax-loader.gif";"undefined"!=typeof bl&&void 0!==bl.vars&&void 0!==bl.vars.imgDir&&(path="../wcsstore/boulangerstg/statics/plugins/loader/img/ajax-loader.gif"),$j(".popup",html).append('<img src="'+path+'" width="100" height="100" alt="Chargement..." />'),$j(".popup",html).append("<p>Nous traitons votre demande, merci de patienter.</p>"),$j("body").append(html),$j("#blLoadingLayer").css("z-index",99999999),loadingLayerHandle=setTimeout(hideLoadingLayer,12e4)}function hideLoadingLayer(){0<$j("#blLoadingLayer").length&&$j("#blLoadingLayer").hide(),null!=loadingLayerHandle&&(clearTimeout(loadingLayerHandle),loadingLayerHandle=null)}function submitSearch(){var newurl,nbMaxHistorySuggest=$j("#hd_search_form").attr("nbmaxSearchSuggest"),maxAgeCookiesuggest=$j("#hd_search_form").attr("maxAgeCookiesuggest");""!==unsecureBaseHref&&void 0!==unsecureBaseHref?newurl=unsecureBaseHref.replace("https://","").replace("www.","").replace("m.",""):newurl=$j("link[rel='canonical']").attr("href").replace("https://","").replace("www.","").replace("m.","");var isMobile=$j(".searchBar").attr("is-mobile");isMobile=""!==isMobile&&void 0!==isMobile&&"true"==isMobile;var searchTerm=document.getElementById("product_keyword").value;bl.cookie.suggestHistory(searchTerm,isMobile,nbMaxHistorySuggest,maxAgeCookiesuggest,newurl);var searchTermSuggest=$j("#product_keyword").attr("searchValue");void 0===searchTermSuggest&&(searchTermSuggest=searchTerm),""==searchTermSuggest||"Rechercher un produit, une marque, un magasin..."==searchTermSuggest||"Rechercher un produit"==searchTermSuggest||(document.location.href=getSearchUrl(searchTermSuggest))}function submitSpellCheckSearch(suggestion){$j("#product_keyword").val(suggestion),submitSearch()}function getSearchUrl(key){var categoryId=$j(".menu_search-select span").attr("value"),categoryIdURLComponent="";if(null!=categoryId&&void 0!==categoryId&&"#"!=categoryId&&""!=categoryId&&(categoryIdURLComponent="&u="+trim(categoryId)),""!=trim(key)){var keyForUrl=replaceAll(key,"\\+","_plus_");return keyForUrl=replaceSpecialCharacter(keyForUrl),unsecureBaseHref+"/resultats?tr="+keyForUrl+categoryIdURLComponent}}function replaceSpecialCharacter(val){var key=val,charArr=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=trim(key)).toLowerCase()).replace(/\s+/g,"+")).replace(/\//g,"+")).replace(/\"/g,"+")).replace(/'/g,"+")).replace(/;/g,"+")).replace(/!/g,"+")).replace(/{/g,"+")).replace(/}/g,"+")).replace(/&/g,"+")).replace(/[+]{2,}/g,"+")).replace(/%/g,"+")).split("");for(i=0;i<charArr.length;i++)-1<"%?$".indexOf(charArr[i])&&(charArr[i]=escape(charArr[i]));var temp=charArr.join("");return temp=temp.replace(/_plus_/g,"%2b")}function replaceAll(s,search,replaceBy){var Re=new RegExp(search,"g");return s.replace(Re,replaceBy)}function toDecode(urlToDecode){document.location.href=window.atob(urlToDecode)}function decodeURL(urlToDecode){return window.atob(urlToDecode)}function goTo(url){-1!=url.indexOf("toDecode")?eval(url):(url=url.replace(/'/g,""),document.location.href=url)}$j(document).ready(function(){$j(".baroWeb").on("click",function(){var modalUrl=$j(this).attr("data-modal-url");Box.open({modal:!0,url:modalUrl})})}),$j(document).ready(function(){$j(".baroWebFooter").on("click",function(){var protocol="https://";-1<window.location.host.indexOf("secure-mobile")&&(protocol="https://");var url=urlHappyScoreMobile;url+="&urlRemerciementForm="+protocol+window.location.host+"/webapp/wcs/stores/servlet/catalog/barowebRemerciementsMobile?urlRetour="+document.location.href,document.location.href=url})}),$j(document).ready(function(){$j(".baroWebHeader").on("click",function(){var protocol="https://";-1<window.location.host.indexOf("secure-mobile")&&(protocol="https://");var url=urlHappyScoreMobile;url+="&urlRemerciementForm="+protocol+window.location.host+"/webapp/wcs/stores/servlet/catalog/barowebRemerciementsMobile?urlRetour="+document.location.href,document.location.href=url})});var bindNumericsOnly=function(){$j(".numbersOnly").keypress(function(e){if(8!=e.which&&0!=e.which&&(e.which<48||57<e.which))return!1})},getXtn2=function(isCheckout,isMobile){var xtn2="17";return isMobile&&(xtn2=isCheckout?"6":"11"),xtn2};function insertG_Recaptcha(){if($j("#g-recaptcha").length);else if($j("#g-captcha-container").length){checkRecaptchaApiImport();var html_to_insert="<div align='center'><div class='g-recaptcha' id='g-recaptcha' data-sitekey='"+bl.dataSiteKey+"' data-theme='light'></div><div id='recaptcha_error_container' class='errorr' style='display:none; text-align:center; color:#F00; font-size:11px; font-family:arial; font-weight:bold; margin-top:-16px; margin-bottom:40px;'><span>Veuillez valider que vous n'êtes pas un robot.</span></div></div>";$j("#g-captcha-container").html(html_to_insert),validateRecaptchaBeforeSubmittingForm()}}function checkRecaptchaApiImport(){0===$j('script[src="https://www.google.com/recaptcha/api.js"]').length&&$j.getScript("https://www.google.com/recaptcha/api.js")}function validateRecaptchaBeforeSubmittingForm(){$j("form").submit(function(e){return validationCaptchaResponse(e)}),$j("form .validate").bind("click",function(e){return validationCaptchaResponse(e)})}function validationCaptchaResponse(e){return $j("#recaptcha_error_container").hide(),""!==grecaptcha.getResponse()||($j("#recaptcha_error_container").show(),e.stopImmediatePropagation(),!1)}$j(document).ready(function(){insertG_Recaptcha()}),$j(document).on("DOMNodeInserted",".view",function(){insertG_Recaptcha()}),$j.initObject("bl.form"),$j.extend(bl.form,{zipCode:function(el,btn){if(!(void 0===el||void 0===btn||el.length<=0)){el.val()&&el.val(el.val().replace(/[^\d]/g,"")),el.hasClass("minlength5")?el.val()&&null!==el.val().match(/^\d{5}$/)&&!1:el.val()&&null!==el.val().match(/^\d{2}(\d{3})?$/)&&!1}}});var socialXitiHits=function(el,provider){if("function"==typeof xt_med){var isCheckout=$j(el).parents(".socialLogonBtns").attr("is-checkout");isCheckout=!$j.isBlank(isCheckout)&&"true"===isCheckout;var pageKey=$j(el).parents(".socialLogonBtns").attr("page-key"),isMobile=$j(el).parents(".socialLogonBtns").attr("is-mobile");isMobile=!$j.isBlank(isMobile)&&"true"==isMobile;var xtn2=getXtn2(isCheckout,isMobile);$j.isBlank(pageKey)||"BLRegistration"!=pageKey?$j.isBlank(pageKey)||"BLAuthentication"!=pageKey||(isCheckout?xiti_events_clic(this,"Tunnel_commande::Clic_connexion_login_"+provider,xtn2):xiti_events_clic(this,"Compte_client::Clic_connexion_login_"+provider,xtn2)):isCheckout?xiti_events_clic(this,"Tunnel_commande::Clic_inscription_login_"+provider,xtn2):xiti_events_clic(this,"Compte_client::Clic_inscription_login_"+provider,xtn2)}},bindSocialButtonEvents=function(btn,logoffUrl){$j("#facebookSocialBtn, #facebook").bind("click",function(e){socialXitiHits(this,"facebook"),_gum.push(["login",{provider:"facebook"},function(response){reach5ResponseTreatment(response,"facebook",btn,logoffUrl)}])}),$j("#googlePlusSocialBtn, #googlePlus").bind("click",function(e){socialXitiHits(this,"google"),_gum.push(["login",{provider:"google"},function(response){reach5ResponseTreatment(response,"google",btn,logoffUrl)}])}),$j("#twitterSocialBtn, #twitter").bind("click",function(e){socialXitiHits(this,"twitter"),_gum.push(["login",{provider:"twitter"},function(response){reach5ResponseTreatment(response,"twitter",btn,logoffUrl)}])}),$j("#paypalSocialBtn, #paypal").bind("click",function(e){socialXitiHits(this,"paypal"),_gum.push(["login",{provider:"paypal"},function(response){reach5ResponseTreatment(response,"paypal",btn,logoffUrl)}])})};$j(document).ready(function(){$j("a.verifyCredentials").bind("click",function(){return resultAllowUpdate=accountAllowUpdate($j(this)),!1});var inputsCivilities=document.getElementsByClassName("radio-to-btn");if(0<inputsCivilities.length)for(var i=0;i<inputsCivilities.length;i++)inputsCivilities[i].addEventListener("click",function(){document.querySelector(".honorific-prefix").classList.add("handler"),document.querySelector(".honorific-prefix").classList.add("parsley-success")})});var path="/webapp/wcs/stores/servlet/",modalUrl="checkPasswordModalView",logoffPath="Logoff?URL=homepage&storeId=10001&urlRequestType=Base&langId=-2&catalogId=10001";void 0!==basePath||-1<window.location.href.indexOf("secure-mobile")?modalUrl="mCheckPasswordModalView":void 0!==bl.basePath&&(modalUrl="checkPasswordModalView",path=bl.basePath),-1<window.location.href.indexOf("https://m.")&&(modalUrl="mCheckPasswordModalView",logoffPath="Logoff?storeId=10001&URL=mHomepage?storeId=10001&catalogId=10001&langId=-2&ct=m");var logoffUrl=baseHref+path+logoffPath,accountAllowUpdate=function(btn,openPopin){void 0===openPopin&&(openPopin=!0);var allowUpdate=!0,url=path+"AllowUpdateAccount";return $j.ajax({url:url,data:{storeId:bl.vars.storeId,catalogId:bl.vars.catalogId,langId:bl.vars.langId},async:!1,dataType:"json",success:function(data,textStatus,jqXHR){if("object"==typeof data&&null!==data||(allowUpdate=!1),void 0!==btn.attr("href")){var url=btn.attr("href");"_blank"==btn.attr("target")?window.open(url):window.location.href=url}else void 0!==btn.attr("data-modal-url")&&showStoreBillsPopin(btn.attr("data-modal-url"));allowUpdate=!0},error:function(jqXHR,textStatus,errorThrown){allowUpdate=!1}}),allowUpdate},verifyCredentials=function(){var credentialsOk=!0,url=path+"VerifyUserCredentials",password=$j("#accountPassword #password").val();return void 0!==password&&""!==password||(password=$j("#login #password").val()),$j.ajax({type:"POST",url:url,data:{storeId:bl.vars.storeId,catalogId:bl.vars.catalogId,langId:bl.vars.langId,password:password},async:!1,dataType:"json",success:function(data,textStatus,jqXHR){"object"==typeof data&&null!==data||(credentialsOk=!1),credentialsOk="true"==data.validCredentials,"true"==data.forceLogoff&&(window.location.href=logoffUrl)},error:function(jqXHR,textStatus,errorThrown){credentialsOk=!1}}),credentialsOk},bindFrontValidatePasswordModal=function(btn){$j("#accountPassword").validate({ignore:"form[id!='login'], :hidden",submitHandler:function(form){return validCredentials=verifyCredentials(),validCredentialCallback(validCredentials,btn),!1}}),bindSocialButtonEvents(btn,logoffUrl)},bindMobileValidatePasswordModal=function(btn){$j("#login").validate({ignore:"form[id!='login'], :hidden",submitHandler:function(form){return validCredentials=verifyCredentials(),!1===validCredentials?($j("#password").val(""),$j("#password").valid()):launchPreviousEvents(btn),!1}})},launchPreviousEvents=function(btn){if(void 0===btn.attr("href")||""===btn.attr("href")||"javascript:void(0)"==btn.attr("href"))$j("#popinAccountLayer .modal_close").click(),btn.click();else{var url=btn.attr("href");"_blank"==btn.attr("target")?($j("#popinAccountLayer .modal_close").click(),window.open(url)):window.location.href=url}},validCredentialCallback=function(isValidCredential,btn){!1===isValidCredential?($j("#password").val(""),$j("#password").valid()):launchPreviousEvents(btn)};if(void 0===$j)var $j=jQuery.noConflict();"undefined"==typeof bl&&(bl={}),void 0===bl.woosmap&&(bl.woosmap={});var saveUserGeolocCallback=void 0,waitGeocoder=!1,waitStoresSearch=!1;$j.extend(bl.woosmap,{logger:"undefined"!=typeof BoulangerLogData?new BoulangerLogData:{add:function(){},log:function(){}},init:function(){var privacyCookie=getCookie("tc_priv_ok"),categsCookie=getCookie("TC_OPTOUT_categories");(bl.woosmap.woosMapUseFromCookie=!1,"2"===privacyCookie||"1"===privacyCookie)?null!==categsCookie&&""!==categsCookie?-1<categsCookie.split(",").indexOf("8")?bl.woosmap.woosMapUseFromCookie=!0:bl.woosmap.woosMapUseFromCookie=!1:bl.woosmap.woosMapUseFromCookie=!0:bl.woosmap.woosMapUseFromCookie=!1},saveUserGeolocation:function(pSaveUserGeolocCallback){bl.woosmap.init();var callCallback=!0;try{if(bl.woosmap.woosMapUseFromCookie&&isAutorizeWriteCookie()){var address=bl.cookie.getAddressForGeolocation(),typeAddress=bl.cookie.getTypeForGeolocation(),needGeoloc=address&&bl.cookie.needToReloadGeolocation(typeAddress,address);if(!bl.google.isLoaded()&&needGeoloc)saveUserGeolocCallback=pSaveUserGeolocCallback,waitGeocoder=!(callCallback=!1),bl.google.initAPI("bl.woosmap.saveUserGeolocation",bl.woosmap.saveUserGeolocation);else if(needGeoloc){bl.woosmap.logger.add("[Collecte de données WoosMap]"),bl.woosmap.logger.add("Adresse",address),bl.woosmap.logger.add("Type de données recupérée",typeAddress);var geocoder=new google.maps.Geocoder;bl.woosmap.logger.add("Lancement du geocodage"),callCallback=!1,pSaveUserGeolocCallback&&(saveUserGeolocCallback=pSaveUserGeolocCallback),geocoder.geocode({address:address,region:"fr"},function(results,status){if(bl.woosmap.logger.add("Resultats du geocodage",status),status==google.maps.GeocoderStatus.OK){var location=results[0].geometry.location;bl.woosmap.logger.add("Création du cookie pour stocker le geocodage"),bl.cookie.createGeolocationCookie(location.lat(),location.lng(),typeAddress,address),saveUserGeolocCallback&&saveUserGeolocCallback(),saveUserGeolocCallback=void 0}waitGeocoder=!1,bl.woosmap.logger.log()})}}else bl.woosmap.logger.add("Appel WoosMap","saveUserGeolocation :: Nous n'avons pas les consentements cookie"),bl.woosmap.logger.log()}catch(e){bl.woosmap.logger.add("Appel WoosMap","saveUserGeolocation :: Une erreur avec l'API Geocoder a ete declenchee:"+e),bl.woosmap.logger.log(),console.error(e)}callCallback&&pSaveUserGeolocCallback&&pSaveUserGeolocCallback()},storesSearch:function(url,nbMax,doSuccessCallback,zipCode,latitude,longitude,pNbTry){var nbTry=pNbTry||0,key=zipCode||"GEOIP",cached=JSON.parse(sessionStorage.getItem("WOOSMAP_CACHE"));if(null!=cached&&cached.key===key)doSuccessCallback(cached.result);else if(30===nbTry)doSuccessCallback();else{if(waitStoresSearch)return void setTimeout(function(){bl.woosmap.storesSearch(url,nbMax,doSuccessCallback,zipCode,latitude,longitude,nbTry+1)},50);waitStoresSearch=!0,bl.woosmap.logger.add("Appel WoosMap","Lancement de la recherche: "+url),$j.ajax({url:url,data:{key:bl.woosmapKey,lat:latitude,lng:longitude,stores_by_page:nbMax,page:1},async:!0,cache:!0,dataType:"json",success:function(data,textStatus,jqXHR){var woosMapResult=void 0!==data.stores?data.stores:data;bl.woosmap.logger.add("Appel WoosMap","Recuperation des magasins depuis woosmap: "+woosMapResult.features),sessionStorage.setItem("WOOSMAP_CACHE",JSON.stringify({key:key,result:woosMapResult})),waitStoresSearch=!1,doSuccessCallback(woosMapResult)},error:function(jqXHR,textStatus,errorThrown){doSuccessCallback(),bl.woosmap.logger.add("Appel WoosMap","Erreur lors des appels Ajax: "+errorThrown),bl.woosmap.logger.log()},complete:function(jqXHR,textStatus){bl.woosmap.logger.add("Appel WoosMap","Resultat de la requête:"+textStatus),bl.woosmap.logger.log()}})}},getUserRecommendation:function(doSuccessCallback,nbMax){if(waitGeocoder)setTimeout(function(){bl.woosmap.getUserRecommendation(doSuccessCallback,nbMax)},100);else{bl.woosmap.init();try{if(bl.woosmap.woosMapUseFromCookie&&isAutorizeWriteCookie()){var latitude=parseFloat(bl.cookie.getLatitudeFromGeolocationCookie()),longitude=parseFloat(bl.cookie.getLongitudeFromGeolocationCookie()),zipCode=bl.cookie.getZipCodeFromGeolocationCookie();bl.cookie.isVenteCookieExist()&&bl.cookie.isVenteInfoSiteCookieExist()&&(latitude=bl.cookie.getLatitudeFromVenteInfoSiteCookie(),longitude=bl.cookie.getLongitudeFromVenteInfoSiteCookie(),zipCode=bl.cookie.getZipCodeFromVenteInfoSiteCookie());var typeAddress=bl.cookie.getTypeFromGeolocationCookie();if(bl.woosmap.logger.add("Appel WoosMap","Recuperation des informations de localisation lat:"+latitude+"- lon:"+longitude+" - type:"+typeAddress),void 0===latitude||void 0===longitude||""===latitude||""===longitude||isNaN(latitude)||isNaN(longitude)){bl.woosmap.logger.add("Appel WoosMap","Client inconnu, on lance une recherche par IP Geolocation"),bl.woosmap.logger.log();url="https://api.woosmap.com/geolocation/stores/";bl.woosmap.storesSearch(url,nbMax,doSuccessCallback)}else{bl.woosmap.logger.add("Appel WoosMap","Client connu, on lance une RECHERCHE");var url="https://api.woosmap.com/stores/search/";bl.woosmap.storesSearch(url,nbMax,doSuccessCallback,zipCode,latitude,longitude)}}else{bl.woosmap.logger.add("Appel WoosMap","Impossible de lire le cookie, on lance une recherche par IP Geolocation"),bl.woosmap.logger.log();url="https://api.woosmap.com/geolocation/stores/";bl.woosmap.storesSearch(url,nbMax,doSuccessCallback)}}catch(e){bl.woosmap.logger.add("Appel WoosMap","Une erreur avec l'API Woosmap a ete declenchee:"+e),bl.woosmap.logger.log(),console.error(e)}}},getStoreById:function(doSuccessCallback){bl.woosmap.init();try{if(bl.woosmap.woosMapUseFromCookie)if(isAutorizeWriteCookie()){var googleShoppingStoreCode=bl.cookie.getGoogleShoppingStoreCodeCookie();if(void 0!==googleShoppingStoreCode){googleShoppingStoreCode=bl.catalog.productPage.googleShoppingContextualization.getGoogleShoppingStoreCodeInUrl(),bl.woosmap.logger.add("Appel WoosMap","On lance la récupération des informations sur le magasin avec le code"+googleShoppingStoreCode);var url="https://api.woosmap.com/stores/search/";bl.woosmap.logger.add("Appel WoosMap","Lancement de la recherche sur le magasin "+googleShoppingStoreCode+": "+url),$j.ajax({url:url,data:{key:bl.woosmapKey,query:'idstore:="'+googleShoppingStoreCode+'"'},async:!0,cache:!0,dataType:"json",success:function(data,textStatus,jqXHR){bl.woosmap.logger.add("Appel WoosMap","Recuperation des magasins depuis woosmap: "+data.features),doSuccessCallback(data)},error:function(jqXHR,textStatus,errorThrown){bl.woosmap.logger.add("Appel WoosMap","Erreur lors des appels Ajax: "+errorThrown),bl.woosmap.logger.log()},complete:function(jqXHR,textStatus){bl.woosmap.logger.add("Appel WoosMap","Resultat de la requête:"+textStatus),bl.woosmap.logger.log()}})}}else bl.woosmap.logger.add("Appel WoosMap","Impossible de deposer un cookie"),bl.woosmap.logger.log();else bl.woosmap.logger.add("Appel WoosMap","getStoreById :: Nous n'avons pas les consentements Woosmap"),bl.woosmap.logger.log()}catch(e){bl.woosmap.logger.add("Appel WoosMap","getStoreById :: Une erreur avec l'API Woosmap a ete declenche:"+e),bl.woosmap.logger.log(),console.error(e)}}}),"undefined"==typeof bl&&(bl={}),void 0===bl.delivery&&(bl.delivery={});var cacheSites=new Array;$j.extend(bl.delivery,{cacherSites:function(sites){for(var i=0;i<sites.length;i++){var key=sites[i].network+"-"+sites[i].code;cacheSites[key]=sites[i]}},getSiteFromCache:function(keySite){return cacheSites[keySite]},validateParams:function(searchElement,displayClassElement,templates,callbackFunctions){return!0},searchSites:function(searchParams,displayClassElement,templates,callbackFunctions){if(!bl.delivery.validateParams(searchParams,displayClassElement,templates,callbackFunctions))return $j(displayClassElement+" .display-sites").html(""),$j(displayClassElement+" .informations").hide(),$j(displayClassElement+" .text-center").hide(),$j(displayClassElement+" .error, "+displayClassElement+" .msgError").show(),void $j(displayClassElement).children(".alert-error").show();$j(displayClassElement).removeClass("error-field"),$j(displayClassElement+" .display-sites").html(""),$j(displayClassElement+" .display-sites").hide(),$j(displayClassElement+" .informations").hide(),$j(displayClassElement+" .error, "+displayClassElement+" .msgError").hide(),$j(displayClassElement).children(".alert-error").hide(),$j(displayClassElement+" .loader").show();var requestBody={};requestBody[searchParams.type]=searchParams.value,requestBody.sortingType=$j("#sortByOption").val();var searchUrl=searchParams.url;bl.cookie.isVenteCookieExist()&&(searchUrl+="&isSeller=true"),$j.getJSON(searchUrl,requestBody,function(data){if(!data||!data.sites||0===data.sites.length)return $j(displayClassElement).addClass("error-field"),$j(displayClassElement+" .loader").hide(),$j(displayClassElement+" .delivery-infos").hide(),$j(displayClassElement+" .error, "+displayClassElement+" .msgError").show(),$j(displayClassElement).children(".alert-error").show(),$j(displayClassElement+" .text-center").hide(),!1;if($j(displayClassElement+" .delivery-infos").show(),bl.delivery.cacherSites(data.sites),bl.delivery.displaySites(data,displayClassElement,templates),"postalCode"===searchParams.type&&5==searchParams.value.length&&(sessionStorage.setItem("SEARCH_ZIPCODE",searchParams.value),$j.removeCookie("WC_BOULANGER_GEOCODE_RESULTS",{path:"/"}),bl.woosmap.saveUserGeolocation()),callbackFunctions&&0!==callbackFunctions.length)for(var i=0;i<callbackFunctions.length;i++)callbackFunctions[i]&&"function"==typeof callbackFunctions[i]&&(0,callbackFunctions[i])();$j(displayClassElement+" .informations").show()}).fail(function(){$j(displayClassElement).addClass("error-field"),$j(displayClassElement+" .error, "+displayClassElement+" .msgError").show(),$j(displayClassElement).children(".alert-error").show(),$j(displayClassElement+" .text-center").hide(),$j(displayClassElement+" .delivery-infos").hide(),$j(displayClassElement+" .loader").hide()}).complete(function(){setTimeout(function(){$j(displayClassElement+" .display-sites").show(),$j(displayClassElement+" .loader").hide()},800)})},displaySites:function(data,displayClassElement,templates){var indispo=!1;"storesCatalogPopin"==templates&&$j.each(data.sites,function(i,item){if(!(indispo=!item.oneHourEligible&&!item.availableInFewDays))return!1}),indispo?($j("#rem-delivery-infos-dispo").hide(),$j("#rem-delivery-infos-indispo").show()):($j(displayClassElement+" .display-sites").json2html(data,bl.json2html.getJson2HtmlFormat(templates)),$j("#rem-delivery-infos-dispo").show(),$j("#rem-delivery-infos-indispo").hide(),setTimeout(function(){if(0<$j(".display-sites").length&&0<$j(".storePickupDetails").length)for(var listStore=$j(".storePickupDetails"),i=0;i<listStore.length;i++)0<listStore[i].getElementsByClassName("no-available").length&&listStore[i].getElementsByClassName("storePickupChooseButton")[0].classList.add("off");if(0<$j(".content-list").length&&0<$j(".store-mag").length)for(listStore=$j(".store-mag"),i=0;i<listStore.length;i++)0<listStore[i].getElementsByClassName("no-available").length&&listStore[i].getElementsByClassName("content-button-retrait")[0].classList.add("off")},800)),"pickUpSitesCatalogPopin"!=templates&&"checkoutPickUpSitePopin"!=templates&&"pickUpSitePopinCarglass"!=templates&&"newCheckoutPickUpSitePopin"!=templates&&"mRelaySelectPickUp"!=templates||bl.delivery.displayPickupPopin(data,displayClassElement),"storesCatalogPopin"==templates&&bl.delivery.displayStorePopin(data,displayClassElement),"newCheckoutPickUpSitePopin"!=templates&&(bl.delivery.updateGoogleMarkers($j(".display-sites li span.icon:visible")),bl.delivery.updateGoogleMarkers($j(".display-sites .formStoresList .list .icon:visible")))},displayPickupPopin:function(data,displayClassElement){var relayTitle=$j(".formStoresList .list .name-pickup"),relayInput=$j(".formStoresList .list input"),relayOpenedOrClosed=$j(".formStoresList .list .openedOrClosed"),relayTitleCheckout=($j(".formStoresList .info-mag"),$j(".address-list .address-container .name-pickup")),relayTitleCheckoutMobile=$j(".address-list .address-container");$j(displayClassElement+" .display-sites .formStoresList label").bind("click",function(event){if($j(this).is(".selected"))relayTitle.removeClass("selected");else{relayTitle.siblings("input").removeAttr("checked"),relayInput.removeClass("selected"),relayTitle.removeClass("selected"),$j(this).siblings("input").attr("checked","checked"),$j(this).siblings("input").addClass("selected"),$j(this).addClass("selected");var clickedStoreZip=$j(this).attr("data-zipcode"),clickedStoreCode=$j(this).attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com")}var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);if(0<$j(displayClassElement+" .day1").length&&$j(displayClassElement+" .day2").length&&($j(displayClassElement+" .day1").html(bl.delivery.formatDateRelaisStandart(site.deliveryDateMin)),$j(displayClassElement+" .day2").html(bl.delivery.formatDateRelaisStandart(site.deliveryDateMax)),$j(displayClassElement+" .informations").css("display","inline-block")),0<$j(displayClassElement+" .deliveryCharge").length&&$j(displayClassElement+" .deliveryCharge").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),0<$j(displayClassElement+" #informationChronopostRelayDate").length&&$j(displayClassElement+" #informationChronopostRelayHour").length){$j(displayClassElement+" #informationChronopostRelayDate").html(bl.delivery.formatDateRelaisExpress(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;$j(displayClassElement+" #informationChronopostRelayHour").html(hour.substring(0,indexH)),$j(displayClassElement+" .informations").css("display","inline-block")}"CHP"==site.network&&"X"==site.code.charAt(site.code.length-1)||"INP"==site.network?($j(displayClassElement+" .is-CHP").hide(),$j(displayClassElement+" .is-INP").show()):($j(displayClassElement+" .is-INP").hide(),$j(displayClassElement+" .is-CHP").show()),"CHP"==site.network&&"X"==site.code.charAt(site.code.length-1)?($j(displayClassElement+" .delivery-infos.INP").hide(),$j(displayClassElement+" .delivery-infos.CHP").show()):($j(displayClassElement+" .delivery-infos.INP").show(),$j(displayClassElement+" .delivery-infos.CHP").hide()),0!==$j(displayClassElement+" .googlemaps .mapframe").length&&$j(displayClassElement+" .googlemaps .mapframe").blGoogleMaps("focusAddress",site)}),$j(".page-delivery .address-list .address-container .store-mag").on("click",function(event){$j(".page-delivery .address-list .address-container input").attr("checked",!1);var label=$j(this).find("label"),input=label.siblings("input");if(label.is(".selected"))relayTitle.removeClass("selected");else{relayTitleCheckout.parent("address").removeClass("selected"),label.parent("address").addClass("selected"),input.attr("checked",!0);var clickedStoreZip=label.attr("data-zipcode"),clickedStoreCode=label.attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com")}var id=label.attr("id"),site=bl.delivery.getSiteFromCache(id);bl.delivery.updateModalInformation(site),0!==$j(displayClassElement+" .map").length&&$j(displayClassElement+" .map").blGoogleMaps("focusAddressRelay",site)}),$j(displayClassElement+" .display-sites .address-list .address-container label").bind("click",function(event){if($j(this).is(".selected"))relayTitle.removeClass("selected");else{relayTitleCheckout.parent("address").removeClass("selected"),$j(this).parent("address").addClass("selected");var clickedStoreZip=$j(this).attr("data-zipcode"),clickedStoreCode=$j(this).attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com")}var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);bl.delivery.updateModalInformation(site),0!==$j(displayClassElement+" .map").length&&$j(displayClassElement+" .map").blGoogleMaps("focusAddressRelay",site)}),$j(".page-delivery .address-list .address-container .white_block").on("click",function(event){$j(".page-delivery .address-list .address-container input").attr("checked",!1);var label=$j(this).find("label"),input=label.siblings("input");relayTitleCheckoutMobile.find("address.selected").removeClass("selected"),label.parent("address").addClass("selected"),input.attr("checked",!0);var clickedStoreZip=label.attr("data-zipcode"),clickedStoreCode=label.attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com");var id=label.attr("id"),site=bl.delivery.getSiteFromCache(id);if(0<$j(displayClassElement+" .insert-delivery .price").length&&$j(displayClassElement+" .insert-delivery .price").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),0<$j(displayClassElement+" .insert-delivery p .datemin").length&&$j(displayClassElement+" .insert-delivery p .datemax").length&&($j(displayClassElement+" .insert-delivery p .datemin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .datemax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateLockersMin").length&&$j(displayClassElement+" .insert-delivery p .dateLockersMax").length&&($j(displayClassElement+" .insert-delivery p .dateLockersMin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .dateLockersMax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").length&&$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").length){$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").html(bl.delivery.formatDateRelaisExpressDeliveryMobile(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").html(hour.substring(0,indexH))}}),$j(displayClassElement+" .display-sites .address-container address label").bind("click",function(event){relayTitleCheckoutMobile.find("address.selected").removeClass("selected"),$j(this).parent("address").addClass("selected");var clickedStoreZip=$j(this).attr("data-zipcode"),clickedStoreCode=$j(this).attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com");var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);if(0<$j(displayClassElement+" .insert-delivery .price").length&&$j(displayClassElement+" .insert-delivery .price").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),0<$j(displayClassElement+" .insert-delivery p .datemin").length&&$j(displayClassElement+" .insert-delivery p .datemax").length&&($j(displayClassElement+" .insert-delivery p .datemin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .datemax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateLockersMin").length&&$j(displayClassElement+" .insert-delivery p .dateLockersMax").length&&($j(displayClassElement+" .insert-delivery p .dateLockersMin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .dateLockersMax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").length&&$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").length){$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").html(bl.delivery.formatDateRelaisExpressDeliveryMobile(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").html(hour.substring(0,indexH))}}),$j(displayClassElement+" .display-sites .formStoresList label .openedOrClosed").bind("click",function(event){$j(this).hasClass("opened24h")||$j(this).hasClass("closeWithoutAgenda")||$j(this).hasClass("closeWithoutAgendaButWithAStartDate")||($j(".formStoresList .info-mag").slideUp("slow"),$j(this).is(".selected")?(relayOpenedOrClosed.removeClass("selected"),relayOpenedOrClosed.removeClass("dshez")):($j(this).siblings(".info-mag").slideDown("slow"),relayOpenedOrClosed.removeClass("selected"),relayOpenedOrClosed.removeClass("dshez"),$j(this).addClass("selected"),$j(this).addClass("dshez"))),$j(this).hasClass("horaireCarglass")&&($j(this).is(".selected")?$j(this).html("Je masque les horaires d&apos;ouverture du point relais"):$j(this).html("J&apos;affiche les horaires d&apos;ouverture du point relais"))}),$j("#modalChoisirPointRelais .modal .modal-body .address-list address .status").click(function(){$j(this).next(".delivery-bloc-info").slideToggle();var long=$j(this).siblings("label").attr("data-longitude"),lat=$j(this).siblings("label").attr("data-latitude");bl.google.isLoaded()?bl.delivery.createGoogleMap(lat,long):bl.google.initAPI("bl.delivery.createGoogleMap",bl.delivery.createGoogleMap,lat,long)}),$j("#modalChoisirPointRelais .modal .modal-body .address-list address .delivery-bloc-info button").click(function(){$j(this).closest(".delivery-bloc-info").slideUp()}),$j("#modalChoisirPointRelais .modal .modal-body .address-list button.btn").click(function(){var action=$j(this).parents(".display-sites").attr("data-url")+"&selectedPickupPoint="+$j(this).parents(".address-list").find("address.selected input").val()+"&shipModeId="+$j(this).parents(".address-list").find("address.selected input").attr("data-shipmode");$j("#updatePickUp-form").attr("action",action),$j("#updatePickUp-form").submit()}),$j(displayClassElement+" .loader").hide(),$j(displayClassElement+" .display-sites .formStoresList label:first").trigger("click"),$j(displayClassElement+" .display-sites .address-container address label:first").trigger("click"),0!==$j(displayClassElement+" .googlemaps .mapframe").length&&(bl.google.isLoaded()?bl.delivery.showMapForCheckoutSelectRelayPopin(displayClassElement,data):bl.google.initAPI("bl.delivery.showMapForCheckoutSelectRelayPopin",bl.delivery.showMapForCheckoutSelectRelayPopin,displayClassElement,data)),0!==$j(displayClassElement+" #map-relay").length&&(bl.google.isLoaded()?bl.delivery.showMapForNewCheckoutSelectRelayPopinTemp(displayClassElement,data):bl.google.initAPILivraison(bl.delivery.triggerPageLivraison(displayClassElement),"bl.delivery.showMapForNewCheckoutSelectRelayPopin",bl.delivery.showMapForNewCheckoutSelectRelayPopin,displayClassElement,data))},createGoogleMap:function(lat,long){var divGoogleMap=document.getElementById("map-site-"+lat+"-"+long);divGoogleMap.style.height="100%";var mapOptions={center:new google.maps.LatLng(lat,long),zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},map=new google.maps.Map(divGoogleMap,mapOptions);new google.maps.Marker({position:new google.maps.LatLng(lat,long),map:map})},displayStorePopin:function(data,displayClassElement){var storeTitle=$j(".formStoresList .list .name-store"),storeInput=$j(".formStoresList .list input"),storeOpenedOrClosed=$j(".formStoresList .list .openedOrClosed");$j(".formStoresList .info-mag");$j(displayClassElement+" .display-sites .formStoresList label").bind("click",function(event){if($j(this).is(".selected"))storeTitle.removeClass("selected");else{storeTitle.siblings("input").removeAttr("checked"),storeInput.removeClass("selected"),storeTitle.removeClass("selected"),$j(this).siblings("input").attr("checked","checked"),$j(this).siblings("input").addClass("selected"),$j(this).addClass("selected");var clickedStoreZip=$j(this).attr("data-zipcode"),clickedStoreCode=$j(this).attr("data-site-id").toUpperCase();setCookie("BL_CLICKED_STORE",clickedStoreZip+"-"+clickedStoreCode,"","/",".boulanger.com")}var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);0!==$j(displayClassElement+" .googlemaps .mapframe").length&&$j(displayClassElement+" .googlemaps .mapframe").blGoogleMaps("focusAddress",site)}),$j(displayClassElement+" .display-sites .formStoresList label .openedOrClosed").bind("click",function(event){$j(".formStoresList .info-mag").slideUp("slow"),$j(this).is(".selected")?(storeOpenedOrClosed.removeClass("selected"),storeOpenedOrClosed.removeClass("dshez")):($j(this).siblings(".info-mag").slideDown("slow"),storeOpenedOrClosed.removeClass("selected"),storeOpenedOrClosed.removeClass("dshez"),$j(this).addClass("selected"),$j(this).addClass("dshez"))}),$j(displayClassElement+" .loader").hide(),$j(displayClassElement+" .display-sites .formStoresList label:first").trigger("click"),0!==$j(displayClassElement+" .googlemaps .mapframe").length&&(bl.google.isLoaded()?bl.delivery.showMapForCheckoutSelectRelayPopin(displayClassElement,data):bl.google.initAPI("bl.delivery.showMapForCheckoutSelectRelayPopin",bl.delivery.showMapForCheckoutSelectRelayPopin,displayClassElement,data))},updateGoogleMarkers:function(markers){if(markers&&0!==markers.length)for(var alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=0;i<markers.size();i++)$j(markers.get(i)).html(alphabet[i%26])},formatAddress:function(address){var fAddress="";for(i=0;i<address.lines.length;i++)fAddress+=address.lines[i]+"<br>";return fAddress+=address.zipCode+" "+address.city},formatAddressForModalRelay:function(address){var fAddress="";for(i=0;i<address.lines.length;i++)fAddress+=address.lines[i].charAt(0).toUpperCase()+address.lines[i].slice(1).toLowerCase()+"<br>";return fAddress+=address.zipCode+" "+address.city.charAt(0).toUpperCase()+address.city.slice(1).toLowerCase()},formatAddressForGmap:function(address){var fAddress="";for(i=0;i<address.lines.length;i++)fAddress+=address.lines[i]+" ";return fAddress+=address.zipCode+" "+address.city},formatStoresAddressForCatalogPopin:function(site){var fAddress="";return fAddress+="<span>"+site.designation+"<br></span>",fAddress+=bl.delivery.formatAddress(site.address),fAddress+='<br><a href="'+site.url+'" target="_blank">Plan d\'acces</a>'},formatPickUpTimetable:function(jour){return jour&&("00:00"!=jour.morningOpeningTime&&null!==jour.morningOpeningTime||"00:00"!=jour.morningClosingTime&&null!==jour.morningClosingTime||"00:00"!=jour.afternoonOpeningTime&&null!==jour.afternoonOpeningTime||"00:00"!=jour.afternoonClosingTime&&null!==jour.afternoonClosingTime)?"00:00"!=jour.afternoonOpeningTime&&null!==jour.afternoonOpeningTime||"00:00"!=jour.afternoonClosingTime&&null!==jour.afternoonClosingTime?jour.morningOpeningTime.replace(":","h")+" - "+jour.morningClosingTime.replace(":","h")+" et "+jour.afternoonOpeningTime.replace(":","h")+" - "+jour.afternoonClosingTime.replace(":","h"):jour.morningOpeningTime.replace(":","h")+" - "+jour.morningClosingTime.replace(":","h"):"Fermé"},formatPickUpAgenda:function(agenda){if(!agenda)return"";var localAgenda=agenda;return"<p><span>Lundi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.monday)+"</p><p><span>Mardi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.tuesday)+"</p><p><span>Mercredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.wednesday)+"</p><p><span>Jeudi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.thursday)+"</p><p><span>Vendredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.friday)+"</p><p><span>Samedi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.saturday)+"</p><p><span>Dimanche :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.sunday)},formatPickUpAgendaMobile:function(agenda,isOrdersSimPage){if(!agenda)return"";var localAgenda=agenda;return(isOrdersSimPage?"<ul><li><span>Lundi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.monday)+"</span></li><li><span>Mardi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.tuesday)+"</span></li><li><span>Mercredi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.wednesday)+"</span></li><li><span>Jeudi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.thursday)+"</span></li><li><span>Vendredi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.friday)+"</span></li><li><span>Samedi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.saturday)+"</span></li><li><span>Dimanche :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.sunday):"<ul><li><span>Lundi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.monday)+"</li><li><span>Mardi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.tuesday)+"</li><li><span>Mercredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.wednesday)+"</li><li><span>Jeudi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.thursday)+"</li><li><span>Vendredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.friday)+"</li><li><span>Samedi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.saturday)+"</li><li><span>Dimanche :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.sunday))+"</ul>"},formatStoresTimetable:function(jour){return null===jour.morningOpeningTime&&null===jour.morningClosingTime&&null===jour.afternoonOpeningTime&&null===jour.afternoonClosingTime?"Fermé":null===jour.morningClosingTime&&null===jour.afternoonOpeningTime?"de "+bl.delivery.getHour(jour.morningOpeningTime)+" à "+bl.delivery.getHour(jour.afternoonClosingTime):"de "+bl.delivery.getHour(jour.morningOpeningTime)+" à "+bl.delivery.getHour(jour.morningClosingTime)+" et de "+bl.delivery.getHour(jour.afternoonOpeningTime)+" à "+bl.delivery.getHour(jour.afternoonClosingTime)},formatDateRelaisStandart:function(date){return bl.delivery.getNumberOfDayAndMonth(date)},formatDateChooseRelais:function(date){if(null===date)return"";date.split("-");return bl.delivery.getDayWording(date)+" "+bl.delivery.getNumberOfDay(date)+" "+bl.delivery.getMonthWording(date)},formatDateRelaisStandartDeliveryMobile:function(date){return bl.delivery.formatDateRelayDeliveryMobile(date)},formatFormatAmountWithOffert:function(deliveryCharge){if(null!==deliveryCharge)return 0===deliveryCharge?"OFFERT":deliveryCharge+" €"},formatDateRelaisExpress:function(date){return bl.delivery.getNumberOfDayAndMonth(date)},formatDateRelaisExpressDeliveryMobile:function(date){return bl.delivery.formatDateRelayDeliveryMobile(date)},formatDateStores:function(date){if(null===date)return"";date.split("-");var fDate="<span>"+bl.delivery.getDayWording(date)+" "+bl.delivery.getNumberOfDay(date)+" "+bl.delivery.getMonthWording(date)+"</span>";return fDate+=" à partir de ",fDate+="<span>"+bl.delivery.getHour(date)+"</span>"},formatDateRelayDeliveryMobile:function(date){if(null===date)return"";date.split("-");return"<span>"+bl.delivery.getDayWording(date)+" "+bl.delivery.getNumberOfDay(date)+" "+bl.delivery.getMonthWording(date)+"</span>"},getDayWording:function(date){if(null===date)return"";var day=date.split("-")[0];return 0===day.length?"":day.toLowerCase()},getMonthWording:function(date){if(null===date)return"";var month=date.split("-")[1];return 0===month.length?"":month.toLowerCase()},getNumberOfDay:function(date){if(null===date)return"";var infosDate=date.split("-");return 0===infosDate[2].length?"":infosDate[2].split("/")[0]},getNumberOfDayAndMonth:function(date){if(null===date)return"";var infosDate=date.split("-");if(0===infosDate[2].length)return"";var dateFormat=infosDate[2].split("/");return dateFormat[0]+"/"+dateFormat[1]},getHour:function(date){if(null===date)return"";var infosDate=date.split("-");if(0===infosDate[3].length)return"";var hourFormat=infosDate[3].split(":");return hourFormat[0]+"h"+hourFormat[1]},formatStoresSchedulesForCatalogPopin:function(agendas){if(null===agendas||0===agendas.length)return"";for(var jour=new Array,i=0;i<agendas.length;i++)jour[agendas[i].day]=agendas[i];var fSchedule="",schedule=new Array,jIndex=0;for(i=1;i<=7;i++)null===jour[i-1]?(schedule[jIndex]=jour[i],jIndex+=1):jour[i].morningOpeningTime==jour[i-1].morningOpeningTime&&jour[i].afternoonClosingTime==jour[i-1].afternoonClosingTime&&jour[i].morningClosingTime==jour[i-1].morningClosingTime&&jour[i].afternoonOpeningTime==jour[i-1].afternoonOpeningTime?(schedule[jIndex]=jour[i],jIndex+=1):(fSchedule+=bl.delivery.formatScheduleWording(schedule)+", ",(schedule=new Array)[jIndex=0]=jour[i]),7==i&&(fSchedule+=bl.delivery.formatScheduleWording(schedule)+".");return fSchedule},formatStoresSchedulesForUserArea:function(agenda){if(!agenda)return"";for(var schedule="<ul>",i=0;i<agenda.length;i++)schedule+="<li>",schedule+="<span>"+bl.delivery.getDayByNumber(agenda[i].day)+"</span>",schedule+="<span>"+bl.delivery.formatStoresTimetable(agenda[i])+"</span>",schedule+="</li>";return schedule+="</ul>"},deliveryDateFormat:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),dayName=splittedDeliveryDate[0],monthName=splittedDeliveryDate[1],date=splittedDeliveryDate[2],time=splittedDeliveryDate[3],diplayedDayName=dayName.substring(0,1).toUpperCase()+dayName.substring(1,3)+".",dayNumber=date.split("/")[0],diplayedMonthName=monthName.substring(0,1).toUpperCase()+monthName.substring(1,monthName.lenght),formattedDeliveryDate={};return formattedDeliveryDate.day=diplayedDayName+" "+dayNumber+" "+diplayedMonthName,formattedDeliveryDate.time=time.substring(0,5).replace(":","h"),formattedDeliveryDate}},deliveryDateFormat2:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),dayName=splittedDeliveryDate[0],monthName=splittedDeliveryDate[1],date=splittedDeliveryDate[2],time=splittedDeliveryDate[3],dayNumber=date.split("/")[0],formattedDeliveryDate={};return formattedDeliveryDate.day=dayName+" "+dayNumber+" "+monthName,formattedDeliveryDate.time=time.substring(0,5).replace(":","h"),formattedDeliveryDate}},deliveryDateFormatDayMonth:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),date=splittedDeliveryDate[2],time=splittedDeliveryDate[3],dayNumber=date.split("/"),day=dayNumber[0],month=dayNumber[1],formattedDeliveryDate={};return formattedDeliveryDate.day=day+"/"+month,formattedDeliveryDate.time=time.substring(0,5).replace(":","h"),formattedDeliveryDate}},deliveryDelayFormat:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),date=(splittedDeliveryDate[0],splittedDeliveryDate[1],splittedDeliveryDate[2]),currentDate=(splittedDeliveryDate[3],new Date),WNbJours=(deliveryDate=new Date(date.split("/")[2],date.split("/")[1]-1,date.split("/")[0])).getTime()-currentDate.getTime();return Math.ceil(WNbJours/864e5)}},formatScheduleWording:function(agendas){if(agendas)return 0===agendas.length?"Fermé":1<agendas.length?null===agendas[0].morningOpeningTime&&null===agendas[0].morningClosingTime&&null===agendas[0].afternoonOpeningTime&&null===agendas[0].afternoonClosingTime?"Fermé du "+bl.delivery.getDayByNumber(agendas[0].day)+" au "+bl.delivery.getDayByNumber(agendas[agendas.length-1].day):"Du "+bl.delivery.getDayByNumber(agendas[0].day)+" au "+bl.delivery.getDayByNumber(agendas[agendas.length-1].day)+" "+bl.delivery.formatStoresTimetable(agendas[0]):1==agendas.length?null===agendas[0].morningOpeningTime&&null===agendas[0].morningClosingTime&&null===agendas[0].afternoonOpeningTime&&null===agendas[0].afternoonClosingTime?"Fermé le "+bl.delivery.getDayByNumber(agendas[0].day):"Le "+bl.delivery.getDayByNumber(agendas[0].day)+" "+bl.delivery.formatStoresTimetable(agendas[0]):void 0},getDayByNumber:function(n){var day="";switch(n){case 1:day="Lundi";break;case 2:day="Mardi";break;case 3:day="Mercredi";break;case 4:day="Jeudi";break;case 5:day="Vendredi";break;case 6:day="Samedi";break;case 7:day="Dimanche"}return day},getAvailabilityData:function(site,calculateDate){var availabilityJSON={},jsonDate=null,isGoogleShoppingContext=(jsonDate=bl.delivery.deliveryDateFormat2(site.deliveryDateMin),!1);try{bl.catalog.productPage.googleShoppingContextualization.isGoogleShoppingContext()&&(isGoogleShoppingContext=!0)}catch(e){console.log(e)}if(void 0!==jsonDate){if(site.oneHourEligible&&!site.oneHourEligibleInFuture)availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Disponible en magasin<br/>Retrait possible sous 1h":'<span class="delivery-status">En stock</span> Retrait sous 1h');else if(site.oneHourEligibleInFuture){if(availabilityJSON.cssClass=isGoogleShoppingContext?"delivery-day available-soon":"delivery-day available",!0===calculateDate)if(isGoogleShoppingContext){var delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);availabilityJSON.formattedDate=1==delayDay?"Disponible en magasin<br/>Retrait dès demain<br/>à partir de "+jsonDate.time:"Disponible en magasin<br/>Retrait dès "+jsonDate.day+"<br/>à partir de "+jsonDate.time}else availabilityJSON.formattedDate="Retrait dès "+jsonDate.day+"<br/>à partir de "+jsonDate.time.toLowerCase()}else if(site.availableInFewDays){if(availabilityJSON.cssClass=isGoogleShoppingContext?"delivery-day no-available":"delivery-day available-soon",!0===calculateDate)if(isGoogleShoppingContext)availabilityJSON.formattedDate="Retrait dès "+jsonDate.day+"<br/>à partir de "+jsonDate.time.toLowerCase();else{delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);availabilityJSON.formattedDate=1==delayDay?'<span class="delivery-status">Disponible sur commande</span>Retrait dès demain<br/>à partir de '+jsonDate.time.toLowerCase():'<span class="delivery-status">Disponible sur commande</span>Retrait dès le '+jsonDate.day+"<br/>à partir de "+jsonDate.time.toLowerCase()}}else availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Indisponible en magasin":"Indisponible");return availabilityJSON}},getAvailabilityMobileData:function(site,calculateDate){var availabilityJSON={},jsonDate=null,isGoogleShoppingContext=(jsonDate=bl.delivery.deliveryDateFormat2(site.deliveryDateMin),!1);if(bl.catalog.productPage.googleShoppingContextualization&&bl.catalog.productPage.googleShoppingContextualization.isGoogleShoppingContext()&&(isGoogleShoppingContext=!0),void 0!==jsonDate){if(site.oneHourEligible&&!site.oneHourEligibleInFuture)availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Disponible en magasin<br/>Retrait sous 1H":'<span class="delivery-status">En stock</span> Retrait sous 1h');else if(site.oneHourEligibleInFuture)availabilityJSON.cssClass=isGoogleShoppingContext?"delivery-day available-soon":"delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Indisponible en magasin<br/>Retrait dès le "+jsonDate.day+"<br/>A partir de "+jsonDate.time:'<span class="delivery-status">En magasin</span> Retrait dès le '+jsonDate.day+" à partir de "+jsonDate.time.toLowerCase());else if(site.availableInFewDays){if(availabilityJSON.cssClass="delivery-day available-soon",!0===calculateDate)if(isGoogleShoppingContext)availabilityJSON.formattedDate="Indisponible en magasin<br/>Retrait dès le "+jsonDate.day+"<br/>A partir de "+jsonDate.time+"<br/>Sur commande";else{var delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);availabilityJSON.formattedDate=1==delayDay?'<span class="delivery-status">Disponible sur commande</span>Retrait dès demain à partir de '+jsonDate.time.toLowerCase():'<span class="delivery-status">Disponible sur commande</span>Retrait dès le '+jsonDate.day+" à partir de "+jsonDate.time.toLowerCase()}}else availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Indisponible en magasin":"Indisponible");return availabilityJSON}},getAvailabilityDataForREM:function(site,calculateDate){var availabilityJSON={},jsonDate=null;if(void 0!==(jsonDate=bl.delivery.deliveryDateFormatDayMonth(site.deliveryDateMin)))return site.oneHourEligible&&!site.oneHourEligibleInFuture?(availabilityJSON.cssClass="availability",!0===calculateDate&&(availabilityJSON.formattedDate='<span class="delivery-status">En stock</span> Retrait possible sous 1h')):site.oneHourEligibleInFuture?(availabilityJSON.cssClass="availability notAvailable",!0===calculateDate&&(availabilityJSON.formattedDate="Retrait dès le "+jsonDate.day+"<br/>à partir de "+jsonDate.time.toLowerCase())):site.availableInFewDays?(availabilityJSON.cssClass="availability notAvailable",!0===calculateDate&&(availabilityJSON.formattedDate="Retrait dès le "+jsonDate.day+"<br/>à partir de "+jsonDate.time.toLowerCase())):(availabilityJSON.cssClass="availability notAvailable",!0===calculateDate&&(availabilityJSON.formattedDate="Indisponible")),availabilityJSON},getConsultAvailabilityData:function(site,calculateDate){var availabilityJSON={},delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);return delayDay=1==delayDay?'<span class="delivery-status">Disponible sur commande</span>dès demain':'<span class="delivery-status">Disponible sur commande</span>sous '+delayDay+" jours",site.oneHourEligible&&!site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate='<span class="delivery-status">En stock</span>')):site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=delayDay)):site.availableInFewDays?!0===calculateDate&&bl.delivery.deliveryDelayFormat(site.deliveryDateMin)?(availabilityJSON.cssClass="delivery-day available-soon",availabilityJSON.formattedDate=delayDay):(availabilityJSON.cssClass="delivery-day no-available",availabilityJSON.formattedDate="Indisponible"):(availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate="Indisponible")),availabilityJSON},getConsultMobileAvailabilityData:function(site,calculateDate){var availabilityJSON={},jsonDate=bl.delivery.deliveryDateFormat2(site.deliveryDateMin),delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);if(void 0!==jsonDate)return delayDay=1==delayDay?'<span class="delivery-status">Disponible sur commande</span>dès demain':'<span class="delivery-status">Disponible sur commande</span>sous '+delayDay+" jours",site.oneHourEligible&&!site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate='<span class="delivery-status">En stock</span> Retrait sous 1h')):site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=delayDay)):site.availableInFewDays?(availabilityJSON.cssClass="delivery-day available-soon",!0===calculateDate&&(availabilityJSON.formattedDate=delayDay)):(availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate="Indisponible")),availabilityJSON},getMonthByNumber:function(n){switch(n){case 1:"Janvier";break;case 2:"Fervrier";break;case 3:"Mars";break;case 4:"Avril";break;case 5:"Mai";break;case 6:"Juin";break;case 7:"Juillet";break;case 8:"Août";break;case 9:"Septembre";break;case 10:"Octobre";break;case 11:"Novembre";break;case 12:"Décembre"}return day},open24h:function(nextOpeningHour){return nextOpeningHour&&-1!=nextOpeningHour.indexOf("24h/24h")?"opened24h":""},showMapForCheckoutSelectRelayPopin:function(element,data){$j(element+" .googlemaps .mapframe").blGoogleMaps("initGMap",{context:$j(element+" .googlemaps .mapframe").parents(".view")}),$j(element+" .googlemaps .mapframe").blGoogleMaps("update",data)},showMapForNewCheckoutSelectRelayPopin:function(element,data){$j(element+" .map").blGoogleMaps("initGMapforRelay",{context:$j(element+" .map").parents(".modal")}),$j(element+" .map").blGoogleMaps("updateforRelay",data)},triggerPageLivraison:function(element){return function(){$j(element+" .display-sites .address-list .address-container label:first").trigger("click")}},showMapForNewCheckoutSelectRelayPopinTemp:function(element,data){$j(element+" .map").blGoogleMaps("initGMapforRelay",{context:$j(element+" .map").parents(".modal")}),$j(element+" .map").blGoogleMaps("updateforRelay",data),$j(element+" .display-sites .address-list .address-container label:first").trigger("click")},updateModalInformation:function(site){var tabs=$j("#modalRelaiCheckout .tabs li.current"),networkClass="",carrier=tabs.attr("data-carrier");if("INP"!=carrier&&"CHP_LOC"!=carrier&&"INP_CHP"!=carrier||(networkClass=".nav-schedules."+site.network),"CHP"==site.network){if(""!==site.deliveryDateMin&&null!==site.deliveryDateMin){tabs.find(networkClass+" .schedules-1").html(bl.delivery.formatDateChooseRelais(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;tabs.find(networkClass+" .schedules-2").html(hour.substring(0,indexH))}}else""!==site.deliveryDateMin&&null!==site.deliveryDateMin&&""!==site.deliveryDateMax&&null!==site.deliveryDateMax&&(tabs.find(networkClass+" .schedules-1").html(bl.delivery.formatDateChooseRelais(site.deliveryDateMin)),tabs.find(networkClass+" .schedules-2").html(bl.delivery.formatDateChooseRelais(site.deliveryDateMax)));0<tabs.find(".nav-price").length&&tabs.find(".nav-price").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),""!==networkClass&&"CHP"==site.network&&"X"==site.code.charAt(site.code.length-1)?($j(".nav-schedules.INP").hide(),$j(".nav-schedules.CHP").show()):($j(".nav-schedules.INP").show(),$j(".nav-schedules.CHP").hide())},storeDrive:function(site){return site.drive?"Retrait drive disponible":""}}),function($j){var id=null,context=null,maps={},geocoder=null,searchCache={},zipCodeAddress=null,marker=[],options={},labels="ABCDEFGHIJKLMNOPQRSTUVWXYZ",methods={init:function(options){},initGMap:function(pOptions){context=pOptions.context,options=$j.extend({mapSelector:".googlemaps .mapframe",id:context.attr("id")},pOptions),id=options.id;var mapOptions={zoom:10,center:new google.maps.LatLng(48.8567,2.3508),mapTypeId:google.maps.MapTypeId.ROADMAP},mapLocation=$j(options.mapSelector,context)[0];return $j.each($j(options.mapSelector,context),function(){$j(this).is(":visible")&&(mapLocation=this)}),maps[id]=new google.maps.Map(mapLocation,mapOptions),geocoder=new google.maps.Geocoder,this},initGMapforRelay:function(pOptions){context=pOptions.context,options=$j.extend({mapSelector:".map",id:context.attr("id")},pOptions),id=options.id;var mapOptions={zoom:10,center:new google.maps.LatLng(48.8567,2.3508),mapTypeId:google.maps.MapTypeId.ROADMAP},mapLocation=$j(options.mapSelector,context)[0];return $j.each($j(options.mapSelector,context),function(){$j(this).is(":visible")&&(mapLocation=this)}),maps[id]=new google.maps.Map(mapLocation,mapOptions),geocoder=new google.maps.Geocoder,this},update:function(data){context=$j(this).parents(".view"),id=context.attr("id");for(var i=0;i<marker.length;i++)marker[i].setMap(null);marker=[],data.sites.length+1;var temp=[];null!=(zipCodeAddress=$j("#sitesSearch",context).val())&&""!==zipCodeAddress&&(zipCodeAddress+=", France",methods.searchAddress(temp,zipCodeAddress,"../wcsstore/assets/dist/images/common/googlemaps/blue-dot.png"));for(i=0;i<data.sites.length;i++)myMarker={identifier:data.sites[i].network+"-"+data.sites[i].code,address:bl.delivery.formatAddressForGmap(data.sites[i].address),image:"geoloc.png",index:i},null===data.sites[i].address.location||0===data.sites[i].address.location.lat||0===data.sites[i].address.location.lon?methods.searchAddress(temp,myMarker):(myMarker.location=new google.maps.LatLng(data.sites[i].address.location.lat,data.sites[i].address.location.lon),methods.searchLocation(temp,myMarker));0<temp.length&&(methods.addAddresses(temp),methods.focusAddress(data.sites[0],!0))},updateforRelay:function(data){context=$j(this).parents(".modal");id=context.attr("id");for(var i=0;i<marker.length;i++)marker[i].setMap(null);marker=[],data.sites.length+1;var temp=[];null!=(zipCodeAddress=$j("#relaySearchFormZipcode",context).val())&&""!==zipCodeAddress&&(zipCodeAddress+=", France",methods.searchAddress(temp,zipCodeAddress,"../wcsstore/assets/dist/images/common/googlemaps/blue-dot.png"));for(i=0;i<data.sites.length;i++)myMarker={identifier:data.sites[i].network+"-"+data.sites[i].code,address:bl.delivery.formatAddressForGmap(data.sites[i].address),image:"geoloc.png",index:i},null===data.sites[i].address.location||0===data.sites[i].address.location.lat||0===data.sites[i].address.location.lon?methods.searchAddress(temp,myMarker):(myMarker.location=new google.maps.LatLng(data.sites[i].address.location.lat,data.sites[i].address.location.lon),methods.searchLocation(temp,myMarker));0<temp.length&&(methods.addAddresses(temp,!0),methods.focusAddress(data.sites[0],!0))},searchAddress:function(temp,myMarker){void 0!==searchCache[myMarker.address]?temp.push(searchCache[myMarker.address]):geocoder.geocode({address:myMarker.address},function(results,status){status==google.maps.GeocoderStatus.OK&&(myMarker.location=results[0].geometry.location,searchCache[myMarker.address]=myMarker,temp.push(searchCache[myMarker.address]),methods.addAddress(myMarker),0===myMarker.index&&methods.focusAddress(myMarker.address,!0))})},searchLocation:function(temp,myMarker){void 0!==searchCache[myMarker.address]||(searchCache[myMarker.address]=myMarker),temp.push(searchCache[myMarker.address])},addAddresses:function(temp,modalRelay){for(var i=0;i<temp.length;i++)temp[i].index=i,methods.addAddress(temp[i],modalRelay);google.maps.event.trigger(maps[id],"resize"),methods.focusAddress(zipCodeAddress,!1)},addAddress:function(myMarker,modalRelay){var i=marker.length,textLabel=void 0===myMarker.index?"":labels[myMarker.index%labels.length];modalRelay?marker.push(new google.maps.Marker({map:maps[id],position:myMarker.location,icon:{labelOrigin:new google.maps.Point(12,12),url:"/wcsstore/BoulangerStg/commerce/desktop/catalog/product/img/"+myMarker.image}})):marker.push(new google.maps.Marker({map:maps[id],position:myMarker.location,label:{text:textLabel,fontWeight:"bold",color:"#FFFFFF"},icon:{labelOrigin:new google.maps.Point(12,12),url:"/wcsstore/BoulangerStg/commerce/desktop/catalog/product/img/"+myMarker.image}})),google.maps.event.addListener(marker[i],"click",function(){if(maps[id].setZoom(12),maps[id].setCenter(marker[i].getPosition()),!$j.isBlank(myMarker.identifier)){var li=$j(".googlemaps .list label#"+myMarker.identifier,context);if(0<li.length)(container=li.parents(".list")).scrollTop(li.offset().top-container.offset().top+container.scrollTop()),container.animate({scrollTop:li.offset().top-container.offset().top+container.scrollTop()}),li.trigger("click");var container,address=$j("address#"+myMarker.identifier,context);if(0<address.length)(container=address.parents(".address-container")).scrollTop(address.offset().top-container.offset().top+container.scrollTop()),container.animate({scrollTop:address.offset().top-container.offset().top+container.scrollTop()}),address.trigger("click")}})},focusAddress:function(e,zoom){var address=e;e&&"string"!=typeof e&&(address=bl.delivery.formatAddressForGmap(e.address)),void 0!==searchCache[address]&&((void 0===zoom||zoom)&&maps[id].setZoom(12),maps[id].setCenter(searchCache[address].location))},focusAddressRelay:function(e,zoom){var address=e;if(e&&"string"!=typeof e&&(address=bl.delivery.formatAddressForGmap(e.address)),void 0!==searchCache[address]){for((void 0===zoom||zoom)&&maps[id].setZoom(12),i=0;i<marker.length;i++)marker[i].setIcon(bl.vars.imgDir+"GoogleMapImages/icon-map-blue.png");var index=searchCache[address].index;marker[index].setIcon(bl.vars.imgDir+"GoogleMapImages/icon-map-orange.png"),maps[id].setCenter(searchCache[address].location)}}};$j.fn.blGoogleMaps=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $j.error("Method "+method+" does not exist on jQuery.blGoogleMaps"):methods.init.apply(this,arguments)}}(jQuery),$j(document).ready(function(){var btnsDelivery=document.querySelectorAll(".btn__delivery");if(btnsDelivery&&0<btnsDelivery.length)for(var i=0;i<btnsDelivery.length;i++)btnsDelivery[i].addEventListener("click",function(){$j(".alert.alert-error.alert-merchant").toggle()})}),"undefined"==typeof bl&&(bl={}),void 0===bl.json2html&&(bl.json2html={}),$j.extend(bl.json2html,{getJson2HtmlFormat:function(template){return"pickUpSitesCatalogPopin"==template?pickUpSitesCatalogPopin.displayPickUpSitesInCatalogPopin:"userAreaFavoriteStoreMobile"==template?favoriteStorePopinInUserAreaMobile.displayStores:"checkoutPickUpSitePopinMobile"==template?pickUpSitesCheckOutPopinMobile.displayPickUpSitesPopinInCheckout:"storesCatalogPopin"==template?storesInCatalogPopin.displayStoresInCatalogPopin:"storesCatalogPickUpPopin"==template?storesInCatalogPopin.displayStoresInCatalogPickUpPopin:"storesCatalogPickUpAvailabilityPopin"==template?storesInCatalogPopin.displayStoresInCatalogPickAvailabilityUpPopin:"checkoutPickUpSitePopin"==template?pickUpSitesCheckOutPopin.displayPickUpSitesPopinInCheckout:"newCheckoutPickUpSitePopin"==template?newPickUpSitesCheckOutPopin.displayPickUpSitesPopinInCheckout:"userAreaFavoriteStore"==template?favoriteStorePopinInUserArea.displayStores:"mStorePickUp"==template?mobileTemplates.displayStorePickUpPage:"mStoreAvailability"==template?mobileTemplates.displayStoreAvailabilityPage:"mExpressRelayPickUpPopin"==template?mobileTemplates.displayExpressRelayPickUpPopin:"mStandardRelayPickUpPopin"==template?mobileTemplates.displayStandardRelayPickUpPopin:"mLockersPickUpPopin"==template?mobileTemplates.displayLockersPickUpPopin:"mStorePickUpPopin"==template?mobileTemplates.displayStorePickUpPopin:"mRelayPickUp"==template?mobileTemplates.displayRelayPickUpPage:"mRelaySelectPickUp"==template?mobileTemplates.displayRelaySelectPickUpPage:"mRelayCatalogPickUp"==template?mobileTemplates.displayRelayCatalogPickUpPage:"carglass"==template?favoriteStoreCarglass.displayStores:"pickUpSitePopinCarglass"==template?pickUpSitePopinCarglass.displayPickUpSitePopinCarglass:"mStorePickUpCarglass"==template?mobileTemplates.displayStorePickUpPageCarglass:"mRelayPickUpCarglass"==template?mobileTemplates.displayRelayPickUpPageCarglass:void 0}});var basePath="/webapp/wcs/stores/servlet/",pickUpSitesCheckOutPopin={displayPickUpSitesPopinInCheckout:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"mapframe_tunnel",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,pickUpSitesCheckOutPopin.displayPickUpSites)}}]}]}],displayPickUpSites:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){var typeLibelle="name-pickup relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle="name-pickup relay-name type-CHP"),"INP"==this.network&&(typeLibelle="name-pickup relay-name type-INP"),typeLibelle},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return"- "+this.formatDistance}},{tag:"span",class:function(){return"openedOrClosed "+this.openState+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:"adresse",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]},pickUpSitesCatalogPopin={displayPickUpSitesInCatalogPopin:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"map",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,pickUpSitesCatalogPopin.displayPickUpSites)}}]}]}],displayPickUpSites:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){var typeLibelle="name-pickup relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle="name-pickup relay-name type-CHP"),"INP"==this.network&&(typeLibelle="name-pickup relay-name type-INP"),typeLibelle},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return"- "+this.formatDistance}},{tag:"span",class:function(){return"openedOrClosed "+this.openState+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:"adresse",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]},storesInCatalogPopin={displayStoresInCatalogPopin:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"map",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,storesInCatalogPopin.displayStoresSites)}}]}]}],displayStoresSites:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"REMId",value:"${network}-${code}",id:"REM_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"REM_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){return"name-store"},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return null==this.formatDistance?"":"- "+this.formatDistance}},{tag:"span",class:function(){return"openedOrClosed "+this.openState+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:function(){var availabilityData=bl.delivery.getAvailabilityDataForREM(this,!1);return void 0===availabilityData?"availability notAvailable":availabilityData.cssClass},html:function(){var availabilityData=bl.delivery.getAvailabilityDataForREM(this,!0);return void 0===availabilityData?"Indisponible":availabilityData.formattedDate}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}},{tag:"div",class:"adresse",html:"${address.lines}<br>${address.zipCode} ${address.city}"}]}]}]}],displayStores:[{tag:"tr","data-id":"${code}",children:[{tag:"td",class:"date",html:function(){return bl.delivery.formatDateStores(this.deliveryDateMin)}},{tag:"td",class:"location",html:function(){return bl.delivery.formatStoresAddressForCatalogPopin(this)}},{tag:"td",class:"schedules",html:function(){return bl.delivery.formatStoresSchedulesForCatalogPopin(this.agendas)}}]}],displayStoresInCatalogPickUpPopin:[{tag:"div",class:"list",children:[{tag:"div",class:"info-tri",children:[{tag:"p",html:"Nos stocks magasin sont actualisés toutes les demi-heures."},{tag:"div",class:"triSelect",children:[{tag:"select",class:"dropdown",id:"dropdown",name:"type",children:[{tag:"option",value:"1",html:"Trier par distance"},{tag:"option",value:"0",html:"Trier par disponibilité"},{tag:"option",value:"2",html:"Trier par ordre alphabétique"},{tag:"option",value:"3",html:"Ouvert le plus tard"},{tag:"option",value:"4",html:"Ouvert le plus tôt"}]}]}]},{tag:"div",class:"content-list",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,storesInCatalogPopin.displayPickUpStores)}}]}]}],displayPickUpStores:[{tag:"li",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},"data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",children:[{tag:"p",class:"name-mag",children:[{tag:"b",html:"${designation}",children:[{tag:"span",class:"length",html:function(){if(this.formatDistance)return" - "+this.formatDistance}}]},{tag:"span",class:function(){return""==bl.delivery.storeDrive(this)?"isDrive off":"isDrive"},html:function(){return bl.delivery.storeDrive(this)}},{tag:"span",class:function(){return"openedClosed "+this.openState},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}]},{tag:"p",class:function(){var availabilityData=bl.delivery.getAvailabilityData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getAvailabilityData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantité disponible : "+this.stock+"</span>"),displayAvailability}},{tag:"div",class:"content-button-retrait",children:[{tag:"a","data-modal-url":function(){return"true"==$j("#isDeliveryPage").val()?basePath+"catalog/storePickupUpdate":basePath+"catalog/storePickupConfirmation"},"data-type-panier-test-ab":"true",href:"javascript:void(0);",class:"popup button buttonOrange next REM",html:function(){return"true"==$j("#isDeliveryPage").val()||0<$j("#storemap-form").length?"Retirer en magasin":"Choisir ce magasin"}},{tag:"a","data-modal-url":function(){return"true"==$j("#isDeliveryPage").val()?basePath+"catalog/storePickupUpdate":basePath+"catalog/storePickupConfirmation"},"data-type-panier-test-ab":"true",href:"javascript:void(0);",class:function(){return""!=bl.delivery.storeDrive(this)?"popup button buttonOrange next drive":"popup button buttonOrange next drive off"},html:function(){if(""!=bl.delivery.storeDrive(this))return"Retirer en drive"}}]},{tag:"div",class:"info-mag",children:[{tag:"span",class:"adresse-mag",html:"${address.lines}<br>${address.zipCode} ${address.city}"},{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"span",class:"fermeture-info",html:"Fermer",children:[{tag:"img",src:function(){return $j("#urlImgFermer").val()},height:"15",border:"0",width:"14"}]}]}]}],displayStoresInCatalogPickAvailabilityUpPopin:[{tag:"div",class:"list",children:[{tag:"div",class:"info-tri",children:[{tag:"p",html:"Nos stocks magasin sont actualisés toutes les demi-heures."},{tag:"div",class:"triSelect",children:[{tag:"select",class:"dropdown",id:"dropdown",name:"type",children:[{tag:"option",value:"1",html:"Trier par distance"},{tag:"option",value:"0",html:"Trier par disponibilité"},{tag:"option",value:"2",html:"Trier par ordre alphabétique"},{tag:"option",value:"3",html:"Ouvert le plus tard"},{tag:"option",value:"4",html:"Ouvert le plus tôt"}]}]}]},{tag:"div",class:"content-list",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,storesInCatalogPopin.displayPickUpStoresAvailability)}}]}]}],displayPickUpStoresAvailability:[{tag:"li",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},"data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",children:[{tag:"p",class:"name-mag",children:[{tag:"b",html:"${designation}",children:[{tag:"span",class:"length",html:function(){if(this.formatDistance)return" - "+this.formatDistance}}]},{tag:"span",class:function(){return"openedClosed "+this.openState},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}]},{tag:"p",class:function(){var availabilityData=bl.delivery.getAvailabilityData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getAvailabilityData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantité disponible : "+this.stock+"</span>"),displayAvailability}},{tag:"a","data-modal-url":function(){return"true"==$j("#isDeliveryPage").val()?basePath+"catalog/storePickupUpdate":basePath+"catalog/storePickupConfirmation"},"data-type-panier-test-ab":"true",href:"javascript:void(0);",class:"popup button buttonOrange next REM",html:function(){return"true"==$j("#isDeliveryPage").val()||0<$j("#storemap-form").length?"Retirer en magasin":"Choisir ce magasin"}},{tag:"div",class:"info-mag",children:[{tag:"span",class:"adresse-mag",html:"${address.lines}<br>${address.zipCode} ${address.city}"},{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"span",class:"fermeture-info",html:"Fermer",children:[{tag:"img",src:function(){return $j("#urlImgFermer").val()},height:"15",border:"0",width:"14"}]}]}]}]},pickUpSitesCheckOutPopinMobile={displayPickUpSitesPopinInCheckout:[{tag:"div",children:function(){return json2html.transform(this.sites,pickUpSitesCheckOutPopinMobile.displayPickUpSites)}}],displayPickUpSites:[{tag:"div",class:"oneAdress",children:[{tag:"div",class:"infotextInfos",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]},{tag:"div",class:"nameAdress",children:[{tag:"p",html:function(){return"<span>"+this.designation+"</span>&nbsp&nbsp<span class='distance'>"+this.formatDistance+"</span><br/><span class='relayAdress'>"+bl.delivery.formatAddress(this.address)+"</span>"}},{tag:"a",id:"${network}-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}","data-url":"/webapp/wcs/stores/servlet/BLAccountManageFavoriteRelayFormCmd",href:"#",class:"btnOrange",html:"CHOISIR"}]},{tag:"div",class:"accessMap",children:[{tag:"span",class:"accessMapSpan",html:"Plan d'acc&egrave;s et horaires"},{tag:"div",children:[{tag:"div",class:"collectAdressSelected",html:function(){return""}},{tag:"div",class:"map",html:"",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]}]},{tag:"div",class:"scheduleAdress",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]}]},favoriteStorePopinInUserAreaMobile={displayStores:[{tag:"div",children:function(){return json2html.transform(this.sites,favoriteStorePopinInUserAreaMobile.diplayStoreData)}}],diplayStoreData:[{tag:"div",class:"oneAdress",children:[{tag:"div",class:"infotextInfos",children:[{tag:"div",class:"infotextInfos",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]},{tag:"div",class:"nameAdress",children:[{tag:"p",html:function(){if(this.address&&this.address.zipCode){var displayedDistance="";return this.formatDistance&&(displayedDistance=""+this.formatDistance),"<span>"+this.designation+"&nbsp&nbsp</span><span class='distance'>"+displayedDistance+"</span>"}return""}},{tag:"a",id:"store-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}","data-url":"/webapp/wcs/stores/servlet/mUserRegistrationUpdate?action=editFavoriteStore",href:"#",class:"btnOrange changeFavStore",html:"CHOISIR"}]},{tag:"div",class:"accessMap",children:[{tag:"span",class:"accessMapSpan",html:"Plan d'acc&egrave;s et horaires"},{tag:"div",children:[{tag:"div",class:"collectAdressSelected",html:function(){return"<p>"+bl.delivery.formatAddress(this.address)+"</p>"}},{tag:"div",class:"map",html:"",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]}]},{tag:"div",class:"scheduleAdress",html:"<span>${storeHours}</span>"}]}]}]}]},favoriteStorePopinInUserArea={displayStores:[{tag:"h4",html:"Sélectionnez un magasin dans la liste"},{tag:"p",html:"${sites.length} magasins correspondent à votre recherche, <br>du plus proche au plus éloigné dans un rayon de 100 km"},{tag:"div",class:"center_part","data-userclick":"1",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,favoriteStorePopinInUserArea.diplayStoreData)}}]},{tag:"div",class:"right_part",children:[{tag:"div",children:[{tag:"span",class:"subtitle",html:"Magasin sélectionné :"},{tag:"h5",html:""},{tag:"p",class:"address",html:""},{tag:"span",class:"subtitle",html:"Horaires du magasin :"},{tag:"div",class:"time",html:""}]},{tag:"div",children:[{tag:"input",class:"submit_store_btn",type:"button","data-modal-url":"/webapp/wcs/stores/servlet/UserRegistrationUpdate?action=editFavoriteStore",value:"définir comme mon magasin favori",name:"submit"}]}]}],diplayStoreData:[{tag:"li",id:"store-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}",children:[{tag:"p",html:function(){if(this.address&&this.address.zipCode){var displayedDistance="";return this.formatDistance&&(displayedDistance="(env. "+this.formatDistance+")"),this.address.zipCode.substring(0,2)+" - "+this.designation+"<br>"+displayedDistance}return""}},{tag:"div",class:"data-address hidden",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"data-store-hours hidden",html:"${storeHours}"}]}]},favoriteStoreCarglass={displayStores:[{tag:"h4",html:"Sélectionnez un magasin dans la liste"},{tag:"p",html:"${sites.length} magasins correspondent à votre recherche, <br>du plus proche au plus éloigné dans un rayon de 100 km"},{tag:"div",class:"center_part","data-userclick":"1",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,favoriteStoreCarglass.diplayStoreData)}}]},{tag:"div",class:"right_part",children:[{tag:"div",children:[{tag:"span",class:"subtitle",html:"Magasin sélectionné :"},{tag:"h5",html:""},{tag:"p",class:"address",html:""},{tag:"span",class:"subtitle",html:"Horaires du magasin :"},{tag:"div",class:"time",html:""}]},{tag:"input",class:"submit_store_btn_carglass",type:"button","data-modal-url":"/webapp/wcs/stores/servlet/BLCarglassDeliveryCmd?deliveryType=store",value:"Choisir ce magasin",name:"submit"}]}],diplayStoreData:[{tag:"li",id:"store-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}",children:[{tag:"p",html:function(){if(this.address&&this.address.zipCode){var displayedDistance="";return this.formatDistance&&(displayedDistance="(env. "+this.formatDistance+")"),this.address.zipCode.substring(0,2)+" - "+this.designation+"<br>"+displayedDistance}return""}},{tag:"div",class:"data-address hidden",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"data-store-hours hidden",html:"${storeHours}"}]}]},pickUpSitePopinCarglass={displayPickUpSitePopinCarglass:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"mapframe_tunnel",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,pickUpSitePopinCarglass.displayPickUpSitesCarglass)}}]}]}],displayPickUpSitesCarglass:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){var typeLibelle="name-pickup relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle="name-pickup relay-name type-CHP"),"INP"==this.network&&(typeLibelle="name-pickup relay-name type-INP"),typeLibelle},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return"- "+this.formatDistance}},{tag:"span",class:"openedOrClosed horaireCarglass",html:"J&apos;affiche les horaires d&apos;ouverture du point relais"},{tag:"span",class:"adresse",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]},newPickUpSitesCheckOutPopin={displayPickUpSitesPopinInCheckout:[{tag:"div",class:"relai-map",children:[{tag:"div",class:"map",id:"map-relay"},{tag:"p",class:"test ${param.preferredNetwork}",html:function(){var carrier=$j("[data-tab='tab-1'].current").attr("data-carrier");return"CHP"===carrier?"Les produits sont conservés 7 jours en point relais après la date de livraison":"INP"===carrier||"INP_CHP"===carrier||"CHP_LOC"===carrier?"Les produits sont conservés 3 jours en point consigne après la date de livraison":"Les produits sont conservés 10 jours en point relais après la date de livraison"}}]},{tag:"form",id:"updatePickUp-form",action:"#",method:"post",children:[{tag:"div",class:"address-list",children:[{tag:"div",class:"text-right",children:[{tag:"label",for:"",html:"Trier par:"},{tag:"select",children:[{tag:"option",value:"",html:"Distance"}]}]},{tag:"div",class:"address-container",children:function(){return json2html.transform(this.sites,newPickUpSitesCheckOutPopin.displayPickUpSites)}},{tag:"div",class:"text-center",children:[{tag:"button",class:"btn btn-orange",html:"VALIDER"}]}]}]}],displayPickUpSites:[{tag:"address",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",class:function(){var available="name-pickup input-radio",typeLibelle=available+" relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle=available+" relay-name type-CHP"),"INP"==this.network&&(typeLibelle=available+" relay-name type-INP"),typeLibelle}},{tag:"div",class:"name",html:function(){return this.designation},children:[{tag:"span",class:"distance",html:function(){return" - "+this.formatDistance}}]},{tag:"div",class:"address-sites",html:function(){return bl.delivery.formatAddressForModalRelay(this.address)}},{tag:"div",class:function(){return"status "+this.openStateRelay+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"div",class:"delivery-bloc-info",children:[{tag:"button",class:"btn-close",type:"button"},{tag:"div",class:"table",children:[{tag:"div",id:"map-site-${address.location.lat}-${address.location.lon}",class:"cell cell-left"},{tag:"div",class:"cell cell-right",children:[{tag:"table",children:[{tag:"tbody",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<tr><td>Lundi</td><td>"+this.openingHoursByDay.Lundi+"</td></tr>"),this.openingHoursByDay.Mardi&&(horaire+="<tr><td>Mardi</td><td>"+this.openingHoursByDay.Mardi+"</td></tr>"),this.openingHoursByDay.Mercredi&&(horaire+="<tr><td>Mercredi</td><td>"+this.openingHoursByDay.Mercredi+"</td></tr>"),this.openingHoursByDay.Jeudi&&(horaire+="<tr><td>Jeudi</td><td>"+this.openingHoursByDay.Jeudi+"</td></tr>"),this.openingHoursByDay.Vendredi&&(horaire+="<tr><td>Vendredi</td><td>"+this.openingHoursByDay.Vendredi+"</td></tr>"),this.openingHoursByDay.Samedi&&(horaire+="<tr><td>Samedi</td><td>"+this.openingHoursByDay.Samedi+"</td></tr>"),this.openingHoursByDay.Dimanche&&(horaire+="<tr><td>Dimanche</td><td>"+this.openingHoursByDay.Dimanche+"</td</tr>")),horaire}}]}]}]}]}]}]},mobileTemplates={displayStorePickUpPage:[{tag:"div",class:"display-sites",html:function(){return json2html.transform(this.sites,mobileTemplates.storePickUp)}}],storePickUp:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},"data-site-id":"${code}",children:[{tag:"div",class:"storePickupTitle",children:[{tag:"h4",class:"cityName",html:"${designation}",children:[{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]},{tag:"p",class:function(){return""==bl.delivery.storeDrive(this)?"isDrive off":"isDrive"},html:function(){return bl.delivery.storeDrive(this)}}]},{tag:"div",class:"storePickupDetails",children:[{tag:"div",class:"storePickupAvailability",children:[{tag:"p",class:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getAvailabilityMobileData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantité disponible : "+this.stock+"</span>"),displayAvailability}}]},{tag:"div",class:"storePickupChooseButton",html:function(){if(void 0!==$j("#popinDeliveryStore")&&"true"==$j("#popinDeliveryStore").val())return"";if(0<$j("#deliveryPage").size())var urlSubmit="mBLMobileStoreUpdate?";else if(0<$j("#orderItemIdToUpdate").size())urlSubmit="mBLPickupInStoreOrderItemUpdate?";else urlSubmit="mBLPickupInStoreOrderItemAdd?";var orderItemToUpdateSplitted=null;if(0!=$j("#orderItemIdToUpdate").size()){var orderItemToUpdate=$j("#orderItemIdToUpdate").val();orderItemToUpdate=orderItemToUpdate.split(",");for(var i=0;i<orderItemToUpdate.length;i++)orderItemToUpdateSplitted+=orderItemToUpdate[i],i<=orderItemToUpdate.length-1&&(orderItemToUpdateSplitted+=",")}var urlParams="catalogId="+$j("#catalogId").val()+"&storeId="+$j("#storeId").val()+"&langId="+$j("#langId").val();orderItemToUpdateSplitted&&(urlParams+="&orderItemIdToUpdate="+orderItemToUpdateSplitted),0<$j("#catentryId").size()&&(urlParams+="&catEntryId="+$j("#catentryId").val()),0<$j("#orderId").size()&&(urlParams+="&orderId="+$j("#orderId").val()),0<$j("#numDeliveryPage").size()&&(urlParams+="&numDeliveryPage="+$j("#numDeliveryPage").val()),0<$j("#shipModeId").size()&&(urlParams+="&shipModeId="+$j("#shipModeId").val()),urlParams+="&siteId="+this.code+"&zipCode="+this.address.zipCode,urlSubmit+=urlParams+="&city="+encodeURIComponent(this.address.city)+"&favCodeMagasin="+this.code;var wordingButton="",styleButton="",conditions=!1;wordingButton=(conditions="true"==$j("#contextualisationForPopinStoreWording").val())?"Choisir":"Retirer en magasin",styleButton=conditions?"buttonChooseOrangeTunnelCommande":"buttonChooseOrange";var buttonDrive="<a href='javascript:void(0);' data-cart-url='"+urlSubmit+"&action=DRV' class='buttonChooseOrange buttonChooseOrangeBase x-addToMobileStore drive'>Retirer en drive</a>";return""==bl.delivery.storeDrive(this)&&(buttonDrive=""),'<a href="javascript:void(0);" data-cart-url=\''+urlSubmit+'&action=REM\' data-type-panier-test-ab="true" class="'+styleButton+' buttonChooseOrangeBase x-addToMobileStore REM">'+wordingButton+"</a>"+buttonDrive}}]},{tag:"div",class:"openingHours",html:function(){return json2html.transform(this,mobileTemplates.storePickUpDetails)}},{tag:"div",class:"map",children:[{tag:"div",class:"hours",html:function(){var horaire="";return this.openingHoursByDay&&(horaire+="<ul>",this.openingHoursByDay.Lundi?horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>":horaire+="<li><span class='left'>Lundi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mardi?horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>":horaire+="<li><span class='left'>Mardi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mercredi?horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>":horaire+="<li><span class='left'>Mercredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Jeudi?horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>":horaire+="<li><span class='left'>Jeudi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Vendredi?horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>":horaire+="<li><span class='left'>Vendredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Samedi?horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>":horaire+="<li><span class='left'>Samedi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Dimanche?horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>":horaire+="<li><span class='left'>Dimanche</span><span class='right'>Ferm&eacute;</span></li>",horaire+="</ul>"),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"address",children:[{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}]}],storePickUpDetails:[{tag:"p",html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}],displayStorePickUpPopin:[{tag:"form",html:function(){for(var html="",i=0;i<3;)void 0!==this.sites[i]&&""!==this.sites[i]&&(html+=json2html.transform(this.sites[i],mobileTemplates.storePickUpPopin)),i+=1;return html}}],storePickUpPopin:[{tag:"input",type:"radio",id:function(){return"storePickupType_"+this.network+"-"+this.code},name:"storePickupType"},{tag:"label",class:"white_block",for:function(){return"storePickupType_"+this.network+"-"+this.code},children:[{tag:"span",class:"line-1",children:[{tag:"span",class:"city",html:"${designation}"},{tag:"span",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]},{tag:"span",class:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!1);return void 0===availabilityData?"line-2 delivery-day no-available":"line-2 "+availabilityData.cssClass},html:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!0);return void 0===availabilityData?"Indisponible":availabilityData.formattedDate}},{tag:"span",class:"line-3",html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:"ctn-3",children:[{tag:"span",class:"left",html:function(){return"Lundi<br/>Mardi<br/>Mercredi<br/>Jeudi<br/>Vendredi<br/>Samedi<br/>Dimanche"}},{tag:"span",class:"right",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi?horaire+=this.openingHoursByDay.Lundi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Mardi?horaire+=this.openingHoursByDay.Mardi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Mercredi?horaire+=this.openingHoursByDay.Mercredi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Jeudi?horaire+=this.openingHoursByDay.Jeudi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Vendredi?horaire+=this.openingHoursByDay.Vendredi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Samedi?horaire+=this.openingHoursByDay.Samedi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Dimanche?horaire+=this.openingHoursByDay.Dimanche+"<br/>":horaire+="Ferm&eacute;<br/>"),horaire}},{tag:"div",class:"border"},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"span",class:"adress",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}],displayStoreAvailabilityPage:[{tag:"div",class:"display-sites",html:function(){return json2html.transform(this.sites,mobileTemplates.storePickUp)}}],storeAvailability:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"div",class:"storePickupTitle",children:[{tag:"h4",class:"cityName",html:"${designation}",children:[{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]}]},{tag:"div",class:"storePickupDetails",children:[{tag:"div",class:"storePickupAvailability",children:[{tag:"p",class:function(){var availabilityData=bl.delivery.getConsultMobileAvailabilityData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getConsultMobileAvailabilityData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantité disponible : "+this.stock+"</span>"),displayAvailability}}]},{tag:"div",class:"storePickupChooseButton",html:function(){var urlSubmit=null;urlSubmit=0<$j("#deliveryPage").size()?"mBLMobileStoreUpdate?":0<$j("#orderItemIdToUpdate").size()?"mBLPickupInStoreOrderItemUpdate?":"mBLPickupInStoreOrderItemAdd?";var orderItemToUpdateSplitted=null;if(0!=$j("#orderItemIdToUpdate").size()){var orderItemToUpdate=$j("#orderItemIdToUpdate").val();orderItemToUpdate=orderItemToUpdate.split(",");for(var i=0;i<orderItemToUpdate.length;i++)orderItemToUpdateSplitted+=orderItemToUpdate[i],i<=orderItemToUpdate.length-1&&(orderItemToUpdateSplitted+=",")}var urlParams="catalogId="+$j("#catalogId").val()+"&storeId="+$j("#storeId").val();return urlParams=urlParams+"&langId="+$j("#langId").val(),orderItemToUpdateSplitted&&(urlParams=urlParams+"&orderItemIdToUpdate="+orderItemToUpdateSplitted),0<$j("#catentryId").size()&&(urlParams=urlParams+"&catEntryId="+$j("#catentryId").val()),0<$j("#orderId").size()&&(urlParams=urlParams+"&orderId="+$j("#orderId").val()),0<$j("#numDeliveryPage").size()&&(urlParams=urlParams+"&numDeliveryPage="+$j("#numDeliveryPage").val()),0<$j("#shipModeId").size()&&(urlParams=urlParams+"&shipModeId="+$j("#shipModeId").val()),""==bl.delivery.storeDrive(this)?urlParams+="&action=REM":urlParams+="&action=DRV",'<a href="javascript:void(0);" data-cart-url='+(urlSubmit+=urlParams=(urlParams=urlParams+"&siteId="+this.code+"&zipCode="+this.address.zipCode)+"&city="+encodeURIComponent(this.address.city)+"&favCodeMagasin="+this.code)+' class="buttonChooseOrange buttonChooseOrangeBase buttonPickup x-addToMobileStore">Retirer en magasin</a>'}}]},{tag:"div",class:"openingHours",html:function(){return json2html.transform(this,mobileTemplates.storeAvailabilityDetails)}},{tag:"div",class:"map",children:[{tag:"div",class:"hours",html:function(){var horaire="";return this.openingHoursByDay&&(horaire+="<ul>",this.openingHoursByDay.Lundi?horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>":horaire+="<li><span class='left'>Lundi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mardi?horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>":horaire+="<li><span class='left'>Mardi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mercredi?horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>":horaire+="<li><span class='left'>Mercredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Jeudi?horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>":horaire+="<li><span class='left'>Jeudi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Vendredi?horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>":horaire+="<li><span class='left'>Vendredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Samedi?horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>":horaire+="<li><span class='left'>Samedi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Dimanche?horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>":horaire+="<li><span class='left'>Dimanche</span><span class='right'>Ferm&eacute;</span></li>",horaire+="</ul>"),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"address",children:[{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}]}],storeAvailabilityDetails:[{tag:"p",html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}],displayRelayPickUpPage:[{tag:"div",html:function(){return json2html.transform(this.sites,mobileTemplates.relayPickUp)}}],relayPickUp:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"h4",class:"cityName",children:[{tag:"p",html:"${designation}"}]},{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?"à "+this.formatDistance:""}},{tag:"div",class:"address",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"openingHours",children:[{tag:"p",class:"${network}",html:"J&apos;affiche le plan d&apos;accès et les horaires d&apos;ouverture"},{tag:"div",children:[{tag:"a",class:"buttonOrange",html:"Je choisis",href:function(){return $j("#urlPickupPointSelection").val()+"&shipModeId="+this.shipModeId+"&checkedId="+this.network+"-"+this.code}}]}]},{tag:"div",class:"map",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"hours",html:function(){if(null!=this.nextOpeningHour&&-1!=this.nextOpeningHour.indexOf("24h/24h"))return this.nextOpeningHour;var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<p><span>Lundi :</span>"+this.openingHoursByDay.Lundi+"</p>"),this.openingHoursByDay.Mardi&&(horaire+="<p><span>Mardi :</span>"+this.openingHoursByDay.Mardi+"</p>"),this.openingHoursByDay.Mercredi&&(horaire+="<p><span>Mercredi :</span>"+this.openingHoursByDay.Mercredi+"</p>"),this.openingHoursByDay.Jeudi&&(horaire+="<p><span>Jeudi :</span>"+this.openingHoursByDay.Jeudi+"</p>"),this.openingHoursByDay.Vendredi&&(horaire+="<p><span>Vendredi :</span>"+this.openingHoursByDay.Vendredi+"</p>"),this.openingHoursByDay.Samedi&&(horaire+="<p><span>Samedi :</span>"+this.openingHoursByDay.Samedi+"</p>"),this.openingHoursByDay.Dimanche&&(horaire+="<p><span>Dimanche :</span>"+this.openingHoursByDay.Dimanche+"</p>")),horaire}}]}]}],displayRelayCatalogPickUpPage:[{tag:"div",html:function(){return json2html.transform(this.sites,mobileTemplates.relayCatalogPickUp)}}],relayCatalogPickUp:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"h4",class:"cityName",children:[{tag:"p",html:"${designation}"}]},{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?"à "+this.formatDistance:""}},{tag:"div",class:"address",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"openingHours catalog",children:[{tag:"p",class:"${network}",html:"J&apos;affiche le plan d&apos;accès et les horaires d&apos;ouverture"}]},{tag:"div",class:"map",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"hours",html:function(){if(null!=this.nextOpeningHour&&-1!=this.nextOpeningHour.indexOf("24h/24h"))return this.nextOpeningHour;var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<p><span>Lundi :</span>"+this.openingHoursByDay.Lundi+"</p>"),this.openingHoursByDay.Mardi&&(horaire+="<p><span>Mardi :</span>"+this.openingHoursByDay.Mardi+"</p>"),this.openingHoursByDay.Mercredi&&(horaire+="<p><span>Mercredi :</span>"+this.openingHoursByDay.Mercredi+"</p>"),this.openingHoursByDay.Jeudi&&(horaire+="<p><span>Jeudi :</span>"+this.openingHoursByDay.Jeudi+"</p>"),this.openingHoursByDay.Vendredi&&(horaire+="<p><span>Vendredi :</span>"+this.openingHoursByDay.Vendredi+"</p>"),this.openingHoursByDay.Samedi&&(horaire+="<p><span>Samedi :</span>"+this.openingHoursByDay.Samedi+"</p>"),this.openingHoursByDay.Dimanche&&(horaire+="<p><span>Dimanche :</span>"+this.openingHoursByDay.Dimanche+"</p>")),horaire}}]}]}],displayExpressRelayPickUpPopin:[{tag:"div",id:function(){return this.sites[0].network+"-"+this.sites[0].code},class:"display-express-first-site",html:function(){return json2html.transform(this.sites[0],mobileTemplates.displayRelayPickUpPopin)}}],displayStandardRelayPickUpPopin:[{tag:"div",id:function(){return this.sites[0].network+"-"+this.sites[0].code},class:"display-standard-first-site",html:function(){return json2html.transform(this.sites[0],mobileTemplates.displayRelayPickUpPopin)}}],displayLockersPickUpPopin:[{tag:"div",id:function(){return this.sites[0].network+"-"+this.sites[0].code},class:"display-lockers-first-site",html:function(){return json2html.transform(this.sites[0],mobileTemplates.displayRelayPickUpPopin)}}],displayRelayPickUpPopin:[{tag:"span",html:"${designation}"},{tag:"span",html:function(){return" - "+this.formatDistance+"<br/>"}},{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}],displayStorePickUpPageCarglass:[{tag:"div",class:"display-sites",html:function(){return json2html.transform(this.sites,mobileTemplates.storePickUpCarglass)}}],storePickUpCarglass:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"div",class:"storePickupTitle",children:[{tag:"h4",class:"cityName",html:"${designation}",children:[{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]}]},{tag:"div",class:"storePickupDetails",children:[{tag:"div",class:"storePickupAvailability",children:[{tag:"p",class:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getAvailabilityMobileData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantité disponible : "+this.stock+"</span>"),displayAvailability}}]},{tag:"div",class:"storePickupChooseButton",html:function(){var urlSubmit="mCarglassValidateCmd?",voucherCode=$j("#voucherCode").attr("value"),urlParams="catalogId="+$j("#catalogId").val()+"&storeId="+$j("#storeId").val();return"<a href="+(urlSubmit+=urlParams=(urlParams=urlParams+"&langId="+$j("#langId").val())+"&storeCode="+this.code+"&voucherCode="+voucherCode+"&deliveryType=store")+' class="buttonChooseOrange buttonChooseOrangeBase x-addToMobileStore">Je choisis</a>'}}]},{tag:"div",class:"openingHours",html:function(){return json2html.transform(this,mobileTemplates.storeAvailabilityDetails)}},{tag:"div",class:"map",children:[{tag:"div",class:"hours",html:function(){var horaire="";return this.openingHoursByDay&&(horaire+="<ul>",this.openingHoursByDay.Lundi?horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>":horaire+="<li><span class='left'>Lundi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mardi?horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>":horaire+="<li><span class='left'>Mardi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mercredi?horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>":horaire+="<li><span class='left'>Mercredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Jeudi?horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>":horaire+="<li><span class='left'>Jeudi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Vendredi?horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>":horaire+="<li><span class='left'>Vendredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Samedi?horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>":horaire+="<li><span class='left'>Samedi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Dimanche?horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>":horaire+="<li><span class='left'>Dimanche</span><span class='right'>Ferm&eacute;</span></li>",horaire+="</ul>"),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"address",children:[{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}]}],storePickUpDetailsCarglass:[{tag:"p",class:"",children:[{tag:"span",html:"J&apos;affiche les horaires d&apos;ouverture et coordonn&eacute;es du magasin"}]}],displayRelayPickUpPageCarglass:[{tag:"div",html:function(){return json2html.transform(this.sites,mobileTemplates.relayPickUpCarglass)}}],relayPickUpCarglass:[{tag:"div",class:function(){return"white_block"},children:[{tag:"h4",class:"cityName",children:[{tag:"p",html:"${designation}"}]},{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?"à "+this.formatDistance:""}},{tag:"div",class:"address",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"openingHours",children:[{tag:"p",class:"${network}",html:"J&apos;affiche le plan d&apos;accès et les horaires d&apos;ouverture"},{tag:"div",children:[{tag:"a",class:"buttonOrange",html:"Je choisis",href:function(){return $j("#urlPickupPointSelection").val()+"&shipModeId="+this.shipModeId+"&relayId="+this.network+"-"+this.code}}]}]},{tag:"div",class:"map",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"hours",html:function(){if(null!=this.nextOpeningHour&&-1!=this.nextOpeningHour.indexOf("24h/24h"))return this.nextOpeningHour;var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<p><span>Lundi :</span>"+this.openingHoursByDay.Lundi+"</p>"),this.openingHoursByDay.Mardi&&(horaire+="<p><span>Mardi :</span>"+this.openingHoursByDay.Mardi+"</p>"),this.openingHoursByDay.Mercredi&&(horaire+="<p><span>Mercredi :</span>"+this.openingHoursByDay.Mercredi+"</p>"),this.openingHoursByDay.Jeudi&&(horaire+="<p><span>Jeudi :</span>"+this.openingHoursByDay.Jeudi+"</p>"),this.openingHoursByDay.Vendredi&&(horaire+="<p><span>Vendredi :</span>"+this.openingHoursByDay.Vendredi+"</p>"),this.openingHoursByDay.Samedi&&(horaire+="<p><span>Samedi :</span>"+this.openingHoursByDay.Samedi+"</p>"),this.openingHoursByDay.Dimanche&&(horaire+="<p><span>Dimanche :</span>"+this.openingHoursByDay.Dimanche+"</p>")),horaire}}]}]}],displayRelaySelectPickUpPage:[{tag:"label",html:"Trier par:"},{tag:"select",id:"",children:[{tag:"option",value:"",html:"Distance"}]},{tag:"div",class:"address-container",children:function(){return json2html.transform(this.sites,mobileTemplates.relaySelectPickUp)}}],relaySelectPickUp:[{tag:"address",class:"white_block",children:[{tag:"input",id:"${network}-${code}",name:"checkedId",value:"${network}-${code}",type:"radio"},{tag:"label",for:"${network}-${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",class:"input-radio"},{tag:"div",class:"name",html:function(){return this.designation},children:[{tag:"span",class:"distance",html:function(){return" - "+this.formatDistance}}]},{tag:"div",class:"address-sites",html:function(){return bl.delivery.formatAddressForModalRelay(this.address)}},{tag:"div",class:function(){return"status "+this.openStateRelay+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"div",class:"delivery-bloc-info",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"table",children:[{tag:"table",children:[{tag:"tbody",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<tr><td>Lundi</td><td>"+this.openingHoursByDay.Lundi+"</td></tr>"),this.openingHoursByDay.Mardi&&(horaire+="<tr><td>Mardi</td><td>"+this.openingHoursByDay.Mardi+"</td></tr>"),this.openingHoursByDay.Mercredi&&(horaire+="<tr><td>Mercredi</td><td>"+this.openingHoursByDay.Mercredi+"</td></tr>"),this.openingHoursByDay.Jeudi&&(horaire+="<tr><td>Jeudi</td><td>"+this.openingHoursByDay.Jeudi+"</td></tr>"),this.openingHoursByDay.Vendredi&&(horaire+="<tr><td>Vendredi</td><td>"+this.openingHoursByDay.Vendredi+"</td></tr>"),this.openingHoursByDay.Samedi&&(horaire+="<tr><td>Samedi</td><td>"+this.openingHoursByDay.Samedi+"</td></tr>"),this.openingHoursByDay.Dimanche&&(horaire+="<tr><td>Dimanche</td><td>"+this.openingHoursByDay.Dimanche+"</td</tr>")),horaire}}]}]}]}]}]};function addiOSMetaData(){if(0===$j("meta[name=apple-itunes-app]").length){$j("head").append("\n\x3c!-- START iOS META --\x3e<meta name='apple-itunes-app' content='app-id=401920975, affiliate-data=at=1001lnWM&ct=smart_app_banner_bcom_ios&pt=447572'>\x3c!-- END --\x3e")}}function addAndroidManifestFile(){if(0===$j("link[rel=manifest]").length){$j("head").append("\n\x3c!-- START Diving Deep Android link manifest--\x3e<link rel='manifest' href='/webapp/wcs/stores/BoulangerStg/statics/plugins/json/webapp_android_manifest.json'>\x3c!-- END --\x3e")}}"undefined"==typeof bl&&(bl={}),void 0===bl.google&&(bl.google={}),$j.extend(bl.google,{isLoaded:function(){return"undefined"!=typeof google&&void 0!==google.maps},initAPI:function(callbackName,callback,arg1,arg2){var logger=new BoulangerLogData;if("undefined"==typeof google||void 0===google.maps){var url=bl.apiGoogleMaps+"&key="+bl.googleMapApiKey+"&sensor=false";logger.add("API Google","Chargement des APIs Google:"+url),$j.getScript(url).done(function(script,textStatus){logger.add("API Google","APIs chargé"),void 0!==callback&&(logger.add("API Google","Appel de la methode callback:"+callbackName),void 0===arg1?callback():void 0!==arg2?(logger.add("API Google","Avec les paramètres:"+arg1+"-"+arg2),callback.call(this,arg1,arg2)):(logger.add("API Google","Avec le paramètre:"+arg1),callback.call(this,arg1))),logger.log()}).fail(function(jqxhr,settings,exception){logger.add("API Google","Une erreur est intevenue lors du chargement des APIs"),logger.log()})}else logger.add("API Google","APIs Google OK"),logger.log()},initAPILivraison:function(callback1,callback2Name,callback2,arg1,arg2){var logger=new BoulangerLogData;if("undefined"==typeof google||void 0===google.maps){var url=bl.apiGoogleMaps+"&key="+bl.googleMapApiKey+"&sensor=false";logger.add("API Google","Chargement des APIs Google:"+url),$j.getScript(url).done(function(script,textStatus){logger.add("API Google","APIs chargé"),void 0!==callback2&&(logger.add("API Google","Appel de la methode callback:"+callback2Name),void 0===arg1?callback2():void 0!==arg2?(logger.add("API Google","Avec les paramètres:"+arg1+"-"+arg2),callback2.call(this,arg1,arg2)):(logger.add("API Google","Avec le paramètre:"+arg1),callback2.call(this,arg1))),logger.log(),void 0!==callback1&&callback1()}).fail(function(jqxhr,settings,exception){logger.add("API Google","Une erreur est intevenue lors du chargement des APIs"),logger.log()})}else logger.add("API Google","APIs Google OK"),logger.log()}}),$j(document).ready(function(){"true"===bl.showSmartAppBannerAndroid&&addAndroidManifestFile(),"true"===bl.showSmartAppBanneriOS&&addiOSMetaData()});