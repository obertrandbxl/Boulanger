if(function($,undefined){var orig,removeData,uuid=0,runiqueId=/^ui-id-\d+$/;function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(mapName=(map=element.parentNode).name,!(!element.href||!mapName||"map"!==map.nodeName.toLowerCase())&&(!!(img=$("img[usemap=#"+mapName+"]")[0])&&visible(img))):(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName&&element.href||isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length}$.ui=$.ui||{},$.extend($.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({focus:(orig=$.fn.focus,function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):orig.apply(this,arguments)}),scrollParent:function(){var scrollParent;return scrollParent=$.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(void 0!==zIndex)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(("absolute"===(position=elem.css("position"))||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})},removeUniqueId:function(){return this.each(function(){runiqueId.test(this.id)&&$(this).removeAttr("id")})}}),$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||0<=tabIndex)&&focusable(element,!isTabIndexNaN)}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)}),size}$.fn["inner"+name]=function(size){return void 0===size?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.fn.addBack||($.fn.addBack=function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}),$("<a>").data("a-b","a").removeData("a-b").data("a-b")&&($.fn.removeData=(removeData=$.fn.removeData,function(key){return arguments.length?removeData.call(this,$.camelCase(key)):removeData.call(this)})),$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),$.support.selectstart="onselectstart"in document.createElement("div"),$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args){var i,set=instance.plugins[name];if(set&&instance.element[0].parentNode&&11!==instance.element[0].parentNode.nodeType)for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}},hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var has,scroll=a&&"left"===a?"scrollLeft":"scrollTop";return 0<el[scroll]||(el[scroll]=1,has=0<el[scroll],el[scroll]=0,has)}})}(jQuery),function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var elem,i=0;null!=(elem=elems[i]);i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)},$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){if(!this._createWidget)return new constructor(options,element);arguments.length&&this._createWidget(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),(basePrototype=new base).options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){var _super,_superApply;$.isFunction(value)?proxiedPrototype[prop]=(_super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)},function(){var returnValue,__super=this._super,__superApply=this._superApply;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}):proxiedPrototype[prop]=value}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor&&basePrototype.widgetEventPrefix||name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor)},$.widget.extend=function(target){for(var key,value,input=slice.call(arguments,1),inputIndex=0,inputLength=input.length;inputIndex<inputLength;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&void 0!==value&&($.isPlainObject(value)?target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value):target[key]=value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options,isMethodCall?this.each(function(){var methodValue,instance=$.data(this,fullName);return instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?(methodValue=instance[options].apply(instance,args))!==instance&&void 0!==methodValue?(returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1):void 0:$.error("no such method '"+options+"' for "+name+" widget instance"):$.error("cannot call methods on "+name+" prior to initialization; attempted to call method '"+options+"'")}):this.each(function(){var instance=$.data(this,fullName);instance?instance.option(options||{})._init():$.data(this,fullName,new object(options,this))}),returnValue}},$.Widget=function(){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetFullName,this),this._on(!0,this.element,{remove:function(event){event.target===element&&this.destroy()}}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var parts,curOption,i,options=key;if(0===arguments.length)return $.widget.extend({},this.options);if("string"==typeof key)if(options={},key=(parts=key.split(".")).shift(),parts.length){for(curOption=options[key]=$.widget.extend({},this.options[key]),i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];if(key=parts.pop(),1===arguments.length)return void 0===curOption[key]?null:curOption[key];curOption[key]=value}else{if(1===arguments.length)return void 0===this.options[key]?null:this.options[key];options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;"boolean"!=typeof suppressDisabledCheck&&(handlers=element,element=suppressDisabledCheck,suppressDisabledCheck=!1),handlers?(element=delegateElement=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element,delegateElement=this.widget()),$.each(handlers,function(event,handler){function handlerProxy(){if(suppressDisabledCheck||!0!==instance.options.disabled&&!$(this).hasClass("ui-state-disabled"))return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)}"string"!=typeof handler&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?delegateElement.delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){var instance=this;return setTimeout(function handlerProxy(){return("string"==typeof handler?instance[handler]:handler).apply(instance,arguments)},delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];if(data=data||{},(event=$.Event(event)).type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&!1===callback.apply(this.element[0],[event].concat(data))||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){"string"==typeof options&&(options={effect:options});var hasOptions,effectName=options?!0===options||"number"==typeof options?defaultEffect:options.effect||defaultEffect:method;"number"==typeof(options=options||{})&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&$.effects.effect[effectName]?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}})}(jQuery),function($,undefined){$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}$.position={scrollbarWidth:function(){if(void 0!==cachedScrollbarWidth)return cachedScrollbarWidth;var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];return $("body").append(div),w1=innerDiv.offsetWidth,div.css("overflow","scroll"),w1===(w2=innerDiv.offsetWidth)&&(w2=div[0].clientWidth),div.remove(),cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX="scroll"===overflowX||"auto"===overflowX&&within.width<within.element[0].scrollWidth;return{width:"scroll"===overflowY||"auto"===overflowY&&within.height<within.element[0].scrollHeight?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,isDocument:!!withinElement[0]&&9===withinElement[0].nodeType,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()}}},$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};return dimensions=function getDimensions(elem){var raw=elem[0];return 9===raw.nodeType?{width:elem.width(),height:elem.height(),offset:{top:0,left:0}}:$.isWindow(raw)?{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}}:raw.preventDefault?{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}:{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}(target),target[0].preventDefault&&(options.at="left top"),targetWidth=dimensions.width,targetHeight=dimensions.height,targetOffset=dimensions.offset,basePosition=$.extend({},targetOffset),$.each(["my","at"],function(){var horizontalOffset,verticalOffset,pos=(options[this]||"").split(" ");1===pos.length&&(pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]),pos[0]=rhorizontal.test(pos[0])?pos[0]:"center",pos[1]=rvertical.test(pos[1])?pos[1]:"center",horizontalOffset=roffset.exec(pos[0]),verticalOffset=roffset.exec(pos[1]),offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0],options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]}),1===collision.length&&(collision[1]=collision[0]),"right"===options.at[0]?basePosition.left+=targetWidth:"center"===options.at[0]&&(basePosition.left+=targetWidth/2),"bottom"===options.at[1]?basePosition.top+=targetHeight:"center"===options.at[1]&&(basePosition.top+=targetHeight/2),atOffset=getOffsets(offsets.at,targetWidth,targetHeight),basePosition.left+=atOffset[0],basePosition.top+=atOffset[1],this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());"right"===options.my[0]?position.left-=elemWidth:"center"===options.my[0]&&(position.left-=elemWidth/2),"bottom"===options.my[1]?position.top-=elemHeight:"center"===options.my[1]&&(position.top-=elemHeight/2),position.left+=myOffset[0],position.top+=myOffset[1],$.support.offsetFractions||(position.left=round(position.left),position.top=round(position.top)),collisionPosition={marginLeft:marginLeft,marginTop:marginTop},$.each(["left","top"],function(i,dir){$.ui.position[collision[i]]&&$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}),options.using&&(using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":0<left?"right":"center",vertical:bottom<0?"top":0<top?"bottom":"middle"};targetWidth<elemWidth&&abs(left+right)<targetWidth&&(feedback.horizontal="center"),targetHeight<elemHeight&&abs(top+bottom)<targetHeight&&(feedback.vertical="middle"),max(abs(left),abs(right))>max(abs(top),abs(bottom))?feedback.important="horizontal":feedback.important="vertical",options.using.call(this,props,feedback)}),elem.offset($.extend(position,{using:using}))})},$.ui.position={fit:{left:function(position,data){var newOverRight,within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset;data.collisionWidth>outerWidth?0<overLeft&&overRight<=0?(newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset,position.left+=overLeft-newOverRight):position.left=0<overRight&&overLeft<=0?withinOffset:overRight<overLeft?withinOffset+outerWidth-data.collisionWidth:withinOffset:0<overLeft?position.left+=overLeft:0<overRight?position.left-=overRight:position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var newOverBottom,within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset;data.collisionHeight>outerHeight?0<overTop&&overBottom<=0?(newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset,position.top+=overTop-newOverBottom):position.top=0<overBottom&&overTop<=0?withinOffset:overBottom<overTop?withinOffset+outerHeight-data.collisionHeight:withinOffset:0<overTop?position.top+=overTop:0<overBottom?position.top-=overBottom:position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var newOverRight,newOverLeft,within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset="left"===data.my[0]?-data.elemWidth:"right"===data.my[0]?data.elemWidth:0,atOffset="left"===data.at[0]?data.targetWidth:"right"===data.at[0]?-data.targetWidth:0,offset=-2*data.offset[0];overLeft<0?((newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset)<0||newOverRight<abs(overLeft))&&(position.left+=myOffset+atOffset+offset):0<overRight&&(0<(newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft)||abs(newOverLeft)<overRight)&&(position.left+=myOffset+atOffset+offset)},top:function(position,data){var newOverTop,newOverBottom,within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,myOffset="top"===data.my[1]?-data.elemHeight:"bottom"===data.my[1]?data.elemHeight:0,atOffset="top"===data.at[1]?data.targetHeight:"bottom"===data.at[1]?-data.targetHeight:0,offset=-2*data.offset[1];overTop<0?(newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset,position.top+myOffset+atOffset+offset>overTop&&(newOverBottom<0||newOverBottom<abs(overTop))&&(position.top+=myOffset+atOffset+offset)):0<overBottom&&(newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop,position.top+myOffset+atOffset+offset>overBottom&&(0<newOverTop||abs(newOverTop)<overBottom)&&(position.top+=myOffset+atOffset+offset))}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments),$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments),$.ui.position.fit.top.apply(this,arguments)}}},function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");for(i in testElement=document.createElement(body?"div":"body"),testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},body&&$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"}),testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div),(testElementParent=body||document.documentElement).insertBefore(testElement,testElementParent.firstChild),div.style.cssText="position: absolute; left: 10.7432222px;",offsetLeft=$(div).offset().left,$.support.offsetFractions=10<offsetLeft&&offsetLeft<11,testElement.innerHTML="",testElementParent.removeChild(testElement)}()}(jQuery),function($,undefined){$.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,$.proxy(function(event){this.options.disabled&&event.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(event){event.preventDefault()},"click .ui-state-disabled > a":function(event){event.preventDefault()},"click .ui-menu-item:has(a)":function(event){var target=$(event.target).closest(".ui-menu-item");!this.mouseHandled&&target.not(".ui-state-disabled").length&&(this.select(event),event.isPropagationStopped()||(this.mouseHandled=!0),target.has(".ui-menu").length?this.expand(event):!this.element.is(":focus")&&$(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(event,target)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.children(".ui-menu-item").eq(0);keepActiveItem||this.focus(event,item)},blur:function(event){this._delay(function(){$.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(event)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(event){$(event.target).closest(".ui-menu").length||this.collapseAll(event),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);elem.data("ui-menu-submenu-carat")&&elem.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(event){var match,prev,character,skip,regex,preventDefault=!0;function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(event);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=!1,prev=this.previousFilter||"",character=String.fromCharCode(event.keyCode),skip=!1,clearTimeout(this.filterTimer),character===prev?skip=!0:character=prev+character,regex=new RegExp("^"+escape(character),"i"),match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())}),(match=skip&&-1!==match.index(this.active.next())?this.active.nextAll(".ui-menu-item"):match).length||(character=String.fromCharCode(event.keyCode),regex=new RegExp("^"+escape(character),"i"),match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())})),match.length?(this.focus(event,match),1<match.length?(this.previousFilter=character,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}preventDefault&&event.preventDefault()},_activate:function(event){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(event):this.select(event))},refresh:function(){var menus,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.prev("a"),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",!0);item.attr("aria-haspopup","true").prepend(submenuCarat),menu.attr("aria-labelledby",item.attr("id"))}),(menus=submenus.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);/[^\-\u2014\u2013\s]/.test(item.text())||item.addClass("ui-widget-content ui-menu-divider")}),menus.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!$.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(key,value){"icons"===key&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu),this._super(key,value)},focus:function(event,item){var nested,focused;this.blur(event,event&&"focus"===event.type),this._scrollIntoView(item),this.active=item.first(),focused=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",focused.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),event&&"keydown"===event.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(nested=item.children(".ui-menu")).length&&event&&/^mouse/.test(event.type)&&this._startOpening(nested),this.activeMenu=item.parent(),this._trigger("focus",event,{item:item})},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;this._hasScroll()&&(borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0,paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0,offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop,scroll=this.activeMenu.scrollTop(),elementHeight=this.activeMenu.height(),itemHeight=item.height(),offset<0?this.activeMenu.scrollTop(scroll+offset):elementHeight<offset+itemHeight&&this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight))},blur:function(event,fromFocus){fromFocus||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",event,{item:this.active}))},_startOpening:function(submenu){clearTimeout(this.timer),"true"===submenu.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(submenu)},this.delay))},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true"),submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position)},collapseAll:function(event,all){clearTimeout(this.timer),this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));currentMenu.length||(currentMenu=this.element),this._close(currentMenu),this.blur(event),this.activeMenu=currentMenu},this.delay)},_close:function(startMenu){startMenu||(startMenu=this.active?this.active.parent():this.element),startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);newItem&&newItem.length&&(this._close(),this.focus(event,newItem))},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();newItem&&newItem.length&&(this._open(newItem.parent()),this._delay(function(){this.focus(event,newItem)}))},next:function(event){this._move("next","first",event)},previous:function(event){this._move("prev","last",event)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(direction,filter,event){var next;this.active&&(next="first"===direction||"last"===direction?this.active["first"===direction?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[direction+"All"](".ui-menu-item").eq(0)),next&&next.length&&this.active||(next=this.activeMenu.children(".ui-menu-item")[filter]()),this.focus(event,next)},nextPage:function(event){var item,base,height;this.active?this.isLastItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(item=$(this)).offset().top-base-height<0}),this.focus(event,item)):this.focus(event,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(event)},previousPage:function(event){var item,base,height;this.active?this.isFirstItem()||(this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(item=$(this)).offset().top-base+height}),this.focus(event,item)):this.focus(event,this.activeMenu.children(".ui-menu-item").first())):this.next(event)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(event,!0),this._trigger("select",event,ui)}})}(jQuery),function($,undefined){$.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea="textarea"===nodeName,isInput="input"===nodeName;this.isMultiLine=!!isTextarea||!isInput&&this.element.prop("isContentEditable"),this.valueMethod=this.element[isTextarea||isInput?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly"))suppressKeyPressRepeat=suppressInput=suppressKeyPress=!0;else{suppressKeyPressRepeat=suppressInput=suppressKeyPress=!1;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=!0,this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=!0,this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=!0,this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=!0,this._keyEvent("next",event);break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:this.menu.active&&(suppressKeyPress=!0,event.preventDefault(),this.menu.select(event));break;case keyCode.TAB:this.menu.active&&this.menu.select(event);break;case keyCode.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(event),event.preventDefault());break;default:suppressKeyPressRepeat=!0,this._searchTimeout(event)}}},keypress:function(event){if(suppressKeyPress)return suppressKeyPress=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||event.preventDefault());if(!suppressKeyPressRepeat){var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event)}}},input:function(event){if(suppressInput)return suppressInput=!1,void event.preventDefault();this._searchTimeout(event)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(event){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(event),this._change(event))}}),this._initSource(),this.menu=$("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(event){event.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var menuElement=this.menu.element[0];$(event.target).closest(".ui-menu-item").length||this._delay(function(){var that=this;this.document.one("mousedown",function(event){event.target===that.element[0]||event.target===menuElement||$.contains(menuElement,event.target)||that.close()})})},menufocus:function(event,ui){if(this.isNewMenu&&(this.isNewMenu=!1,event.originalEvent&&/^mouse/.test(event.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent)});var item=ui.item.data("ui-autocomplete-item");!1!==this._trigger("focus",event,{item:item})?event.originalEvent&&/^key/.test(event.originalEvent.type)&&this._value(item.value):this.liveRegion.text(item.value)},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=previous,this._delay(function(){this.previous=previous,this.selectedItem=item})),!1!==this._trigger("select",event,{item:item})&&this._value(item.value),this.term=this._value(),this.close(event),this.selectedItem=item}}),this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(key,value){this._super(key,value),"source"===key&&this._initSource(),"appendTo"===key&&this.menu.element.appendTo(this._appendTo()),"disabled"===key&&value&&this.xhr&&this.xhr.abort()},_appendTo:function(){var element=this.options.appendTo;return element&&(element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0)),element||(element=this.element.closest(".ui-front")),element.length||(element=this.document[0].body),element},_initSource:function(){var array,url,that=this;$.isArray(this.options.source)?(array=this.options.source,this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term))}):"string"==typeof this.options.source?(url=this.options.source,this.source=function(request,response){that.xhr&&that.xhr.abort(),that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data)},error:function(){response([])}})}):this.source=this.options.source},_searchTimeout:function(event){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,event))},this.options.delay)},search:function(value,event){return value=null!=value?value:this._value(),this.term=this._value(),value.length<this.options.minLength?this.close(event):!1!==this._trigger("search",event)?this._search(value):void 0},_search:function(value){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:value},this._response())},_response:function(){var index=++this.requestIndex;return $.proxy(function(content){index===this.requestIndex&&this.__response(content),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(content){content&&(content=this._normalize(content)),this._trigger("response",null,{content:content}),!this.options.disabled&&content&&content.length&&!this.cancelSearch?(this._suggest(content),this._trigger("open")):this._close()},close:function(event){this.cancelSearch=!0,this._close(event)},_close:function(event){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",event))},_change:function(event){this.previous!==this._value()&&this._trigger("change",event,{item:this.selectedItem})},_normalize:function(items){return items.length&&items[0].label&&items[0].value?items:$.map(items,function(item){return"string"==typeof item?{label:item,value:item}:$.extend({label:item.label||item.value,value:item.value||item.label},item)})},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items),this.isNewMenu=!0,this.menu.refresh(),ul.show(),this._resizeMenu(),ul.position($.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item)})},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item)},_renderItem:function(ul,item){return $("<li>").append($("<a>").text(item.label)).appendTo(ul)},_move:function(direction,event){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)?(this._value(this.term),void this.menu.blur()):void this.menu[direction](event);this.search(null,event)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(keyEvent,event){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(keyEvent,event),event.preventDefault())}}),$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value)})}}),$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(1<amount?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(content){var message;this._superApply(arguments),this.options.disabled||this.cancelSearch||(message=content&&content.length?this.options.messages.results(content.length):this.options.messages.noResults,this.liveRegion.text(message))}})}(jQuery),void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(e,t,n){function r(n){var r=t.console;i[n]||(i[n]=!0,e.migrateWarnings.push(n),r&&r.warn&&!e.migrateMute&&(r.warn("JQMIGRATE: "+n),e.migrateTrace&&r.trace&&r.trace()))}function a(t,a,i,o){if(Object.defineProperty)try{return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){return r(o),i},set:function(e){r(o),i=e}}),n}catch(s){}e._definePropertyBroken=!0,t[a]=i}var i={};e.migrateWarnings=[],!e.migrateMute&&t.console&&t.console.log&&t.console.log("JQMIGRATE: Logging is active"),e.migrateTrace===n&&(e.migrateTrace=!0),e.migrateReset=function(){i={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o=e("<input/>",{size:1}).attr("size")&&e.attrFn,s=e.attr,u=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},c=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},l=/^(?:input|button)$/i,d=/^[238]$/,p=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f=/^(?:checked|selected)$/i;a(e,"attrFn",o||{},"jQuery.attrFn is deprecated"),e.attr=function(t,a,i,u){var c=a.toLowerCase(),g=t&&t.nodeType;return u&&(s.length<4&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!d.test(g)&&(o?a in o:e.isFunction(e.fn[a])))?e(t)[a](i):("type"===a&&i!==n&&l.test(t.nodeName)&&t.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[c]&&p.test(c)&&(e.attrHooks[c]={get:function(t,r){var a,i=e.prop(t,r);return!0===i||"boolean"!=typeof i&&(a=t.getAttributeNode(r))&&!1!==a.nodeValue?r.toLowerCase():n},set:function(t,n,r){var a;return!1===n?e.removeAttr(t,r):((a=e.propFix[r]||r)in t&&(t[a]=!0),t.setAttribute(r,r.toLowerCase())),r}},f.test(c)&&r("jQuery.fn.attr('"+c+"') may use property instead of attribute")),s.call(e,t,a,i))},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return"button"===n?u.apply(this,arguments):("input"!==n&&"option"!==n&&r("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var a=(e.nodeName||"").toLowerCase();return"button"===a?c.apply(this,arguments):("input"!==a&&"option"!==a&&r("jQuery.fn.attr('value', val) no longer sets properties"),e.value=t,n)}};var g,h,v=e.fn.init,m=e.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;e.fn.init=function(t,n,a){var i;return t&&"string"==typeof t&&!e.isPlainObject(n)&&(i=y.exec(e.trim(t)))&&i[0]&&("<"!==t.charAt(0)&&r("$(html) HTML strings must start with '<' character"),i[3]&&r("$(html) HTML text after last tag is ignored"),"#"===i[0].charAt(0)&&(r("HTML string cannot start with a '#' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&(n=n.context),e.parseHTML)?v.call(this,e.parseHTML(i[2],n,!0),n,a):v.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return e||null===e?m.apply(this,arguments):(r("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(h={},(g=e.uaMatch(navigator.userAgent)).browser&&(h[g.browser]=!0,h.version=g.version),h.chrome?h.webkit=!0:h.webkit&&(h.safari=!0),e.browser=h),a(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,((t.fn=t.prototype=this()).constructor=t).sub=this.sub,t.fn.init=function(r,a){return a&&a instanceof e&&!(a instanceof t)&&(a=t(a)),e.fn.init.call(this,r,a,n)},t.fn.init.prototype=t.fn;var n=t(document);return r("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var b=e.fn.data;e.fn.data=function(t){var a,i,o=this[0];return!o||"events"!==t||1!==arguments.length||(a=e.data(o,t),i=e._data(o,t),a!==n&&a!==i||i===n)?b.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),i)};var j=/\/(java|ecma)script/i,w=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},e.clean||(e.clean=function(t,a,i,o){a=(a=!(a=a||document).nodeType&&a[0]||a).ownerDocument||a,r("jQuery.clean() is deprecated");var s,u,c,l,d=[];if(e.merge(d,e.buildFragment(t,a).childNodes),i)for(c=function(e){return!e.type||j.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):n},s=0;null!=(u=d[s]);s++)e.nodeName(u,"script")&&c(u)||(i.appendChild(u),u.getElementsByTagName!==n&&(l=e.grep(e.merge([],u.getElementsByTagName("script")),c),d.splice.apply(d,[s+1,0].concat(l)),s+=l.length));return d});var Q=e.event.add,x=e.event.remove,k=e.event.trigger,N=e.fn.toggle,T=e.fn.live,M=e.fn.die,S="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",C=RegExp("\\b(?:"+S+")\\b"),H=/(?:^|\s)hover(\.\S+|)\b/,A=function(t){return"string"!=typeof t||e.event.special.hover?t:(H.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(H,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&a(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,a,i){e!==document&&C.test(t)&&r("AJAX events should be attached to document: "+t),Q.call(this,e,A(t||""),n,a,i)},e.event.remove=function(e,t,n,r,a){x.call(this,e,A(t)||"",n,r,a)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return N.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var a=arguments,i=t.guid||e.guid++,o=0,s=function(n){var r=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),a[r].apply(this,arguments)||!1};for(s.guid=i;a.length>o;)a[o++].guid=i;return this.click(s)},e.fn.live=function(t,n,a){return r("jQuery.fn.live() is deprecated"),T?T.apply(this,arguments):(e(this.context).on(t,this.selector,n,a),this)},e.fn.die=function(t,n){return r("jQuery.fn.die() is deprecated"),M?M.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,a){return n||C.test(e)||r("Global events are undocumented and deprecated"),k.call(this,e,t,n||document,a)},e.each(S.split("|"),function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,function(){e.event.trigger(n,null,t,!0)}),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}})}(jQuery,window),void 0===$j)var $j=jQuery.noConflict();function favStore(favStoreLoadedCallback){$j.ajax({url:"/wcs/resources/store/10001/user/favStore",dataType:"json",async:!1,success:function(store){void 0!==store&&void 0!==store.storeCode&&null!=store.storeCode?localStorage.setItem("favStore",JSON.stringify(store)):localStorage.removeItem("favStore")},error:function(){localStorage.removeItem("favStore")},complete:function(){"FAVORITE_STORE"===bl.cookie.getTypeFromGeolocationCookie()&&$j.removeCookie("WC_BOULANGER_GEOCODE_RESULTS",{path:"/"}),favStoreLoadedCallback?favStoreLoadedCallback():bl.woosmap&&bl.woosmap.saveUserGeolocation&&bl.woosmap.saveUserGeolocation()}})}function shipAddress(){var req=new XMLHttpRequest;req.onreadystatechange=function(event){this.readyState===XMLHttpRequest.DONE&&(200===this.status?localStorage.setItem("shipAddress",this.responseText):localStorage.removeItem("shipAddress"))},req.open("GET","/wcs/resources/store/10001/user/shipAddress"),req.setRequestHeader("Cache-Control","no-cache, no-store, must-revalidate"),req.setRequestHeader("Pragma","no-cache"),req.setRequestHeader("Expires","0"),req.send()}function getAttrFromResponse(html,id,attr){var attrValue="";return html.each(function(index){$j(this).attr("id")===id&&(attrValue=$j(this).attr(attr))}),attrValue}function trim(string){return string.replace(/(^\s*)|(\s*$)/g,"")}$j(document).ready(function(){favStore()}),$j(document).ready(function(){null==localStorage.getItem("shipAddress")&&shipAddress()}),$j(document).ready(function(){authorizedCharacters()}),void 0===bl&&(window.bl={}),bl.isDefined=function(obj,key){var isObj=null!=obj;return isObj&&"string"==typeof key?0<key.indexOf(".")?bl.isDefined(obj[key.split(".")[0]],key.split(".")[1]):bl.isDefined(obj[key]):isObj},jQuery.extend({isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)}}),$j.fn.removeClassRegEx=function(regex){var classes=$j(this).attr("class");if(!classes||!regex)return $j(this);for(var classArray=[],i=0,len=(classes=classes.split(" ")).length;i<len;i++)classes[i].match(regex)||classArray.push(classes[i]);return $j(this).attr("class",classArray.join(" ")),$j(this)},$j.initObject=function(obj){if("string"==typeof obj){var parent=window;$j.each(obj.split("."),function(index,name){void 0===parent[name]&&(parent[name]={}),parent=parent[name]})}},$j.leftPad=function(i,l,s){var o=i.toString();for(s||(s="0");o.length<l;)o=s+o;return o},$j.rightPad=function(i,l,s){var o=i.toString();for(s||(s="0");o.length<l;)o+=s;return o},$j.isBlank=function(text){return"string"!=typeof text||""===$j.trim(text)};var authorizedCharactersPatterns={alpha:/[.\-\s\\0-9]/gi,numeric:/[^0-9]/g,alpha_numeric:/[.\-\s\]/gi,email:/[^A-Z0-9@._\-]/gi};function replaceAccentedCharacters(value){return value=(value=(value=(value=value.replace(new RegExp(//g),"oe")).replace(new RegExp(//g),"OE")).replace(new RegExp(/[]/g),"y")).replace(new RegExp(/[]/g),"Y")}function removeUnauthorizedCharacters(elt,pattern,replace){var value=$j(elt).val(),start=$j(elt)[0].selectionStart,end=$j(elt)[0].selectionEnd,length=value.length;return value=replaceAccentedCharacters(value),$j(elt).val(value),length!=value.length?$j(elt)[0].setSelectionRange(start+Math.abs(length-value.length),end+Math.abs(length-value.length)):$j(elt)[0].setSelectionRange(start,end),new RegExp(pattern).test(value)&&(value=value.replace(pattern,replace),$j(elt).val(value),"function"==typeof $j(elt)[0].setSelectionRange&&(""===replace?$j(elt)[0].setSelectionRange(start-1,end-1):$j(elt)[0].setSelectionRange(start,end))),!0}function authorizeAlphaCharacters(){$j(".authorize_alpha").on("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.alpha," ")})}function authorizeNumCharacters(){$j(".authorize_num").on("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.numeric,"")})}function authorizeAplhaNumCharacters(){$j(".authorize_aplha_num").on("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.alpha_numeric," ")})}function authorizeEMailCharacters(){$j(".authorize_email").on("keyup",function(e){removeUnauthorizedCharacters($j(this),authorizedCharactersPatterns.email,"")})}function trimWhiteSpaces(){$j(".authorize_alpha, .authorize_num, .authorize_aplha_num, .authorize_email").on("blur",function(e){$j(this).val(trim($j(this).val()))})}function authorizedCharacters(){authorizeAlphaCharacters(),authorizeNumCharacters(),authorizeAplhaNumCharacters(),authorizeEMailCharacters(),trimWhiteSpaces()}"ontouchstart"in window||navigator.msMaxTouchPoints?isTouch=!0:isTouch=!1;var loadingLayerHandle=null;function showLoadingLayer(){if(0<$j("#blLoadingLayer").length)return $j("#blLoadingLayer .popup").css({top:$j(window).scrollTop()+100+"px","z-index":99999999}),void $j("#blLoadingLayer").show();var html=$j('<div id="blLoadingLayer"></div>').css({height:$j(document).height()+"px"});$j(html).append('<div class="background"></div>'),/opera/.test(navigator.userAgent.toLowerCase())||$j(".background",html).css({height:$j(document).height()+"px"}),$j(html).append('<div class="popup"></div>'),$j(".popup",html).css({top:$j(window).scrollTop()+100+"px"});var path="wcsstore/boulangerstg/statics/plugins/loader/img/ajax-loader.gif";void 0!==bl&&void 0!==bl.vars&&void 0!==bl.vars.imgDir&&(path="wcsstore/boulangerstg/statics/plugins/loader/img/ajax-loader.gif"),$j(".popup",html).append('<img src="'+path+'" width="100" height="100" alt="Chargement..." />'),$j(".popup",html).append("<p>Nous traitons votre demande, merci de patienter.</p>"),$j("body").append(html),$j("#blLoadingLayer").css("z-index",99999999),loadingLayerHandle=setTimeout(hideLoadingLayer,12e4)}function hideLoadingLayer(){0<$j("#blLoadingLayer").length&&$j("#blLoadingLayer").hide(),null!=loadingLayerHandle&&(clearTimeout(loadingLayerHandle),loadingLayerHandle=null)}function submitSearch(){var newurl,nbMaxHistorySuggest=$j("#hd_search_form").attr("nbmaxSearchSuggest"),maxAgeCookiesuggest=$j("#hd_search_form").attr("maxAgeCookiesuggest");""!==unsecureBaseHref&&void 0!==unsecureBaseHref?newurl=unsecureBaseHref.replace("https://","").replace("www.","").replace("m.",""):newurl=$j("link[rel='canonical']").attr("href").replace("https://","").replace("www.","").replace("m.","");var isMobile=$j(".searchBar").attr("is-mobile");isMobile=""!==isMobile&&void 0!==isMobile&&"true"==isMobile;var searchTerm=document.getElementById("product_keyword").value;bl.cookie.suggestHistory(searchTerm,isMobile,nbMaxHistorySuggest,maxAgeCookiesuggest,newurl);var searchTermSuggest=$j("#product_keyword").attr("searchValue");void 0===searchTermSuggest&&(searchTermSuggest=searchTerm),""==searchTermSuggest||"Rechercher un produit, une marque, un magasin..."==searchTermSuggest||"Rechercher un produit"==searchTermSuggest||(document.location.href=getSearchUrl(searchTermSuggest))}function submitSpellCheckSearch(suggestion){$j("#product_keyword").val(suggestion),submitSearch()}function getSearchUrl(key){var categoryId=$j(".menu_search-select span").attr("value"),categoryIdURLComponent="";if(null!=categoryId&&void 0!==categoryId&&"#"!=categoryId&&""!=categoryId&&(categoryIdURLComponent="&u="+trim(categoryId)),""!=trim(key)){var keyForUrl=replaceAll(key,"\\+","_plus_");return keyForUrl=replaceSpecialCharacter(keyForUrl),unsecureBaseHref+"/resultats?tr="+keyForUrl+categoryIdURLComponent}}function replaceSpecialCharacter(val){var key=val,charArr=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=(key=trim(key)).toLowerCase()).replace(/\s+/g,"+")).replace(/\//g,"+")).replace(/\"/g,"+")).replace(/'/g,"+")).replace(/;/g,"+")).replace(/!/g,"+")).replace(/{/g,"+")).replace(/}/g,"+")).replace(/&/g,"+")).replace(/[+]{2,}/g,"+")).replace(/%/g,"+")).split("");for(i=0;i<charArr.length;i++)-1<"%?$".indexOf(charArr[i])&&(charArr[i]=escape(charArr[i]));var temp=charArr.join("");return temp=temp.replace(/_plus_/g,"%2b")}function replaceAll(s,search,replaceBy){var Re=new RegExp(search,"g");return s.replace(Re,replaceBy)}function toDecode(urlToDecode){document.location.href=window.atob(urlToDecode)}function decodeURL(urlToDecode){return window.atob(urlToDecode)}function goTo(url){-1!=url.indexOf("toDecode")?eval(url):(url=url.replace(/'/g,""),document.location.href=url)}$j(document).ready(function(){$j(".baroWeb").on("click",function(){var modalUrl=$j(this).attr("data-modal-url");Box.open({modal:!0,url:modalUrl})})}),$j(document).ready(function(){$j(".baroWebFooter").on("click",function(){var protocol="https://";-1<window.location.host.indexOf("secure-mobile")&&(protocol="https://");var url=urlHappyScoreMobile;url+="&urlRemerciementForm="+protocol+window.location.host+"/webapp/wcs/stores/servlet/catalog/barowebRemerciementsMobile?urlRetour="+document.location.href,document.location.href=url})}),$j(document).ready(function(){$j(".baroWebHeader").on("click",function(){var protocol="https://";-1<window.location.host.indexOf("secure-mobile")&&(protocol="https://");var url=urlHappyScoreMobile;url+="&urlRemerciementForm="+protocol+window.location.host+"/webapp/wcs/stores/servlet/catalog/barowebRemerciementsMobile?urlRetour="+document.location.href,document.location.href=url})});var bindNumericsOnly=function(){$j(".numbersOnly").keypress(function(e){if(8!=e.which&&0!=e.which&&(e.which<48||57<e.which))return!1})},getXtn2=function(isCheckout,isMobile){var xtn2="17";return isMobile&&(xtn2=isCheckout?"6":"11"),xtn2};function insertG_Recaptcha(){if($j("#g-recaptcha").length);else if($j("#g-captcha-container").length){checkRecaptchaApiImport();var html_to_insert="<div align='center'><div class='g-recaptcha' id='g-recaptcha' data-sitekey='"+bl.dataSiteKey+"' data-theme='light'></div><div id='recaptcha_error_container' class='errorr' style='display:none; text-align:center; color:#F00; font-size:11px; font-family:arial; font-weight:bold; margin-top:-16px; margin-bottom:40px;'><span>Veuillez valider que vous n'tes pas un robot.</span></div></div>";$j("#g-captcha-container").html(html_to_insert),validateRecaptchaBeforeSubmittingForm()}}function checkRecaptchaApiImport(){0===$j('script[src="https://www.google.com/recaptcha/api.js"]').length&&$j.getScript("https://www.google.com/recaptcha/api.js")}function validateRecaptchaBeforeSubmittingForm(){$j("form").submit(function(e){return validationCaptchaResponse(e)}),$j("form .validate").bind("click",function(e){return validationCaptchaResponse(e)})}function validationCaptchaResponse(e){return $j("#recaptcha_error_container").hide(),""!==grecaptcha.getResponse()||($j("#recaptcha_error_container").show(),e.stopImmediatePropagation(),!1)}$j(document).ready(function(){insertG_Recaptcha()}),$j(document).on("DOMNodeInserted",".view",function(){insertG_Recaptcha()}),$j.initObject("bl.form"),$j.extend(bl.form,{zipCode:function(el,btn){if(!(void 0===el||void 0===btn||el.length<=0)){el.val()&&el.val(el.val().replace(/[^\d]/g,"")),el.hasClass("minlength5")?el.val()&&null!==el.val().match(/^\d{5}$/)&&!1:el.val()&&null!==el.val().match(/^\d{2}(\d{3})?$/)&&!1}}});var socialXitiHits=function(el,provider){if("function"==typeof xt_med){var isCheckout=$j(el).parents(".socialLogonBtns").attr("is-checkout");isCheckout=!$j.isBlank(isCheckout)&&"true"===isCheckout;var pageKey=$j(el).parents(".socialLogonBtns").attr("page-key"),isMobile=$j(el).parents(".socialLogonBtns").attr("is-mobile");isMobile=!$j.isBlank(isMobile)&&"true"==isMobile;var xtn2=getXtn2(isCheckout,isMobile);$j.isBlank(pageKey)||"BLRegistration"!=pageKey?$j.isBlank(pageKey)||"BLAuthentication"!=pageKey||(isCheckout?xiti_events_clic(this,"Tunnel_commande::Clic_connexion_login_"+provider,xtn2):xiti_events_clic(this,"Compte_client::Clic_connexion_login_"+provider,xtn2)):isCheckout?xiti_events_clic(this,"Tunnel_commande::Clic_inscription_login_"+provider,xtn2):xiti_events_clic(this,"Compte_client::Clic_inscription_login_"+provider,xtn2)}},bindSocialButtonEvents=function(btn,logoffUrl){$j("#facebookSocialBtn, #facebook").bind("click",function(e){socialXitiHits(this,"facebook"),_gum.push(["login",{provider:"facebook"},function(response){reach5ResponseTreatment(response,"facebook",btn,logoffUrl)}])}),$j("#googlePlusSocialBtn, #googlePlus").bind("click",function(e){socialXitiHits(this,"google"),_gum.push(["login",{provider:"google"},function(response){reach5ResponseTreatment(response,"google",btn,logoffUrl)}])}),$j("#twitterSocialBtn, #twitter").bind("click",function(e){socialXitiHits(this,"twitter"),_gum.push(["login",{provider:"twitter"},function(response){reach5ResponseTreatment(response,"twitter",btn,logoffUrl)}])}),$j("#paypalSocialBtn, #paypal").bind("click",function(e){socialXitiHits(this,"paypal"),_gum.push(["login",{provider:"paypal"},function(response){reach5ResponseTreatment(response,"paypal",btn,logoffUrl)}])})};$j(document).ready(function(){$j("a.verifyCredentials").bind("click",function(){return resultAllowUpdate=accountAllowUpdate($j(this)),!1});var inputsCivilities=document.getElementsByClassName("radio-to-btn");if(0<inputsCivilities.length)for(var i=0;i<inputsCivilities.length;i++)inputsCivilities[i].addEventListener("click",function(){document.querySelector(".honorific-prefix").classList.add("handler"),document.querySelector(".honorific-prefix").classList.add("parsley-success")})});var path="/webapp/wcs/stores/servlet/",modalUrl="checkPasswordModalView",logoffPath="Logoff?URL=homepage&storeId=10001&urlRequestType=Base&langId=-2&catalogId=10001";void 0!==basePath||-1<window.location.href.indexOf("secure-mobile")?modalUrl="mCheckPasswordModalView":void 0!==bl.basePath&&(modalUrl="checkPasswordModalView",path=bl.basePath),-1<window.location.href.indexOf("https://m.")&&(modalUrl="mCheckPasswordModalView",logoffPath="Logoff?storeId=10001&URL=mHomepage?storeId=10001&catalogId=10001&langId=-2&ct=m");var logoffUrl=baseHref+path+logoffPath,accountAllowUpdate=function(btn,openPopin){void 0===openPopin&&(openPopin=!0);var allowUpdate=!0,url=path+"AllowUpdateAccount";return $j.ajax({url:url,data:{storeId:bl.vars.storeId,catalogId:bl.vars.catalogId,langId:bl.vars.langId},async:!1,dataType:"json",success:function(data,textStatus,jqXHR){if("object"==typeof data&&null!==data||(allowUpdate=!1),void 0!==btn.attr("href")){var url=btn.attr("href");"_blank"==btn.attr("target")?window.open(url):window.location.href=url}else void 0!==btn.attr("data-modal-url")&&showStoreBillsPopin(btn.attr("data-modal-url"));allowUpdate=!0},error:function(jqXHR,textStatus,errorThrown){allowUpdate=!1}}),allowUpdate},verifyCredentials=function(){var credentialsOk=!0,url=path+"VerifyUserCredentials",password=$j("#accountPassword #password").val();return void 0!==password&&""!==password||(password=$j("#login #password").val()),$j.ajax({type:"POST",url:url,data:{storeId:bl.vars.storeId,catalogId:bl.vars.catalogId,langId:bl.vars.langId,password:password},async:!1,dataType:"json",success:function(data,textStatus,jqXHR){"object"==typeof data&&null!==data||(credentialsOk=!1),credentialsOk="true"==data.validCredentials,"true"==data.forceLogoff&&(window.location.href=logoffUrl)},error:function(jqXHR,textStatus,errorThrown){credentialsOk=!1}}),credentialsOk},bindFrontValidatePasswordModal=function(btn){$j("#accountPassword").validate({ignore:"form[id!='login'], :hidden",submitHandler:function(form){return validCredentials=verifyCredentials(),validCredentialCallback(validCredentials,btn),!1}}),bindSocialButtonEvents(btn,logoffUrl)},bindMobileValidatePasswordModal=function(btn){$j("#login").validate({ignore:"form[id!='login'], :hidden",submitHandler:function(form){return validCredentials=verifyCredentials(),!1===validCredentials?($j("#password").val(""),$j("#password").valid()):launchPreviousEvents(btn),!1}})},launchPreviousEvents=function(btn){if(void 0===btn.attr("href")||""===btn.attr("href")||"javascript:void(0)"==btn.attr("href"))$j("#popinAccountLayer .modal_close").click(),btn.click();else{var url=btn.attr("href");"_blank"==btn.attr("target")?($j("#popinAccountLayer .modal_close").click(),window.open(url)):window.location.href=url}},validCredentialCallback=function(isValidCredential,btn){!1===isValidCredential?($j("#password").val(""),$j("#password").valid()):launchPreviousEvents(btn)};void 0===bl&&(bl={}),void 0===bl.delivery&&(bl.delivery={});var cacheSites=new Array;$j.extend(bl.delivery,{cacherSites:function(sites){for(var i=0;i<sites.length;i++){var key=sites[i].network+"-"+sites[i].code;cacheSites[key]=sites[i]}},getSiteFromCache:function(keySite){return cacheSites[keySite]},validateParams:function(searchElement,displayClassElement,templates,callbackFunctions){return!0},searchSites:function(searchParams,displayClassElement,templates,callbackFunctions){if(!bl.delivery.validateParams(searchParams,displayClassElement,templates,callbackFunctions))return $j(displayClassElement+" .display-sites").html(""),$j(displayClassElement+" .informations").hide(),$j(displayClassElement+" .text-center").hide(),$j(displayClassElement+" .error, "+displayClassElement+" .msgError").show(),void $j(displayClassElement).children(".alert-error").show();$j(displayClassElement).removeClass("error-field"),$j(displayClassElement+" .display-sites").html(""),$j(displayClassElement+" .display-sites").hide(),$j(displayClassElement+" .informations").hide(),$j(displayClassElement+" .error, "+displayClassElement+" .msgError").hide(),$j(displayClassElement).children(".alert-error").hide(),$j(displayClassElement+" .loader").show();var requestBody={};requestBody[searchParams.type]=searchParams.value,requestBody.sortingType=$j("#sortByOption").val();var searchUrl=searchParams.url;bl.cookie.isVenteCookieExist()&&(searchUrl+="&isSeller=true"),$j.getJSON(searchUrl,requestBody,function(data){if(!data||!data.sites||0===data.sites.length)return $j(displayClassElement).addClass("error-field"),$j(displayClassElement+" .loader").hide(),$j(displayClassElement+" .delivery-infos").hide(),$j(displayClassElement+" .error, "+displayClassElement+" .msgError").show(),$j(displayClassElement).children(".alert-error").show(),$j(displayClassElement+" .text-center").hide(),!1;if($j(displayClassElement+" .delivery-infos").show(),bl.delivery.cacherSites(data.sites),bl.delivery.displaySites(data,displayClassElement,templates),"postalCode"===searchParams.type&&5==searchParams.value.length&&(sessionStorage.setItem("SEARCH_ZIPCODE",searchParams.value),$j.removeCookie("WC_BOULANGER_GEOCODE_RESULTS",{path:"/"}),bl.woosmap.saveUserGeolocation()),callbackFunctions&&0!==callbackFunctions.length)for(var i=0;i<callbackFunctions.length;i++)callbackFunctions[i]&&"function"==typeof callbackFunctions[i]&&(0,callbackFunctions[i])();$j(displayClassElement+" .informations").show()}).fail(function(){$j(displayClassElement).addClass("error-field"),$j(displayClassElement+" .error, "+displayClassElement+" .msgError").show(),$j(displayClassElement).children(".alert-error").show(),$j(displayClassElement+" .text-center").hide(),$j(displayClassElement+" .delivery-infos").hide(),$j(displayClassElement+" .loader").hide()}).complete(function(){setTimeout(function(){$j(displayClassElement+" .display-sites").show(),$j(displayClassElement+" .loader").hide()},800)})},displaySites:function(data,displayClassElement,templates){var indispo=!1;"storesCatalogPopin"==templates&&$j.each(data.sites,function(i,item){if(!(indispo=!item.oneHourEligible&&!item.availableInFewDays))return!1}),indispo?($j("#rem-delivery-infos-dispo").hide(),$j("#rem-delivery-infos-indispo").show()):($j(displayClassElement+" .display-sites").json2html(data,bl.json2html.getJson2HtmlFormat(templates)),$j("#rem-delivery-infos-dispo").show(),$j("#rem-delivery-infos-indispo").hide(),setTimeout(function(){if(0<$j(".display-sites").length&&0<$j(".storePickupDetails").length)for(var listStore=$j(".storePickupDetails"),i=0;i<listStore.length;i++)0<listStore[i].getElementsByClassName("no-available").length&&listStore[i].getElementsByClassName("storePickupChooseButton")[0].classList.add("off");if(0<$j(".content-list").length&&0<$j(".store-mag").length)for(listStore=$j(".store-mag"),i=0;i<listStore.length;i++)0<listStore[i].getElementsByClassName("no-available").length&&listStore[i].getElementsByClassName("content-button-retrait")[0].classList.add("off")},800)),"pickUpSitesCatalogPopin"!=templates&&"checkoutPickUpSitePopin"!=templates&&"pickUpSitePopinCarglass"!=templates&&"newCheckoutPickUpSitePopin"!=templates&&"mRelaySelectPickUp"!=templates||bl.delivery.displayPickupPopin(data,displayClassElement),"storesCatalogPopin"==templates&&bl.delivery.displayStorePopin(data,displayClassElement),"newCheckoutPickUpSitePopin"!=templates&&(bl.delivery.updateGoogleMarkers($j(".display-sites li span.icon:visible")),bl.delivery.updateGoogleMarkers($j(".display-sites .formStoresList .list .icon:visible")))},displayPickupPopin:function(data,displayClassElement){var relayTitle=$j(".formStoresList .list .name-pickup"),relayInput=$j(".formStoresList .list input"),relayOpenedOrClosed=$j(".formStoresList .list .openedOrClosed"),relayTitleCheckout=($j(".formStoresList .info-mag"),$j(".address-list .address-container .name-pickup")),relayTitleCheckoutMobile=$j(".address-list .address-container");$j(displayClassElement+" .display-sites .formStoresList label").bind("click",function(event){$j(this).is(".selected")?relayTitle.removeClass("selected"):(relayTitle.siblings("input").removeAttr("checked"),relayInput.removeClass("selected"),relayTitle.removeClass("selected"),$j(this).siblings("input").attr("checked","checked"),$j(this).siblings("input").addClass("selected"),$j(this).addClass("selected"),setCookie("BL_CLICKED_STORE",$j(this).attr("data-zipcode")+"-"+$j(this).attr("data-site-id").toUpperCase(),"","/",".boulanger.com"));var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);if(0<$j(displayClassElement+" .day1").length&&$j(displayClassElement+" .day2").length&&($j(displayClassElement+" .day1").html(bl.delivery.formatDateRelaisStandart(site.deliveryDateMin)),$j(displayClassElement+" .day2").html(bl.delivery.formatDateRelaisStandart(site.deliveryDateMax)),$j(displayClassElement+" .informations").css("display","inline-block")),0<$j(displayClassElement+" .deliveryCharge").length&&$j(displayClassElement+" .deliveryCharge").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),0<$j(displayClassElement+" #informationChronopostRelayDate").length&&$j(displayClassElement+" #informationChronopostRelayHour").length){$j(displayClassElement+" #informationChronopostRelayDate").html(bl.delivery.formatDateRelaisExpress(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;$j(displayClassElement+" #informationChronopostRelayHour").html(hour.substring(0,indexH)),$j(displayClassElement+" .informations").css("display","inline-block")}"CHP"==site.network&&"X"==site.code.charAt(site.code.length-1)||"INP"==site.network?($j(displayClassElement+" .is-CHP").hide(),$j(displayClassElement+" .is-INP").show()):($j(displayClassElement+" .is-INP").hide(),$j(displayClassElement+" .is-CHP").show()),"CHP"==site.network&&"X"==site.code.charAt(site.code.length-1)?($j(displayClassElement+" .delivery-infos.INP").hide(),$j(displayClassElement+" .delivery-infos.CHP").show()):($j(displayClassElement+" .delivery-infos.INP").show(),$j(displayClassElement+" .delivery-infos.CHP").hide()),0!==$j(displayClassElement+" .googlemaps .mapframe").length&&$j(displayClassElement+" .googlemaps .mapframe").blGoogleMaps("focusAddress",site)}),$j(".page-delivery .address-list .address-container .store-mag").on("click",function(event){$j(".page-delivery .address-list .address-container input").attr("checked",!1);var label=$j(this).find("label"),input=label.siblings("input");label.is(".selected")?relayTitle.removeClass("selected"):(relayTitleCheckout.parent("address").removeClass("selected"),label.parent("address").addClass("selected"),input.attr("checked",!0),setCookie("BL_CLICKED_STORE",label.attr("data-zipcode")+"-"+label.attr("data-site-id").toUpperCase(),"","/",".boulanger.com"));var id=label.attr("id"),site=bl.delivery.getSiteFromCache(id);bl.delivery.updateModalInformation(site),0!==$j(displayClassElement+" .map").length&&$j(displayClassElement+" .map").blGoogleMaps("focusAddressRelay",site)}),$j(displayClassElement+" .display-sites .address-list .address-container label").bind("click",function(event){$j(this).is(".selected")?relayTitle.removeClass("selected"):(relayTitleCheckout.parent("address").removeClass("selected"),$j(this).parent("address").addClass("selected"),setCookie("BL_CLICKED_STORE",$j(this).attr("data-zipcode")+"-"+$j(this).attr("data-site-id").toUpperCase(),"","/",".boulanger.com"));var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);bl.delivery.updateModalInformation(site),0!==$j(displayClassElement+" .map").length&&$j(displayClassElement+" .map").blGoogleMaps("focusAddressRelay",site)}),$j(".page-delivery .address-list .address-container .white_block").on("click",function(event){$j(".page-delivery .address-list .address-container input").attr("checked",!1);var label=$j(this).find("label"),input=label.siblings("input");relayTitleCheckoutMobile.find("address.selected").removeClass("selected"),label.parent("address").addClass("selected"),input.attr("checked",!0),setCookie("BL_CLICKED_STORE",label.attr("data-zipcode")+"-"+label.attr("data-site-id").toUpperCase(),"","/",".boulanger.com");var id=label.attr("id"),site=bl.delivery.getSiteFromCache(id);if(0<$j(displayClassElement+" .insert-delivery .price").length&&$j(displayClassElement+" .insert-delivery .price").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),0<$j(displayClassElement+" .insert-delivery p .datemin").length&&$j(displayClassElement+" .insert-delivery p .datemax").length&&($j(displayClassElement+" .insert-delivery p .datemin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .datemax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateLockersMin").length&&$j(displayClassElement+" .insert-delivery p .dateLockersMax").length&&($j(displayClassElement+" .insert-delivery p .dateLockersMin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .dateLockersMax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").length&&$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").length){$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").html(bl.delivery.formatDateRelaisExpressDeliveryMobile(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").html(hour.substring(0,indexH))}}),$j(displayClassElement+" .display-sites .address-container address label").bind("click",function(event){relayTitleCheckoutMobile.find("address.selected").removeClass("selected"),$j(this).parent("address").addClass("selected"),setCookie("BL_CLICKED_STORE",$j(this).attr("data-zipcode")+"-"+$j(this).attr("data-site-id").toUpperCase(),"","/",".boulanger.com");var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);if(0<$j(displayClassElement+" .insert-delivery .price").length&&$j(displayClassElement+" .insert-delivery .price").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),0<$j(displayClassElement+" .insert-delivery p .datemin").length&&$j(displayClassElement+" .insert-delivery p .datemax").length&&($j(displayClassElement+" .insert-delivery p .datemin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .datemax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateLockersMin").length&&$j(displayClassElement+" .insert-delivery p .dateLockersMax").length&&($j(displayClassElement+" .insert-delivery p .dateLockersMin").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMin)),$j(displayClassElement+" .insert-delivery p .dateLockersMax").html(bl.delivery.formatDateRelaisStandartDeliveryMobile(site.deliveryDateMax))),0<$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").length&&$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").length){$j(displayClassElement+" .insert-delivery p .dateChrononopostRelay").html(bl.delivery.formatDateRelaisExpressDeliveryMobile(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;$j(displayClassElement+" .insert-delivery p .dateChrononopostRelayHour").html(hour.substring(0,indexH))}}),$j(displayClassElement+" .display-sites .formStoresList label .openedOrClosed").bind("click",function(event){$j(this).hasClass("opened24h")||$j(this).hasClass("closeWithoutAgenda")||$j(this).hasClass("closeWithoutAgendaButWithAStartDate")||($j(".formStoresList .info-mag").slideUp("slow"),$j(this).is(".selected")?(relayOpenedOrClosed.removeClass("selected"),relayOpenedOrClosed.removeClass("dshez")):($j(this).siblings(".info-mag").slideDown("slow"),relayOpenedOrClosed.removeClass("selected"),relayOpenedOrClosed.removeClass("dshez"),$j(this).addClass("selected"),$j(this).addClass("dshez"))),$j(this).hasClass("horaireCarglass")&&($j(this).is(".selected")?$j(this).html("Je masque les horaires d&apos;ouverture du point relais"):$j(this).html("J&apos;affiche les horaires d&apos;ouverture du point relais"))}),$j("#modalChoisirPointRelais .modal .modal-body .address-list address .status").click(function(){$j(this).next(".delivery-bloc-info").slideToggle();var long=$j(this).siblings("label").attr("data-longitude"),lat=$j(this).siblings("label").attr("data-latitude");bl.google.isLoaded()?bl.delivery.createGoogleMap(lat,long):bl.google.initAPI("bl.delivery.createGoogleMap",bl.delivery.createGoogleMap,lat,long)}),$j("#modalChoisirPointRelais .modal .modal-body .address-list address .delivery-bloc-info button").click(function(){$j(this).closest(".delivery-bloc-info").slideUp()}),$j("#modalChoisirPointRelais .modal .modal-body .address-list button.btn").click(function(){var action=$j(this).parents(".display-sites").attr("data-url")+"&selectedPickupPoint="+$j(this).parents(".address-list").find("address.selected input").val()+"&shipModeId="+$j(this).parents(".address-list").find("address.selected input").attr("data-shipmode");$j("#updatePickUp-form").attr("action",action),$j("#updatePickUp-form").submit()}),$j(displayClassElement+" .loader").hide(),$j(displayClassElement+" .display-sites .formStoresList label:first").trigger("click"),$j(displayClassElement+" .display-sites .address-container address label:first").trigger("click"),0!==$j(displayClassElement+" .googlemaps .mapframe").length&&(bl.google.isLoaded()?bl.delivery.showMapForCheckoutSelectRelayPopin(displayClassElement,data):bl.google.initAPI("bl.delivery.showMapForCheckoutSelectRelayPopin",bl.delivery.showMapForCheckoutSelectRelayPopin,displayClassElement,data)),0!==$j(displayClassElement+" #map-relay").length&&(bl.google.isLoaded()?bl.delivery.showMapForNewCheckoutSelectRelayPopinTemp(displayClassElement,data):bl.google.initAPILivraison(bl.delivery.triggerPageLivraison(displayClassElement),"bl.delivery.showMapForNewCheckoutSelectRelayPopin",bl.delivery.showMapForNewCheckoutSelectRelayPopin,displayClassElement,data))},createGoogleMap:function(lat,long){var divGoogleMap=document.getElementById("map-site-"+lat+"-"+long);divGoogleMap.style.height="100%";var mapOptions={center:new google.maps.LatLng(lat,long),zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},map=new google.maps.Map(divGoogleMap,mapOptions);new google.maps.Marker({position:new google.maps.LatLng(lat,long),map:map})},displayStorePopin:function(data,displayClassElement){var storeTitle=$j(".formStoresList .list .name-store"),storeInput=$j(".formStoresList .list input"),storeOpenedOrClosed=$j(".formStoresList .list .openedOrClosed");$j(".formStoresList .info-mag");$j(displayClassElement+" .display-sites .formStoresList label").bind("click",function(event){$j(this).is(".selected")?storeTitle.removeClass("selected"):(storeTitle.siblings("input").removeAttr("checked"),storeInput.removeClass("selected"),storeTitle.removeClass("selected"),$j(this).siblings("input").attr("checked","checked"),$j(this).siblings("input").addClass("selected"),$j(this).addClass("selected"),setCookie("BL_CLICKED_STORE",$j(this).attr("data-zipcode")+"-"+$j(this).attr("data-site-id").toUpperCase(),"","/",".boulanger.com"));var id=$j(this).attr("id"),site=bl.delivery.getSiteFromCache(id);0!==$j(displayClassElement+" .googlemaps .mapframe").length&&$j(displayClassElement+" .googlemaps .mapframe").blGoogleMaps("focusAddress",site)}),$j(displayClassElement+" .display-sites .formStoresList label .openedOrClosed").bind("click",function(event){$j(".formStoresList .info-mag").slideUp("slow"),$j(this).is(".selected")?(storeOpenedOrClosed.removeClass("selected"),storeOpenedOrClosed.removeClass("dshez")):($j(this).siblings(".info-mag").slideDown("slow"),storeOpenedOrClosed.removeClass("selected"),storeOpenedOrClosed.removeClass("dshez"),$j(this).addClass("selected"),$j(this).addClass("dshez"))}),$j(displayClassElement+" .loader").hide(),$j(displayClassElement+" .display-sites .formStoresList label:first").trigger("click"),0!==$j(displayClassElement+" .googlemaps .mapframe").length&&(bl.google.isLoaded()?bl.delivery.showMapForCheckoutSelectRelayPopin(displayClassElement,data):bl.google.initAPI("bl.delivery.showMapForCheckoutSelectRelayPopin",bl.delivery.showMapForCheckoutSelectRelayPopin,displayClassElement,data))},updateGoogleMarkers:function(markers){if(markers&&0!==markers.length)for(var alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=0;i<markers.size();i++)$j(markers.get(i)).html(alphabet[i%26])},formatAddress:function(address){var fAddress="";for(i=0;i<address.lines.length;i++)fAddress+=address.lines[i]+"<br>";return fAddress+=address.zipCode+" "+address.city},formatAddressForModalRelay:function(address){var fAddress="";for(i=0;i<address.lines.length;i++)fAddress+=address.lines[i].charAt(0).toUpperCase()+address.lines[i].slice(1).toLowerCase()+"<br>";return fAddress+=address.zipCode+" "+address.city.charAt(0).toUpperCase()+address.city.slice(1).toLowerCase()},formatAddressForGmap:function(address){var fAddress="";for(i=0;i<address.lines.length;i++)fAddress+=address.lines[i]+" ";return fAddress+=address.zipCode+" "+address.city},formatStoresAddressForCatalogPopin:function(site){var fAddress="";return fAddress+="<span>"+site.designation+"<br></span>",fAddress+=bl.delivery.formatAddress(site.address),fAddress+='<br><a href="'+site.url+'" target="_blank">Plan d\'acces</a>'},formatPickUpTimetable:function(jour){return jour&&("00:00"!=jour.morningOpeningTime&&null!==jour.morningOpeningTime||"00:00"!=jour.morningClosingTime&&null!==jour.morningClosingTime||"00:00"!=jour.afternoonOpeningTime&&null!==jour.afternoonOpeningTime||"00:00"!=jour.afternoonClosingTime&&null!==jour.afternoonClosingTime)?"00:00"!=jour.afternoonOpeningTime&&null!==jour.afternoonOpeningTime||"00:00"!=jour.afternoonClosingTime&&null!==jour.afternoonClosingTime?jour.morningOpeningTime.replace(":","h")+" - "+jour.morningClosingTime.replace(":","h")+" et "+jour.afternoonOpeningTime.replace(":","h")+" - "+jour.afternoonClosingTime.replace(":","h"):jour.morningOpeningTime.replace(":","h")+" - "+jour.morningClosingTime.replace(":","h"):"Ferm"},formatPickUpAgenda:function(agenda){if(!agenda)return"";var localAgenda=agenda;return"<p><span>Lundi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.monday)+"</p><p><span>Mardi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.tuesday)+"</p><p><span>Mercredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.wednesday)+"</p><p><span>Jeudi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.thursday)+"</p><p><span>Vendredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.friday)+"</p><p><span>Samedi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.saturday)+"</p><p><span>Dimanche :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.sunday)},formatPickUpAgendaMobile:function(agenda,isOrdersSimPage){if(!agenda)return"";var localAgenda=agenda;return(isOrdersSimPage?"<ul><li><span>Lundi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.monday)+"</span></li><li><span>Mardi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.tuesday)+"</span></li><li><span>Mercredi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.wednesday)+"</span></li><li><span>Jeudi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.thursday)+"</span></li><li><span>Vendredi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.friday)+"</span></li><li><span>Samedi :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.saturday)+"</span></li><li><span>Dimanche :</span><span>"+bl.delivery.formatPickUpTimetable(localAgenda.sunday):"<ul><li><span>Lundi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.monday)+"</li><li><span>Mardi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.tuesday)+"</li><li><span>Mercredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.wednesday)+"</li><li><span>Jeudi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.thursday)+"</li><li><span>Vendredi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.friday)+"</li><li><span>Samedi :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.saturday)+"</li><li><span>Dimanche :</span>"+bl.delivery.formatPickUpTimetable(localAgenda.sunday))+"</ul>"},formatStoresTimetable:function(jour){return null===jour.morningOpeningTime&&null===jour.morningClosingTime&&null===jour.afternoonOpeningTime&&null===jour.afternoonClosingTime?"Ferm":null===jour.morningClosingTime&&null===jour.afternoonOpeningTime?"de "+bl.delivery.getHour(jour.morningOpeningTime)+"  "+bl.delivery.getHour(jour.afternoonClosingTime):"de "+bl.delivery.getHour(jour.morningOpeningTime)+"  "+bl.delivery.getHour(jour.morningClosingTime)+" et de "+bl.delivery.getHour(jour.afternoonOpeningTime)+"  "+bl.delivery.getHour(jour.afternoonClosingTime)},formatDateRelaisStandart:function(date){return bl.delivery.getNumberOfDayAndMonth(date)},formatDateChooseRelais:function(date){if(null===date)return"";date.split("-");return bl.delivery.getDayWording(date)+" "+bl.delivery.getNumberOfDay(date)+" "+bl.delivery.getMonthWording(date)},formatDateRelaisStandartDeliveryMobile:function(date){return bl.delivery.formatDateRelayDeliveryMobile(date)},formatFormatAmountWithOffert:function(deliveryCharge){if(null!==deliveryCharge)return 0===deliveryCharge?"OFFERT":deliveryCharge+" "},formatDateRelaisExpress:function(date){return bl.delivery.getNumberOfDayAndMonth(date)},formatDateRelaisExpressDeliveryMobile:function(date){return bl.delivery.formatDateRelayDeliveryMobile(date)},formatDateStores:function(date){if(null===date)return"";date.split("-");var fDate="<span>"+bl.delivery.getDayWording(date)+" "+bl.delivery.getNumberOfDay(date)+" "+bl.delivery.getMonthWording(date)+"</span>";return fDate+="  partir de ",fDate+="<span>"+bl.delivery.getHour(date)+"</span>"},formatDateRelayDeliveryMobile:function(date){if(null===date)return"";date.split("-");return"<span>"+bl.delivery.getDayWording(date)+" "+bl.delivery.getNumberOfDay(date)+" "+bl.delivery.getMonthWording(date)+"</span>"},getDayWording:function(date){if(null===date)return"";var day=date.split("-")[0];return 0===day.length?"":day.toLowerCase()},getMonthWording:function(date){if(null===date)return"";var month=date.split("-")[1];return 0===month.length?"":month.toLowerCase()},getNumberOfDay:function(date){if(null===date)return"";var infosDate=date.split("-");return 0===infosDate[2].length?"":infosDate[2].split("/")[0]},getNumberOfDayAndMonth:function(date){if(null===date)return"";var infosDate=date.split("-");if(0===infosDate[2].length)return"";var dateFormat=infosDate[2].split("/");return dateFormat[0]+"/"+dateFormat[1]},getHour:function(date){if(null===date)return"";var infosDate=date.split("-");if(0===infosDate[3].length)return"";var hourFormat=infosDate[3].split(":");return hourFormat[0]+"h"+hourFormat[1]},formatStoresSchedulesForCatalogPopin:function(agendas){if(null===agendas||0===agendas.length)return"";for(var jour=new Array,i=0;i<agendas.length;i++)jour[agendas[i].day]=agendas[i];var fSchedule="",schedule=new Array,jIndex=0;for(i=1;i<=7;i++)null===jour[i-1]?(schedule[jIndex]=jour[i],jIndex+=1):jour[i].morningOpeningTime==jour[i-1].morningOpeningTime&&jour[i].afternoonClosingTime==jour[i-1].afternoonClosingTime&&jour[i].morningClosingTime==jour[i-1].morningClosingTime&&jour[i].afternoonOpeningTime==jour[i-1].afternoonOpeningTime?(schedule[jIndex]=jour[i],jIndex+=1):(fSchedule+=bl.delivery.formatScheduleWording(schedule)+", ",(schedule=new Array)[jIndex=0]=jour[i]),7==i&&(fSchedule+=bl.delivery.formatScheduleWording(schedule)+".");return fSchedule},formatStoresSchedulesForUserArea:function(agenda){if(!agenda)return"";for(var schedule="<ul>",i=0;i<agenda.length;i++)schedule+="<li>",schedule+="<span>"+bl.delivery.getDayByNumber(agenda[i].day)+"</span>",schedule+="<span>"+bl.delivery.formatStoresTimetable(agenda[i])+"</span>",schedule+="</li>";return schedule+="</ul>"},deliveryDateFormat:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),dayName=splittedDeliveryDate[0],monthName=splittedDeliveryDate[1],date=splittedDeliveryDate[2],time=splittedDeliveryDate[3],diplayedDayName=dayName.substring(0,1).toUpperCase()+dayName.substring(1,3)+".",dayNumber=date.split("/")[0],diplayedMonthName=monthName.substring(0,1).toUpperCase()+monthName.substring(1,monthName.lenght),formattedDeliveryDate={};return formattedDeliveryDate.day=diplayedDayName+" "+dayNumber+" "+diplayedMonthName,formattedDeliveryDate.time=time.substring(0,5).replace(":","h"),formattedDeliveryDate}},deliveryDateFormat2:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),dayName=splittedDeliveryDate[0],monthName=splittedDeliveryDate[1],date=splittedDeliveryDate[2],time=splittedDeliveryDate[3],dayNumber=date.split("/")[0],formattedDeliveryDate={};return formattedDeliveryDate.day=dayName+" "+dayNumber+" "+monthName,formattedDeliveryDate.time=time.substring(0,5).replace(":","h"),formattedDeliveryDate}},deliveryDateFormatDayMonth:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),date=splittedDeliveryDate[2],time=splittedDeliveryDate[3],dayNumber=date.split("/"),day=dayNumber[0],month=dayNumber[1],formattedDeliveryDate={};return formattedDeliveryDate.day=day+"/"+month,formattedDeliveryDate.time=time.substring(0,5).replace(":","h"),formattedDeliveryDate}},deliveryDelayFormat:function(deliveryDate){if(void 0!==typeof deliveryDate&&null!==deliveryDate){var splittedDeliveryDate=deliveryDate.split("-"),date=(splittedDeliveryDate[0],splittedDeliveryDate[1],splittedDeliveryDate[2]),currentDate=(splittedDeliveryDate[3],new Date),WNbJours=(deliveryDate=new Date(date.split("/")[2],date.split("/")[1]-1,date.split("/")[0])).getTime()-currentDate.getTime();return Math.ceil(WNbJours/864e5)}},formatScheduleWording:function(agendas){if(agendas)return 0===agendas.length?"Ferm":1<agendas.length?null===agendas[0].morningOpeningTime&&null===agendas[0].morningClosingTime&&null===agendas[0].afternoonOpeningTime&&null===agendas[0].afternoonClosingTime?"Ferm du "+bl.delivery.getDayByNumber(agendas[0].day)+" au "+bl.delivery.getDayByNumber(agendas[agendas.length-1].day):"Du "+bl.delivery.getDayByNumber(agendas[0].day)+" au "+bl.delivery.getDayByNumber(agendas[agendas.length-1].day)+" "+bl.delivery.formatStoresTimetable(agendas[0]):1==agendas.length?null===agendas[0].morningOpeningTime&&null===agendas[0].morningClosingTime&&null===agendas[0].afternoonOpeningTime&&null===agendas[0].afternoonClosingTime?"Ferm le "+bl.delivery.getDayByNumber(agendas[0].day):"Le "+bl.delivery.getDayByNumber(agendas[0].day)+" "+bl.delivery.formatStoresTimetable(agendas[0]):void 0},getDayByNumber:function(n){var day="";switch(n){case 1:day="Lundi";break;case 2:day="Mardi";break;case 3:day="Mercredi";break;case 4:day="Jeudi";break;case 5:day="Vendredi";break;case 6:day="Samedi";break;case 7:day="Dimanche"}return day},getAvailabilityData:function(site,calculateDate){var availabilityJSON={},jsonDate=null,isGoogleShoppingContext=(jsonDate=bl.delivery.deliveryDateFormat2(site.deliveryDateMin),!1);try{bl.catalog.productPage.googleShoppingContextualization.isGoogleShoppingContext()&&(isGoogleShoppingContext=!0)}catch(e){console.log(e)}if(void 0!==jsonDate){if(site.oneHourEligible&&!site.oneHourEligibleInFuture)availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Disponible en magasin<br/>Retrait possible sous 1h":'<span class="delivery-status">En stock</span> Retrait sous 1h');else if(site.oneHourEligibleInFuture){if(availabilityJSON.cssClass=isGoogleShoppingContext?"delivery-day available-soon":"delivery-day available",!0===calculateDate)if(isGoogleShoppingContext){var delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);availabilityJSON.formattedDate=1==delayDay?"Disponible en magasin<br/>Retrait ds demain<br/> partir de "+jsonDate.time:"Disponible en magasin<br/>Retrait ds "+jsonDate.day+"<br/> partir de "+jsonDate.time}else availabilityJSON.formattedDate="Retrait ds "+jsonDate.day+"<br/> partir de "+jsonDate.time.toLowerCase()}else if(site.availableInFewDays){if(availabilityJSON.cssClass=isGoogleShoppingContext?"delivery-day no-available":"delivery-day available-soon",!0===calculateDate)if(isGoogleShoppingContext)availabilityJSON.formattedDate="Retrait ds "+jsonDate.day+"<br/> partir de "+jsonDate.time.toLowerCase();else{delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);availabilityJSON.formattedDate=1==delayDay?'<span class="delivery-status">Disponible sur commande</span>Retrait ds demain<br/> partir de '+jsonDate.time.toLowerCase():'<span class="delivery-status">Disponible sur commande</span>Retrait ds le '+jsonDate.day+"<br/> partir de "+jsonDate.time.toLowerCase()}}else availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Indisponible en magasin":"Indisponible");return availabilityJSON}},getAvailabilityMobileData:function(site,calculateDate){var availabilityJSON={},jsonDate=null,isGoogleShoppingContext=(jsonDate=bl.delivery.deliveryDateFormat2(site.deliveryDateMin),!1);if(bl.catalog.productPage.googleShoppingContextualization&&bl.catalog.productPage.googleShoppingContextualization.isGoogleShoppingContext()&&(isGoogleShoppingContext=!0),void 0!==jsonDate){if(site.oneHourEligible&&!site.oneHourEligibleInFuture)availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Disponible en magasin<br/>Retrait sous 1H":'<span class="delivery-status">En stock</span> Retrait sous 1h');else if(site.oneHourEligibleInFuture)availabilityJSON.cssClass=isGoogleShoppingContext?"delivery-day available-soon":"delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Indisponible en magasin<br/>Retrait ds le "+jsonDate.day+"<br/>A partir de "+jsonDate.time:'<span class="delivery-status">En magasin</span> Retrait ds le '+jsonDate.day+"  partir de "+jsonDate.time.toLowerCase());else if(site.availableInFewDays){if(availabilityJSON.cssClass="delivery-day available-soon",!0===calculateDate)if(isGoogleShoppingContext)availabilityJSON.formattedDate="Indisponible en magasin<br/>Retrait ds le "+jsonDate.day+"<br/>A partir de "+jsonDate.time+"<br/>Sur commande";else{var delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);availabilityJSON.formattedDate=1==delayDay?'<span class="delivery-status">Disponible sur commande</span>Retrait ds demain  partir de '+jsonDate.time.toLowerCase():'<span class="delivery-status">Disponible sur commande</span>Retrait ds le '+jsonDate.day+"  partir de "+jsonDate.time.toLowerCase()}}else availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate=isGoogleShoppingContext?"Indisponible en magasin":"Indisponible");return availabilityJSON}},getAvailabilityDataForREM:function(site,calculateDate){var availabilityJSON={},jsonDate=null;if(void 0!==(jsonDate=bl.delivery.deliveryDateFormatDayMonth(site.deliveryDateMin)))return site.oneHourEligible&&!site.oneHourEligibleInFuture?(availabilityJSON.cssClass="availability",!0===calculateDate&&(availabilityJSON.formattedDate='<span class="delivery-status">En stock</span> Retrait possible sous 1h')):site.oneHourEligibleInFuture?(availabilityJSON.cssClass="availability notAvailable",!0===calculateDate&&(availabilityJSON.formattedDate="Retrait ds le "+jsonDate.day+"<br/> partir de "+jsonDate.time.toLowerCase())):site.availableInFewDays?(availabilityJSON.cssClass="availability notAvailable",!0===calculateDate&&(availabilityJSON.formattedDate="Retrait ds le "+jsonDate.day+"<br/> partir de "+jsonDate.time.toLowerCase())):(availabilityJSON.cssClass="availability notAvailable",!0===calculateDate&&(availabilityJSON.formattedDate="Indisponible")),availabilityJSON},getConsultAvailabilityData:function(site,calculateDate){var availabilityJSON={},delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);return delayDay=1==delayDay?'<span class="delivery-status">Disponible sur commande</span>ds demain':'<span class="delivery-status">Disponible sur commande</span>sous '+delayDay+" jours",site.oneHourEligible&&!site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate='<span class="delivery-status">En stock</span>')):site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=delayDay)):site.availableInFewDays?!0===calculateDate&&bl.delivery.deliveryDelayFormat(site.deliveryDateMin)?(availabilityJSON.cssClass="delivery-day available-soon",availabilityJSON.formattedDate=delayDay):(availabilityJSON.cssClass="delivery-day no-available",availabilityJSON.formattedDate="Indisponible"):(availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate="Indisponible")),availabilityJSON},getConsultMobileAvailabilityData:function(site,calculateDate){var availabilityJSON={},jsonDate=bl.delivery.deliveryDateFormat2(site.deliveryDateMin),delayDay=bl.delivery.deliveryDelayFormat(site.deliveryDateMin);if(void 0!==jsonDate)return delayDay=1==delayDay?'<span class="delivery-status">Disponible sur commande</span>ds demain':'<span class="delivery-status">Disponible sur commande</span>sous '+delayDay+" jours",site.oneHourEligible&&!site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate='<span class="delivery-status">En stock</span> Retrait sous 1h')):site.oneHourEligibleInFuture?(availabilityJSON.cssClass="delivery-day available",!0===calculateDate&&(availabilityJSON.formattedDate=delayDay)):site.availableInFewDays?(availabilityJSON.cssClass="delivery-day available-soon",!0===calculateDate&&(availabilityJSON.formattedDate=delayDay)):(availabilityJSON.cssClass="delivery-day no-available",!0===calculateDate&&(availabilityJSON.formattedDate="Indisponible")),availabilityJSON},getMonthByNumber:function(n){switch(n){case 1:"Janvier";break;case 2:"Fervrier";break;case 3:"Mars";break;case 4:"Avril";break;case 5:"Mai";break;case 6:"Juin";break;case 7:"Juillet";break;case 8:"Aot";break;case 9:"Septembre";break;case 10:"Octobre";break;case 11:"Novembre";break;case 12:"Dcembre"}return day},open24h:function(nextOpeningHour){return nextOpeningHour&&-1!=nextOpeningHour.indexOf("24h/24h")?"opened24h":""},showMapForCheckoutSelectRelayPopin:function(element,data){$j(element+" .googlemaps .mapframe").blGoogleMaps("initGMap",{context:$j(element+" .googlemaps .mapframe").parents(".view")}),$j(element+" .googlemaps .mapframe").blGoogleMaps("update",data)},showMapForNewCheckoutSelectRelayPopin:function(element,data){$j(element+" .map").blGoogleMaps("initGMapforRelay",{context:$j(element+" .map").parents(".modal")}),$j(element+" .map").blGoogleMaps("updateforRelay",data)},triggerPageLivraison:function(element){return function(){$j(element+" .display-sites .address-list .address-container label:first").trigger("click")}},showMapForNewCheckoutSelectRelayPopinTemp:function(element,data){$j(element+" .map").blGoogleMaps("initGMapforRelay",{context:$j(element+" .map").parents(".modal")}),$j(element+" .map").blGoogleMaps("updateforRelay",data),$j(element+" .display-sites .address-list .address-container label:first").trigger("click")},updateModalInformation:function(site){var tabs=$j("#modalRelaiCheckout .tabs li.current"),networkClass="",carrier=tabs.attr("data-carrier");if("INP"!=carrier&&"CHP_LOC"!=carrier&&"INP_CHP"!=carrier||(networkClass=".nav-schedules."+site.network),"CHP"==site.network){if(""!==site.deliveryDateMin&&null!==site.deliveryDateMin){tabs.find(networkClass+" .schedules-1").html(bl.delivery.formatDateChooseRelais(site.deliveryDateMin));var hour=bl.delivery.getHour(site.deliveryDateMin),indexH=hour.indexOf("h")+1;tabs.find(networkClass+" .schedules-2").html(hour.substring(0,indexH))}}else""!==site.deliveryDateMin&&null!==site.deliveryDateMin&&""!==site.deliveryDateMax&&null!==site.deliveryDateMax&&(tabs.find(networkClass+" .schedules-1").html(bl.delivery.formatDateChooseRelais(site.deliveryDateMin)),tabs.find(networkClass+" .schedules-2").html(bl.delivery.formatDateChooseRelais(site.deliveryDateMax)));0<tabs.find(".nav-price").length&&tabs.find(".nav-price").html(bl.delivery.formatFormatAmountWithOffert(site.deliveryCharge)),""!==networkClass&&"CHP"==site.network&&"X"==site.code.charAt(site.code.length-1)?($j(".nav-schedules.INP").hide(),$j(".nav-schedules.CHP").show()):($j(".nav-schedules.INP").show(),$j(".nav-schedules.CHP").hide())},storeDrive:function(site){return site.drive?"Retrait drive disponible":""}}),function($j){var id=null,context=null,maps={},geocoder=null,searchCache={},zipCodeAddress=null,marker=[],options={},labels="ABCDEFGHIJKLMNOPQRSTUVWXYZ",methods={init:function(options){},initGMap:function(pOptions){context=pOptions.context,options=$j.extend({mapSelector:".googlemaps .mapframe",id:context.attr("id")},pOptions),id=options.id;var mapOptions={zoom:10,center:new google.maps.LatLng(48.8567,2.3508),mapTypeId:google.maps.MapTypeId.ROADMAP},mapLocation=$j(options.mapSelector,context)[0];return $j.each($j(options.mapSelector,context),function(){$j(this).is(":visible")&&(mapLocation=this)}),maps[id]=new google.maps.Map(mapLocation,mapOptions),geocoder=new google.maps.Geocoder,this},initGMapforRelay:function(pOptions){context=pOptions.context,options=$j.extend({mapSelector:".map",id:context.attr("id")},pOptions),id=options.id;var mapOptions={zoom:10,center:new google.maps.LatLng(48.8567,2.3508),mapTypeId:google.maps.MapTypeId.ROADMAP},mapLocation=$j(options.mapSelector,context)[0];return $j.each($j(options.mapSelector,context),function(){$j(this).is(":visible")&&(mapLocation=this)}),maps[id]=new google.maps.Map(mapLocation,mapOptions),geocoder=new google.maps.Geocoder,this},update:function(data){context=$j(this).parents(".view"),id=context.attr("id");for(var i=0;i<marker.length;i++)marker[i].setMap(null);marker=[],data.sites.length+1;var temp=[];null!=(zipCodeAddress=$j("#sitesSearch",context).val())&&""!==zipCodeAddress&&(zipCodeAddress+=", France",methods.searchAddress(temp,zipCodeAddress,"wcsstore/assets/dist/images/common/googlemaps/blue-dot.png"));for(i=0;i<data.sites.length;i++)myMarker={identifier:data.sites[i].network+"-"+data.sites[i].code,address:bl.delivery.formatAddressForGmap(data.sites[i].address),image:"geoloc.png",index:i},null===data.sites[i].address.location||0===data.sites[i].address.location.lat||0===data.sites[i].address.location.lon?methods.searchAddress(temp,myMarker):(myMarker.location=new google.maps.LatLng(data.sites[i].address.location.lat,data.sites[i].address.location.lon),methods.searchLocation(temp,myMarker));0<temp.length&&(methods.addAddresses(temp),methods.focusAddress(data.sites[0],!0))},updateforRelay:function(data){context=$j(this).parents(".modal");id=context.attr("id");for(var i=0;i<marker.length;i++)marker[i].setMap(null);marker=[],data.sites.length+1;var temp=[];null!=(zipCodeAddress=$j("#relaySearchFormZipcode",context).val())&&""!==zipCodeAddress&&(zipCodeAddress+=", France",methods.searchAddress(temp,zipCodeAddress,"wcsstore/assets/dist/images/common/googlemaps/blue-dot.png"));for(i=0;i<data.sites.length;i++)myMarker={identifier:data.sites[i].network+"-"+data.sites[i].code,address:bl.delivery.formatAddressForGmap(data.sites[i].address),image:"geoloc.png",index:i},null===data.sites[i].address.location||0===data.sites[i].address.location.lat||0===data.sites[i].address.location.lon?methods.searchAddress(temp,myMarker):(myMarker.location=new google.maps.LatLng(data.sites[i].address.location.lat,data.sites[i].address.location.lon),methods.searchLocation(temp,myMarker));0<temp.length&&(methods.addAddresses(temp,!0),methods.focusAddress(data.sites[0],!0))},searchAddress:function(temp,myMarker){void 0!==searchCache[myMarker.address]?temp.push(searchCache[myMarker.address]):geocoder.geocode({address:myMarker.address},function(results,status){status==google.maps.GeocoderStatus.OK&&(myMarker.location=results[0].geometry.location,searchCache[myMarker.address]=myMarker,temp.push(searchCache[myMarker.address]),methods.addAddress(myMarker),0===myMarker.index&&methods.focusAddress(myMarker.address,!0))})},searchLocation:function(temp,myMarker){void 0!==searchCache[myMarker.address]||(searchCache[myMarker.address]=myMarker),temp.push(searchCache[myMarker.address])},addAddresses:function(temp,modalRelay){for(var i=0;i<temp.length;i++)temp[i].index=i,methods.addAddress(temp[i],modalRelay);google.maps.event.trigger(maps[id],"resize"),methods.focusAddress(zipCodeAddress,!1)},addAddress:function(myMarker,modalRelay){var i=marker.length,textLabel=void 0===myMarker.index?"":labels[myMarker.index%labels.length];modalRelay?marker.push(new google.maps.Marker({map:maps[id],position:myMarker.location,icon:{labelOrigin:new google.maps.Point(12,12),url:"/wcsstore/BoulangerStg/commerce/desktop/catalog/product/img/"+myMarker.image}})):marker.push(new google.maps.Marker({map:maps[id],position:myMarker.location,label:{text:textLabel,fontWeight:"bold",color:"#FFFFFF"},icon:{labelOrigin:new google.maps.Point(12,12),url:"/wcsstore/BoulangerStg/commerce/desktop/catalog/product/img/"+myMarker.image}})),google.maps.event.addListener(marker[i],"click",function(){if(maps[id].setZoom(12),maps[id].setCenter(marker[i].getPosition()),!$j.isBlank(myMarker.identifier)){var li=$j(".googlemaps .list label#"+myMarker.identifier,context);if(0<li.length)(container=li.parents(".list")).scrollTop(li.offset().top-container.offset().top+container.scrollTop()),container.animate({scrollTop:li.offset().top-container.offset().top+container.scrollTop()}),li.trigger("click");var container,address=$j("address#"+myMarker.identifier,context);if(0<address.length)(container=address.parents(".address-container")).scrollTop(address.offset().top-container.offset().top+container.scrollTop()),container.animate({scrollTop:address.offset().top-container.offset().top+container.scrollTop()}),address.trigger("click")}})},focusAddress:function(e,zoom){var address=e;e&&"string"!=typeof e&&(address=bl.delivery.formatAddressForGmap(e.address)),void 0!==searchCache[address]&&((void 0===zoom||zoom)&&maps[id].setZoom(12),maps[id].setCenter(searchCache[address].location))},focusAddressRelay:function(e,zoom){var address=e;if(e&&"string"!=typeof e&&(address=bl.delivery.formatAddressForGmap(e.address)),void 0!==searchCache[address]){for((void 0===zoom||zoom)&&maps[id].setZoom(12),i=0;i<marker.length;i++)marker[i].setIcon(bl.vars.imgDir+"GoogleMapImages/icon-map-blue.png");var index=searchCache[address].index;marker[index].setIcon(bl.vars.imgDir+"GoogleMapImages/icon-map-orange.png"),maps[id].setCenter(searchCache[address].location)}}};$j.fn.blGoogleMaps=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $j.error("Method "+method+" does not exist on jQuery.blGoogleMaps"):methods.init.apply(this,arguments)}}(jQuery),$j(document).ready(function(){var btnsDelivery=document.querySelectorAll(".btn__delivery");if(btnsDelivery&&0<btnsDelivery.length)for(var i=0;i<btnsDelivery.length;i++)btnsDelivery[i].addEventListener("click",function(){$j(".alert.alert-error.alert-merchant").toggle()})});var json2html={transform:function(t,e,n){var i={events:[],html:""},r={events:!1};if(r=json2html._extend(r,n),void 0!==e||void 0!==t){var s="string"==typeof t?JSON.parse(t):t;i=json2html._transform(s,e,r)}return r.events?i:i.html},_extend:function(t,e){var n={};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];return n},_append:function(t,e){var n={html:"",event:[]};return void 0!==t&&void 0!==e&&(n.html=t.html+e.html,n.events=t.events.concat(e.events)),n},_isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_transform:function(t,e,n){var i={events:[],html:""};if(json2html._isArray(t))for(var r=t.length,s=0;s<r;++s)i=json2html._append(i,json2html._apply(t[s],e,s,n));else"object"==typeof t&&(i=json2html._append(i,json2html._apply(t,e,void 0,n)));return i},_apply:function(t,e,n,i){var r={events:[],html:""};if(json2html._isArray(e))for(var s=e.length,o=0;o<s;++o)r=json2html._append(r,json2html._apply(t,e[o],n,i));else if("object"==typeof e){var l="<>";if(void 0===e[l]&&(l="tag"),void 0!==e[l]){var a=json2html._getValue(t,e,l,n);r.html+="<"+a;var h,c={events:[],html:""};for(var f in e)switch(f){case"tag":case"<>":break;case"text":var u=e[f];if(json2html._isArray(u));else if("function"==typeof u){var m=u.call(t,t,n);if(!json2html._isArray(m))switch(typeof m){case"function":case"undefined":case"object":break;default:c.html+=json2html.toText(m)}}else h=json2html.toText(json2html._getValue(t,e,f,n));break;case"children":case"html":if(u=e[f],json2html._isArray(u))c=json2html._append(c,json2html._apply(t,u,n,i));else if("function"==typeof u){if(m=u.call(t,t,n),!json2html._isArray(m))switch(typeof m){case"object":void 0!==m.html&&void 0!==m.events&&(c=json2html._append(c,m));break;case"function":case"undefined":break;default:c.html+=m}}else h=json2html._getValue(t,e,f,n);break;default:var d=!1;if(2<f.length&&"on"==f.substring(0,2).toLowerCase()){if(i.events){var v={action:e[f],obj:t,data:i.eventData,index:n},p=json2html._guid();r.events[r.events.length]={id:p,type:f.substring(2),data:v},r.html+=" json2html-event-id-"+f.substring(2)+"='"+p+"'"}d=!0}if(!d){var j,_=json2html._getValue(t,e,f,n);void 0!==_&&(j="string"==typeof _?'"'+_.replace(/"/g,"&quot;")+'"':_,r.html+=" "+f+"="+j)}}r.html+=">",h&&(r.html+=h),(r=json2html._append(r,c)).html+="</"+a+">"}}return r},_guid:function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+t()+"-"+t()+t()},_getValue:function(t,e,n,i){var r=e[n],s=typeof r;return"function"===s?r.call(t,t,i):"string"===s?new json2html._tokenizer([/\$\{([^\}\{]+)\}/],function(e,n,i){return n?e.replace(i,function(e,n){for(var i=n.split("."),r=t,s="",o=i.length,l=0;l<o&&(!(0<i[l].length)||null!==(r=r[i[l]])&&void 0!==r);++l);return null!=r&&(s=r),s}):e}).parse(r).join(""):r},toText:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\//g,"&#x2F;")},_tokenizer:function(t,e){if(!(this instanceof json2html._tokenizer))return new json2html._tokenizer(t,e);this.tokenizers=t.splice?t:[t],e&&(this.doBuild=e),this.parse=function(t){for(this.src=t,this.ended=!1,this.tokens=[];this.next(),!this.ended;);return this.tokens},this.build=function(t,e){t&&this.tokens.push(this.doBuild?this.doBuild(t,e,this.tkn):t)},this.next=function(){var t,e=this;e.findMin(),t=e.src.slice(0,e.min),e.build(t,!1),e.src=e.src.slice(e.min).replace(e.tkn,function(t){return e.build(t,!0),""}),e.src||(e.ended=!0)},this.findMin=function(){var t,e,n=this,i=0;for(n.min=-1,n.tkn="";void 0!==(t=n.tokenizers[i++]);)-1!=(e=n.src[t.test?"search":"indexOf"](t))&&(-1==n.min||e<n.min)&&(n.tkn=t,n.min=e);-1==n.min&&(n.min=n.src.length)}}};function json2html_events(t){for(var e=$(document.createElement("i")).html(t.html),n=0;n<t.events.length;n++){var o=t.events[n],s=$(e).find("[json2html-event-id-"+o.type+"='"+o.id+"']");if(0===s.length)throw"jquery.json2html was unable to attach event "+o.id+" to DOM";$(s).removeAttr("json2html-event-id-"+o.type),$(s).on(o.type,o.data,function(t){(t.data.event=t).data.action.call($(this),t.data)})}return $(e).children()}!function(t){t.json2html=function(e,n,o){if(void 0!==json2html){var s={output:"json2html"};switch(void 0!==o&&t.extend(s,o),s.output){case"json2html":return s.events=!0,json2html.transform(e,n,s);case"html":return s.events=!1,json2html.transform(e,n,s);case"jquery":return s.events=!1,json2html_events(json2html.transform(e,n,s))}}},t.fn.json2html=function(e,n,o){if(void 0!==json2html){var s={append:!0,replace:!1,prepend:!1,eventData:{}};return void 0!==o&&t.extend(s,o),s.events=!0,this.each(function(){var o=json2html_events(json2html.transform(e,n,s));s.replace?t.fn.replaceWith.call(t(this),o):s.prepend?t.fn.prepend.call(t(this),o):t.fn.append.call(t(this),o)})}}}(jQuery),void 0===bl&&(bl={}),void 0===bl.json2html&&(bl.json2html={}),$j.extend(bl.json2html,{getJson2HtmlFormat:function(template){return"pickUpSitesCatalogPopin"==template?pickUpSitesCatalogPopin.displayPickUpSitesInCatalogPopin:"userAreaFavoriteStoreMobile"==template?favoriteStorePopinInUserAreaMobile.displayStores:"checkoutPickUpSitePopinMobile"==template?pickUpSitesCheckOutPopinMobile.displayPickUpSitesPopinInCheckout:"storesCatalogPopin"==template?storesInCatalogPopin.displayStoresInCatalogPopin:"storesCatalogPickUpPopin"==template?storesInCatalogPopin.displayStoresInCatalogPickUpPopin:"storesCatalogPickUpAvailabilityPopin"==template?storesInCatalogPopin.displayStoresInCatalogPickAvailabilityUpPopin:"checkoutPickUpSitePopin"==template?pickUpSitesCheckOutPopin.displayPickUpSitesPopinInCheckout:"newCheckoutPickUpSitePopin"==template?newPickUpSitesCheckOutPopin.displayPickUpSitesPopinInCheckout:"userAreaFavoriteStore"==template?favoriteStorePopinInUserArea.displayStores:"mStorePickUp"==template?mobileTemplates.displayStorePickUpPage:"mStoreAvailability"==template?mobileTemplates.displayStoreAvailabilityPage:"mExpressRelayPickUpPopin"==template?mobileTemplates.displayExpressRelayPickUpPopin:"mStandardRelayPickUpPopin"==template?mobileTemplates.displayStandardRelayPickUpPopin:"mLockersPickUpPopin"==template?mobileTemplates.displayLockersPickUpPopin:"mStorePickUpPopin"==template?mobileTemplates.displayStorePickUpPopin:"mRelayPickUp"==template?mobileTemplates.displayRelayPickUpPage:"mRelaySelectPickUp"==template?mobileTemplates.displayRelaySelectPickUpPage:"mRelayCatalogPickUp"==template?mobileTemplates.displayRelayCatalogPickUpPage:"carglass"==template?favoriteStoreCarglass.displayStores:"pickUpSitePopinCarglass"==template?pickUpSitePopinCarglass.displayPickUpSitePopinCarglass:"mStorePickUpCarglass"==template?mobileTemplates.displayStorePickUpPageCarglass:"mRelayPickUpCarglass"==template?mobileTemplates.displayRelayPickUpPageCarglass:void 0}});var basePath="/webapp/wcs/stores/servlet/",pickUpSitesCheckOutPopin={displayPickUpSitesPopinInCheckout:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"mapframe_tunnel",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,pickUpSitesCheckOutPopin.displayPickUpSites)}}]}]}],displayPickUpSites:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){var typeLibelle="name-pickup relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle="name-pickup relay-name type-CHP"),"INP"==this.network&&(typeLibelle="name-pickup relay-name type-INP"),typeLibelle},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return"- "+this.formatDistance}},{tag:"span",class:function(){return"openedOrClosed "+this.openState+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:"adresse",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]},pickUpSitesCatalogPopin={displayPickUpSitesInCatalogPopin:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"map",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,pickUpSitesCatalogPopin.displayPickUpSites)}}]}]}],displayPickUpSites:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){var typeLibelle="name-pickup relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle="name-pickup relay-name type-CHP"),"INP"==this.network&&(typeLibelle="name-pickup relay-name type-INP"),typeLibelle},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return"- "+this.formatDistance}},{tag:"span",class:function(){return"openedOrClosed "+this.openState+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:"adresse",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]},storesInCatalogPopin={displayStoresInCatalogPopin:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"map",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,storesInCatalogPopin.displayStoresSites)}}]}]}],displayStoresSites:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"REMId",value:"${network}-${code}",id:"REM_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"REM_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){return"name-store"},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return null==this.formatDistance?"":"- "+this.formatDistance}},{tag:"span",class:function(){return"openedOrClosed "+this.openState+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:function(){var availabilityData=bl.delivery.getAvailabilityDataForREM(this,!1);return void 0===availabilityData?"availability notAvailable":availabilityData.cssClass},html:function(){var availabilityData=bl.delivery.getAvailabilityDataForREM(this,!0);return void 0===availabilityData?"Indisponible":availabilityData.formattedDate}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}},{tag:"div",class:"adresse",html:"${address.lines}<br>${address.zipCode} ${address.city}"}]}]}]}],displayStores:[{tag:"tr","data-id":"${code}",children:[{tag:"td",class:"date",html:function(){return bl.delivery.formatDateStores(this.deliveryDateMin)}},{tag:"td",class:"location",html:function(){return bl.delivery.formatStoresAddressForCatalogPopin(this)}},{tag:"td",class:"schedules",html:function(){return bl.delivery.formatStoresSchedulesForCatalogPopin(this.agendas)}}]}],displayStoresInCatalogPickUpPopin:[{tag:"div",class:"list",children:[{tag:"div",class:"info-tri",children:[{tag:"p",html:"Nos stocks magasin sont actualiss toutes les demi-heures."},{tag:"div",class:"triSelect",children:[{tag:"select",class:"dropdown",id:"dropdown",name:"type",children:[{tag:"option",value:"1",html:"Trier par distance"},{tag:"option",value:"0",html:"Trier par disponibilit"},{tag:"option",value:"2",html:"Trier par ordre alphabtique"},{tag:"option",value:"3",html:"Ouvert le plus tard"},{tag:"option",value:"4",html:"Ouvert le plus tt"}]}]}]},{tag:"div",class:"content-list",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,storesInCatalogPopin.displayPickUpStores)}}]}]}],displayPickUpStores:[{tag:"li",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},"data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",children:[{tag:"p",class:"name-mag",children:[{tag:"b",html:"${designation}",children:[{tag:"span",class:"length",html:function(){if(this.formatDistance)return" - "+this.formatDistance}}]},{tag:"span",class:function(){return""==bl.delivery.storeDrive(this)?"isDrive off":"isDrive"},html:function(){return bl.delivery.storeDrive(this)}},{tag:"span",class:function(){return"openedClosed "+this.openState},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}]},{tag:"p",class:function(){var availabilityData=bl.delivery.getAvailabilityData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getAvailabilityData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantit disponible : "+this.stock+"</span>"),displayAvailability}},{tag:"div",class:"content-button-retrait",children:[{tag:"a","data-modal-url":function(){return"true"==$j("#isDeliveryPage").val()?basePath+"catalog/storePickupUpdate":basePath+"catalog/storePickupConfirmation"},"data-type-panier-test-ab":"true",href:"javascript:void(0);",class:"popup button buttonOrange next REM",html:function(){return"true"==$j("#isDeliveryPage").val()||0<$j("#storemap-form").length?"Retirer en magasin":"Choisir ce magasin"}},{tag:"a","data-modal-url":function(){return"true"==$j("#isDeliveryPage").val()?basePath+"catalog/storePickupUpdate":basePath+"catalog/storePickupConfirmation"},"data-type-panier-test-ab":"true",href:"javascript:void(0);",class:function(){return""!=bl.delivery.storeDrive(this)?"popup button buttonOrange next drive":"popup button buttonOrange next drive off"},html:function(){if(""!=bl.delivery.storeDrive(this))return"Retirer en drive"}}]},{tag:"div",class:"info-mag",children:[{tag:"span",class:"adresse-mag",html:"${address.lines}<br>${address.zipCode} ${address.city}"},{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"span",class:"fermeture-info",html:"Fermer",children:[{tag:"img",src:function(){return $j("#urlImgFermer").val()},height:"15",border:"0",width:"14"}]}]}]}],displayStoresInCatalogPickAvailabilityUpPopin:[{tag:"div",class:"list",children:[{tag:"div",class:"info-tri",children:[{tag:"p",html:"Nos stocks magasin sont actualiss toutes les demi-heures."},{tag:"div",class:"triSelect",children:[{tag:"select",class:"dropdown",id:"dropdown",name:"type",children:[{tag:"option",value:"1",html:"Trier par distance"},{tag:"option",value:"0",html:"Trier par disponibilit"},{tag:"option",value:"2",html:"Trier par ordre alphabtique"},{tag:"option",value:"3",html:"Ouvert le plus tard"},{tag:"option",value:"4",html:"Ouvert le plus tt"}]}]}]},{tag:"div",class:"content-list",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,storesInCatalogPopin.displayPickUpStoresAvailability)}}]}]}],displayPickUpStoresAvailability:[{tag:"li",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},"data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",children:[{tag:"p",class:"name-mag",children:[{tag:"b",html:"${designation}",children:[{tag:"span",class:"length",html:function(){if(this.formatDistance)return" - "+this.formatDistance}}]},{tag:"span",class:function(){return"openedClosed "+this.openState},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}]},{tag:"p",class:function(){var availabilityData=bl.delivery.getAvailabilityData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getAvailabilityData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantit disponible : "+this.stock+"</span>"),displayAvailability}},{tag:"a","data-modal-url":function(){return"true"==$j("#isDeliveryPage").val()?basePath+"catalog/storePickupUpdate":basePath+"catalog/storePickupConfirmation"},"data-type-panier-test-ab":"true",href:"javascript:void(0);",class:"popup button buttonOrange next REM",html:function(){return"true"==$j("#isDeliveryPage").val()||0<$j("#storemap-form").length?"Retirer en magasin":"Choisir ce magasin"}},{tag:"div",class:"info-mag",children:[{tag:"span",class:"adresse-mag",html:"${address.lines}<br>${address.zipCode} ${address.city}"},{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"span",class:"fermeture-info",html:"Fermer",children:[{tag:"img",src:function(){return $j("#urlImgFermer").val()},height:"15",border:"0",width:"14"}]}]}]}]},pickUpSitesCheckOutPopinMobile={displayPickUpSitesPopinInCheckout:[{tag:"div",children:function(){return json2html.transform(this.sites,pickUpSitesCheckOutPopinMobile.displayPickUpSites)}}],displayPickUpSites:[{tag:"div",class:"oneAdress",children:[{tag:"div",class:"infotextInfos",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]},{tag:"div",class:"nameAdress",children:[{tag:"p",html:function(){return"<span>"+this.designation+"</span>&nbsp&nbsp<span class='distance'>"+this.formatDistance+"</span><br/><span class='relayAdress'>"+bl.delivery.formatAddress(this.address)+"</span>"}},{tag:"a",id:"${network}-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}","data-url":"/webapp/wcs/stores/servlet/BLAccountManageFavoriteRelayFormCmd",href:"#",class:"btnOrange",html:"CHOISIR"}]},{tag:"div",class:"accessMap",children:[{tag:"span",class:"accessMapSpan",html:"Plan d'acc&egrave;s et horaires"},{tag:"div",children:[{tag:"div",class:"collectAdressSelected",html:function(){return""}},{tag:"div",class:"map",html:"",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]}]},{tag:"div",class:"scheduleAdress",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]}]},favoriteStorePopinInUserAreaMobile={displayStores:[{tag:"div",children:function(){return json2html.transform(this.sites,favoriteStorePopinInUserAreaMobile.diplayStoreData)}}],diplayStoreData:[{tag:"div",class:"oneAdress",children:[{tag:"div",class:"infotextInfos",children:[{tag:"div",class:"infotextInfos",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]},{tag:"div",class:"nameAdress",children:[{tag:"p",html:function(){if(this.address&&this.address.zipCode){var displayedDistance="";return this.formatDistance&&(displayedDistance=""+this.formatDistance),"<span>"+this.designation+"&nbsp&nbsp</span><span class='distance'>"+displayedDistance+"</span>"}return""}},{tag:"a",id:"store-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}","data-url":"/webapp/wcs/stores/servlet/mUserRegistrationUpdate?action=editFavoriteStore",href:"#",class:"btnOrange changeFavStore",html:"CHOISIR"}]},{tag:"div",class:"accessMap",children:[{tag:"span",class:"accessMapSpan",html:"Plan d'acc&egrave;s et horaires"},{tag:"div",children:[{tag:"div",class:"collectAdressSelected",html:function(){return"<p>"+bl.delivery.formatAddress(this.address)+"</p>"}},{tag:"div",class:"map",html:"",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]}]},{tag:"div",class:"scheduleAdress",html:"<span>${storeHours}</span>"}]}]}]}]},favoriteStorePopinInUserArea={displayStores:[{tag:"h4",html:"Slectionnez un magasin dans la liste"},{tag:"p",html:"${sites.length} magasins correspondent  votre recherche, <br>du plus proche au plus loign dans un rayon de 100 km"},{tag:"div",class:"center_part","data-userclick":"1",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,favoriteStorePopinInUserArea.diplayStoreData)}}]},{tag:"div",class:"right_part",children:[{tag:"div",children:[{tag:"span",class:"subtitle",html:"Magasin slectionn :"},{tag:"h5",html:""},{tag:"p",class:"address",html:""},{tag:"span",class:"subtitle",html:"Horaires du magasin :"},{tag:"div",class:"time",html:""}]},{tag:"div",children:[{tag:"input",class:"submit_store_btn",type:"button","data-modal-url":"/webapp/wcs/stores/servlet/UserRegistrationUpdate?action=editFavoriteStore",value:"dfinir comme mon magasin favori",name:"submit"}]}]}],diplayStoreData:[{tag:"li",id:"store-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}",children:[{tag:"p",html:function(){if(this.address&&this.address.zipCode){var displayedDistance="";return this.formatDistance&&(displayedDistance="(env. "+this.formatDistance+")"),this.address.zipCode.substring(0,2)+" - "+this.designation+"<br>"+displayedDistance}return""}},{tag:"div",class:"data-address hidden",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"data-store-hours hidden",html:"${storeHours}"}]}]},favoriteStoreCarglass={displayStores:[{tag:"h4",html:"Slectionnez un magasin dans la liste"},{tag:"p",html:"${sites.length} magasins correspondent  votre recherche, <br>du plus proche au plus loign dans un rayon de 100 km"},{tag:"div",class:"center_part","data-userclick":"1",children:[{tag:"ul",children:function(){return json2html.transform(this.sites,favoriteStoreCarglass.diplayStoreData)}}]},{tag:"div",class:"right_part",children:[{tag:"div",children:[{tag:"span",class:"subtitle",html:"Magasin slectionn :"},{tag:"h5",html:""},{tag:"p",class:"address",html:""},{tag:"span",class:"subtitle",html:"Horaires du magasin :"},{tag:"div",class:"time",html:""}]},{tag:"input",class:"submit_store_btn_carglass",type:"button","data-modal-url":"/webapp/wcs/stores/servlet/BLCarglassDeliveryCmd?deliveryType=store",value:"Choisir ce magasin",name:"submit"}]}],diplayStoreData:[{tag:"li",id:"store-${code}","data-city":"${address.city}","data-zipcode":"${address.zipCode}","data-site-id":"${code}","data-store":"${designation}",children:[{tag:"p",html:function(){if(this.address&&this.address.zipCode){var displayedDistance="";return this.formatDistance&&(displayedDistance="(env. "+this.formatDistance+")"),this.address.zipCode.substring(0,2)+" - "+this.designation+"<br>"+displayedDistance}return""}},{tag:"div",class:"data-address hidden",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"data-store-hours hidden",html:"${storeHours}"}]}]},pickUpSitePopinCarglass={displayPickUpSitePopinCarglass:[{tag:"div",class:"googlemaps postal-content",children:[{tag:"div",class:"mapframe_tunnel",children:[{tag:"div",class:"mapframe"}]},{tag:"form",class:"formStoresList",children:[{tag:"div",class:"list",children:function(){return json2html.transform(this.sites,pickUpSitePopinCarglass.displayPickUpSitesCarglass)}}]}]}],displayPickUpSitesCarglass:[{tag:"div",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}",class:function(){var typeLibelle="name-pickup relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle="name-pickup relay-name type-CHP"),"INP"==this.network&&(typeLibelle="name-pickup relay-name type-INP"),typeLibelle},children:[{tag:"span",class:"icon"},{tag:"span",class:"title",html:function(){return this.designation}},{tag:"span",class:"distance",html:function(){return"- "+this.formatDistance}},{tag:"span",class:"openedOrClosed horaireCarglass",html:"J&apos;affiche les horaires d&apos;ouverture du point relais"},{tag:"span",class:"adresse",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"info-mag",children:[{tag:"ul",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>"),this.openingHoursByDay.Mardi&&(horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>"),this.openingHoursByDay.Mercredi&&(horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>"),this.openingHoursByDay.Jeudi&&(horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>"),this.openingHoursByDay.Vendredi&&(horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>"),this.openingHoursByDay.Samedi&&(horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>"),this.openingHoursByDay.Dimanche&&(horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>")),horaire}}]}]}]}]},newPickUpSitesCheckOutPopin={displayPickUpSitesPopinInCheckout:[{tag:"div",class:"relai-map",children:[{tag:"div",class:"map",id:"map-relay"},{tag:"p",class:"test ${param.preferredNetwork}",html:function(){var carrier=$j("[data-tab='tab-1'].current").attr("data-carrier");return"CHP"===carrier?"Les produits sont conservs 7 jours en point relais aprs la date de livraison":"INP"===carrier||"INP_CHP"===carrier||"CHP_LOC"===carrier?"Les produits sont conservs 3 jours en point consigne aprs la date de livraison":"Les produits sont conservs 10 jours en point relais aprs la date de livraison"}}]},{tag:"form",id:"updatePickUp-form",action:"#",method:"post",children:[{tag:"div",class:"address-list",children:[{tag:"div",class:"text-right",children:[{tag:"label",for:"",html:"Trier par:"},{tag:"select",children:[{tag:"option",value:"",html:"Distance"}]}]},{tag:"div",class:"address-container",children:function(){return json2html.transform(this.sites,newPickUpSitesCheckOutPopin.displayPickUpSites)}},{tag:"div",class:"text-center",children:[{tag:"button",class:"btn btn-orange",html:"VALIDER"}]}]}]}],displayPickUpSites:[{tag:"address",id:"${network}-${code}",class:function(){return this.oneHourEligible||this.availableInFewDays?"store-mag":"store-mag unavailable"},children:[{tag:"input",type:"radio",name:"relayId",value:"${network}-${code}",id:"relay_${code}","data-shipmode":function(){var shipModeId="";return $j("#shipModeId")&&$j("#shipModeId").val()&&(shipModeId=$j("#shipModeId").val()),shipModeId}},{tag:"label",for:"relay_${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",class:function(){var available="name-pickup input-radio",typeLibelle=available+" relay-name type-"+this.pickupType;return"CHP"==this.network&&(typeLibelle=available+" relay-name type-CHP"),"INP"==this.network&&(typeLibelle=available+" relay-name type-INP"),typeLibelle}},{tag:"div",class:"name",html:function(){return this.designation},children:[{tag:"span",class:"distance",html:function(){return" - "+this.formatDistance}}]},{tag:"div",class:"address-sites",html:function(){return bl.delivery.formatAddressForModalRelay(this.address)}},{tag:"div",class:function(){return"status "+this.openStateRelay+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"div",class:"delivery-bloc-info",children:[{tag:"button",class:"btn-close",type:"button"},{tag:"div",class:"table",children:[{tag:"div",id:"map-site-${address.location.lat}-${address.location.lon}",class:"cell cell-left"},{tag:"div",class:"cell cell-right",children:[{tag:"table",children:[{tag:"tbody",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<tr><td>Lundi</td><td>"+this.openingHoursByDay.Lundi+"</td></tr>"),this.openingHoursByDay.Mardi&&(horaire+="<tr><td>Mardi</td><td>"+this.openingHoursByDay.Mardi+"</td></tr>"),this.openingHoursByDay.Mercredi&&(horaire+="<tr><td>Mercredi</td><td>"+this.openingHoursByDay.Mercredi+"</td></tr>"),this.openingHoursByDay.Jeudi&&(horaire+="<tr><td>Jeudi</td><td>"+this.openingHoursByDay.Jeudi+"</td></tr>"),this.openingHoursByDay.Vendredi&&(horaire+="<tr><td>Vendredi</td><td>"+this.openingHoursByDay.Vendredi+"</td></tr>"),this.openingHoursByDay.Samedi&&(horaire+="<tr><td>Samedi</td><td>"+this.openingHoursByDay.Samedi+"</td></tr>"),this.openingHoursByDay.Dimanche&&(horaire+="<tr><td>Dimanche</td><td>"+this.openingHoursByDay.Dimanche+"</td</tr>")),horaire}}]}]}]}]}]}]},mobileTemplates={displayStorePickUpPage:[{tag:"div",class:"display-sites",html:function(){return json2html.transform(this.sites,mobileTemplates.storePickUp)}}],storePickUp:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},"data-site-id":"${code}",children:[{tag:"div",class:"storePickupTitle",children:[{tag:"h4",class:"cityName",html:"${designation}",children:[{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]},{tag:"p",class:function(){return""==bl.delivery.storeDrive(this)?"isDrive off":"isDrive"},html:function(){return bl.delivery.storeDrive(this)}}]},{tag:"div",class:"storePickupDetails",children:[{tag:"div",class:"storePickupAvailability",children:[{tag:"p",class:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getAvailabilityMobileData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantit disponible : "+this.stock+"</span>"),displayAvailability}}]},{tag:"div",class:"storePickupChooseButton",html:function(){if(void 0!==$j("#popinDeliveryStore")&&"true"==$j("#popinDeliveryStore").val())return"";if(0<$j("#deliveryPage").size())var urlSubmit="mBLMobileStoreUpdate?";else if(0<$j("#orderItemIdToUpdate").size())urlSubmit="mBLPickupInStoreOrderItemUpdate?";else urlSubmit="mBLPickupInStoreOrderItemAdd?";var orderItemToUpdateSplitted=null;if(0!=$j("#orderItemIdToUpdate").size()){var orderItemToUpdate=$j("#orderItemIdToUpdate").val();orderItemToUpdate=orderItemToUpdate.split(",");for(var i=0;i<orderItemToUpdate.length;i++)orderItemToUpdateSplitted+=orderItemToUpdate[i],i<=orderItemToUpdate.length-1&&(orderItemToUpdateSplitted+=",")}var urlParams="catalogId="+$j("#catalogId").val()+"&storeId="+$j("#storeId").val()+"&langId="+$j("#langId").val();orderItemToUpdateSplitted&&(urlParams+="&orderItemIdToUpdate="+orderItemToUpdateSplitted),0<$j("#catentryId").size()&&(urlParams+="&catEntryId="+$j("#catentryId").val()),0<$j("#orderId").size()&&(urlParams+="&orderId="+$j("#orderId").val()),0<$j("#numDeliveryPage").size()&&(urlParams+="&numDeliveryPage="+$j("#numDeliveryPage").val()),0<$j("#shipModeId").size()&&(urlParams+="&shipModeId="+$j("#shipModeId").val()),urlParams+="&siteId="+this.code+"&zipCode="+this.address.zipCode,urlSubmit+=urlParams+="&city="+encodeURIComponent(this.address.city)+"&favCodeMagasin="+this.code;var wordingButton="",styleButton="",conditions=!1;wordingButton=(conditions="true"==$j("#contextualisationForPopinStoreWording").val())?"Choisir":"Retirer en magasin",styleButton=conditions?"buttonChooseOrangeTunnelCommande":"buttonChooseOrange";var buttonDrive="<a href='javascript:void(0);' data-cart-url='"+urlSubmit+"&action=DRV' class='buttonChooseOrange buttonChooseOrangeBase x-addToMobileStore drive'>Retirer en drive</a>";return""==bl.delivery.storeDrive(this)&&(buttonDrive=""),'<a href="javascript:void(0);" data-cart-url=\''+urlSubmit+'&action=REM\' data-type-panier-test-ab="true" class="'+styleButton+' buttonChooseOrangeBase x-addToMobileStore REM">'+wordingButton+"</a>"+buttonDrive}}]},{tag:"div",class:"openingHours",html:function(){return json2html.transform(this,mobileTemplates.storePickUpDetails)}},{tag:"div",class:"map",children:[{tag:"div",class:"hours",html:function(){var horaire="";return this.openingHoursByDay&&(horaire+="<ul>",this.openingHoursByDay.Lundi?horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>":horaire+="<li><span class='left'>Lundi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mardi?horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>":horaire+="<li><span class='left'>Mardi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mercredi?horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>":horaire+="<li><span class='left'>Mercredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Jeudi?horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>":horaire+="<li><span class='left'>Jeudi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Vendredi?horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>":horaire+="<li><span class='left'>Vendredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Samedi?horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>":horaire+="<li><span class='left'>Samedi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Dimanche?horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>":horaire+="<li><span class='left'>Dimanche</span><span class='right'>Ferm&eacute;</span></li>",horaire+="</ul>"),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"address",children:[{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}]}],storePickUpDetails:[{tag:"p",html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}],displayStorePickUpPopin:[{tag:"form",html:function(){for(var html="",i=0;i<3;)void 0!==this.sites[i]&&""!==this.sites[i]&&(html+=json2html.transform(this.sites[i],mobileTemplates.storePickUpPopin)),i+=1;return html}}],storePickUpPopin:[{tag:"input",type:"radio",id:function(){return"storePickupType_"+this.network+"-"+this.code},name:"storePickupType"},{tag:"label",class:"white_block",for:function(){return"storePickupType_"+this.network+"-"+this.code},children:[{tag:"span",class:"line-1",children:[{tag:"span",class:"city",html:"${designation}"},{tag:"span",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]},{tag:"span",class:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!1);return void 0===availabilityData?"line-2 delivery-day no-available":"line-2 "+availabilityData.cssClass},html:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!0);return void 0===availabilityData?"Indisponible":availabilityData.formattedDate}},{tag:"span",class:"line-3",html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"span",class:"ctn-3",children:[{tag:"span",class:"left",html:function(){return"Lundi<br/>Mardi<br/>Mercredi<br/>Jeudi<br/>Vendredi<br/>Samedi<br/>Dimanche"}},{tag:"span",class:"right",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi?horaire+=this.openingHoursByDay.Lundi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Mardi?horaire+=this.openingHoursByDay.Mardi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Mercredi?horaire+=this.openingHoursByDay.Mercredi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Jeudi?horaire+=this.openingHoursByDay.Jeudi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Vendredi?horaire+=this.openingHoursByDay.Vendredi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Samedi?horaire+=this.openingHoursByDay.Samedi+"<br/>":horaire+="Ferm&eacute;<br/>",this.openingHoursByDay.Dimanche?horaire+=this.openingHoursByDay.Dimanche+"<br/>":horaire+="Ferm&eacute;<br/>"),horaire}},{tag:"div",class:"border"},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"span",class:"adress",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}],displayStoreAvailabilityPage:[{tag:"div",class:"display-sites",html:function(){return json2html.transform(this.sites,mobileTemplates.storePickUp)}}],storeAvailability:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"div",class:"storePickupTitle",children:[{tag:"h4",class:"cityName",html:"${designation}",children:[{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]}]},{tag:"div",class:"storePickupDetails",children:[{tag:"div",class:"storePickupAvailability",children:[{tag:"p",class:function(){var availabilityData=bl.delivery.getConsultMobileAvailabilityData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getConsultMobileAvailabilityData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantit disponible : "+this.stock+"</span>"),displayAvailability}}]},{tag:"div",class:"storePickupChooseButton",html:function(){var urlSubmit=null;urlSubmit=0<$j("#deliveryPage").size()?"mBLMobileStoreUpdate?":0<$j("#orderItemIdToUpdate").size()?"mBLPickupInStoreOrderItemUpdate?":"mBLPickupInStoreOrderItemAdd?";var orderItemToUpdateSplitted=null;if(0!=$j("#orderItemIdToUpdate").size()){var orderItemToUpdate=$j("#orderItemIdToUpdate").val();orderItemToUpdate=orderItemToUpdate.split(",");for(var i=0;i<orderItemToUpdate.length;i++)orderItemToUpdateSplitted+=orderItemToUpdate[i],i<=orderItemToUpdate.length-1&&(orderItemToUpdateSplitted+=",")}var urlParams="catalogId="+$j("#catalogId").val()+"&storeId="+$j("#storeId").val();return urlParams=urlParams+"&langId="+$j("#langId").val(),orderItemToUpdateSplitted&&(urlParams=urlParams+"&orderItemIdToUpdate="+orderItemToUpdateSplitted),0<$j("#catentryId").size()&&(urlParams=urlParams+"&catEntryId="+$j("#catentryId").val()),0<$j("#orderId").size()&&(urlParams=urlParams+"&orderId="+$j("#orderId").val()),0<$j("#numDeliveryPage").size()&&(urlParams=urlParams+"&numDeliveryPage="+$j("#numDeliveryPage").val()),0<$j("#shipModeId").size()&&(urlParams=urlParams+"&shipModeId="+$j("#shipModeId").val()),""==bl.delivery.storeDrive(this)?urlParams+="&action=REM":urlParams+="&action=DRV",'<a href="javascript:void(0);" data-cart-url='+(urlSubmit+=urlParams=(urlParams=urlParams+"&siteId="+this.code+"&zipCode="+this.address.zipCode)+"&city="+encodeURIComponent(this.address.city)+"&favCodeMagasin="+this.code)+' class="buttonChooseOrange buttonChooseOrangeBase buttonPickup x-addToMobileStore">Retirer en magasin</a>'}}]},{tag:"div",class:"openingHours",html:function(){return json2html.transform(this,mobileTemplates.storeAvailabilityDetails)}},{tag:"div",class:"map",children:[{tag:"div",class:"hours",html:function(){var horaire="";return this.openingHoursByDay&&(horaire+="<ul>",this.openingHoursByDay.Lundi?horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>":horaire+="<li><span class='left'>Lundi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mardi?horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>":horaire+="<li><span class='left'>Mardi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mercredi?horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>":horaire+="<li><span class='left'>Mercredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Jeudi?horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>":horaire+="<li><span class='left'>Jeudi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Vendredi?horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>":horaire+="<li><span class='left'>Vendredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Samedi?horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>":horaire+="<li><span class='left'>Samedi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Dimanche?horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>":horaire+="<li><span class='left'>Dimanche</span><span class='right'>Ferm&eacute;</span></li>",horaire+="</ul>"),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"address",children:[{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}]}],storeAvailabilityDetails:[{tag:"p",html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}}],displayRelayPickUpPage:[{tag:"div",html:function(){return json2html.transform(this.sites,mobileTemplates.relayPickUp)}}],relayPickUp:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"h4",class:"cityName",children:[{tag:"p",html:"${designation}"}]},{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" "+this.formatDistance:""}},{tag:"div",class:"address",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"openingHours",children:[{tag:"p",class:"${network}",html:"J&apos;affiche le plan d&apos;accs et les horaires d&apos;ouverture"},{tag:"div",children:[{tag:"a",class:"buttonOrange",html:"Je choisis",href:function(){return $j("#urlPickupPointSelection").val()+"&shipModeId="+this.shipModeId+"&checkedId="+this.network+"-"+this.code}}]}]},{tag:"div",class:"map",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"hours",html:function(){if(null!=this.nextOpeningHour&&-1!=this.nextOpeningHour.indexOf("24h/24h"))return this.nextOpeningHour;var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<p><span>Lundi :</span>"+this.openingHoursByDay.Lundi+"</p>"),this.openingHoursByDay.Mardi&&(horaire+="<p><span>Mardi :</span>"+this.openingHoursByDay.Mardi+"</p>"),this.openingHoursByDay.Mercredi&&(horaire+="<p><span>Mercredi :</span>"+this.openingHoursByDay.Mercredi+"</p>"),this.openingHoursByDay.Jeudi&&(horaire+="<p><span>Jeudi :</span>"+this.openingHoursByDay.Jeudi+"</p>"),this.openingHoursByDay.Vendredi&&(horaire+="<p><span>Vendredi :</span>"+this.openingHoursByDay.Vendredi+"</p>"),this.openingHoursByDay.Samedi&&(horaire+="<p><span>Samedi :</span>"+this.openingHoursByDay.Samedi+"</p>"),this.openingHoursByDay.Dimanche&&(horaire+="<p><span>Dimanche :</span>"+this.openingHoursByDay.Dimanche+"</p>")),horaire}}]}]}],displayRelayCatalogPickUpPage:[{tag:"div",html:function(){return json2html.transform(this.sites,mobileTemplates.relayCatalogPickUp)}}],relayCatalogPickUp:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"h4",class:"cityName",children:[{tag:"p",html:"${designation}"}]},{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" "+this.formatDistance:""}},{tag:"div",class:"address",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"openingHours catalog",children:[{tag:"p",class:"${network}",html:"J&apos;affiche le plan d&apos;accs et les horaires d&apos;ouverture"}]},{tag:"div",class:"map",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"hours",html:function(){if(null!=this.nextOpeningHour&&-1!=this.nextOpeningHour.indexOf("24h/24h"))return this.nextOpeningHour;var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<p><span>Lundi :</span>"+this.openingHoursByDay.Lundi+"</p>"),this.openingHoursByDay.Mardi&&(horaire+="<p><span>Mardi :</span>"+this.openingHoursByDay.Mardi+"</p>"),this.openingHoursByDay.Mercredi&&(horaire+="<p><span>Mercredi :</span>"+this.openingHoursByDay.Mercredi+"</p>"),this.openingHoursByDay.Jeudi&&(horaire+="<p><span>Jeudi :</span>"+this.openingHoursByDay.Jeudi+"</p>"),this.openingHoursByDay.Vendredi&&(horaire+="<p><span>Vendredi :</span>"+this.openingHoursByDay.Vendredi+"</p>"),this.openingHoursByDay.Samedi&&(horaire+="<p><span>Samedi :</span>"+this.openingHoursByDay.Samedi+"</p>"),this.openingHoursByDay.Dimanche&&(horaire+="<p><span>Dimanche :</span>"+this.openingHoursByDay.Dimanche+"</p>")),horaire}}]}]}],displayExpressRelayPickUpPopin:[{tag:"div",id:function(){return this.sites[0].network+"-"+this.sites[0].code},class:"display-express-first-site",html:function(){return json2html.transform(this.sites[0],mobileTemplates.displayRelayPickUpPopin)}}],displayStandardRelayPickUpPopin:[{tag:"div",id:function(){return this.sites[0].network+"-"+this.sites[0].code},class:"display-standard-first-site",html:function(){return json2html.transform(this.sites[0],mobileTemplates.displayRelayPickUpPopin)}}],displayLockersPickUpPopin:[{tag:"div",id:function(){return this.sites[0].network+"-"+this.sites[0].code},class:"display-lockers-first-site",html:function(){return json2html.transform(this.sites[0],mobileTemplates.displayRelayPickUpPopin)}}],displayRelayPickUpPopin:[{tag:"span",html:"${designation}"},{tag:"span",html:function(){return" - "+this.formatDistance+"<br/>"}},{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}],displayStorePickUpPageCarglass:[{tag:"div",class:"display-sites",html:function(){return json2html.transform(this.sites,mobileTemplates.storePickUpCarglass)}}],storePickUpCarglass:[{tag:"div",class:function(){return this.oneHourEligible||this.availableInFewDays?"white_block":"white_block indispo"},children:[{tag:"div",class:"storePickupTitle",children:[{tag:"h4",class:"cityName",html:"${designation}",children:[{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" - "+this.formatDistance:""}}]}]},{tag:"div",class:"storePickupDetails",children:[{tag:"div",class:"storePickupAvailability",children:[{tag:"p",class:function(){var availabilityData=bl.delivery.getAvailabilityMobileData(this,!1);return void 0===availabilityData?"delivery-day no-available":availabilityData.cssClass},html:function(){var displayAvailability="",availabilityData=bl.delivery.getAvailabilityMobileData(this,!0);return displayAvailability=void 0===availabilityData?"Indisponible":availabilityData.formattedDate,bl.cookie.isVenteCookieExist()&&"Indisponible"!==displayAvailability&&(displayAvailability+="<br/><span class='sellerQty'>Quantit disponible : "+this.stock+"</span>"),displayAvailability}}]},{tag:"div",class:"storePickupChooseButton",html:function(){var urlSubmit="mCarglassValidateCmd?",voucherCode=$j("#voucherCode").attr("value"),urlParams="catalogId="+$j("#catalogId").val()+"&storeId="+$j("#storeId").val();return"<a href="+(urlSubmit+=urlParams=(urlParams=urlParams+"&langId="+$j("#langId").val())+"&storeCode="+this.code+"&voucherCode="+voucherCode+"&deliveryType=store")+' class="buttonChooseOrange buttonChooseOrangeBase x-addToMobileStore">Je choisis</a>'}}]},{tag:"div",class:"openingHours",html:function(){return json2html.transform(this,mobileTemplates.storeAvailabilityDetails)}},{tag:"div",class:"map",children:[{tag:"div",class:"hours",html:function(){var horaire="";return this.openingHoursByDay&&(horaire+="<ul>",this.openingHoursByDay.Lundi?horaire+="<li><span class='left'>Lundi</span><span class='right'>"+this.openingHoursByDay.Lundi+"</span></li>":horaire+="<li><span class='left'>Lundi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mardi?horaire+="<li><span class='left'>Mardi</span><span class='right'>"+this.openingHoursByDay.Mardi+"</span></li>":horaire+="<li><span class='left'>Mardi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Mercredi?horaire+="<li><span class='left'>Mercredi</span><span class='right'>"+this.openingHoursByDay.Mercredi+"</span></li>":horaire+="<li><span class='left'>Mercredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Jeudi?horaire+="<li><span class='left'>Jeudi</span><span class='right'>"+this.openingHoursByDay.Jeudi+"</span></li>":horaire+="<li><span class='left'>Jeudi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Vendredi?horaire+="<li><span class='left'>Vendredi</span><span class='right'>"+this.openingHoursByDay.Vendredi+"</span></li>":horaire+="<li><span class='left'>Vendredi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Samedi?horaire+="<li><span class='left'>Samedi</span><span class='right'>"+this.openingHoursByDay.Samedi+"</span></li>":horaire+="<li><span class='left'>Samedi</span><span class='right'>Ferm&eacute;</span></li>",this.openingHoursByDay.Dimanche?horaire+="<li><span class='left'>Dimanche</span><span class='right'>"+this.openingHoursByDay.Dimanche+"</span></li>":horaire+="<li><span class='left'>Dimanche</span><span class='right'>Ferm&eacute;</span></li>",horaire+="</ul>"),horaire}},{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"address",children:[{tag:"span",html:function(){return bl.delivery.formatAddress(this.address)}}]}]}]}],storePickUpDetailsCarglass:[{tag:"p",class:"",children:[{tag:"span",html:"J&apos;affiche les horaires d&apos;ouverture et coordonn&eacute;es du magasin"}]}],displayRelayPickUpPageCarglass:[{tag:"div",html:function(){return json2html.transform(this.sites,mobileTemplates.relayPickUpCarglass)}}],relayPickUpCarglass:[{tag:"div",class:function(){return"white_block"},children:[{tag:"h4",class:"cityName",children:[{tag:"p",html:"${designation}"}]},{tag:"span",class:"distance",html:function(){return this.formatDistance&&0<this.formatDistance.length?" "+this.formatDistance:""}},{tag:"div",class:"address",html:function(){return bl.delivery.formatAddress(this.address)}},{tag:"div",class:"openingHours",children:[{tag:"p",class:"${network}",html:"J&apos;affiche le plan d&apos;accs et les horaires d&apos;ouverture"},{tag:"div",children:[{tag:"a",class:"buttonOrange",html:"Je choisis",href:function(){return $j("#urlPickupPointSelection").val()+"&shipModeId="+this.shipModeId+"&relayId="+this.network+"-"+this.code}}]}]},{tag:"div",class:"map",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"hours",html:function(){if(null!=this.nextOpeningHour&&-1!=this.nextOpeningHour.indexOf("24h/24h"))return this.nextOpeningHour;var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<p><span>Lundi :</span>"+this.openingHoursByDay.Lundi+"</p>"),this.openingHoursByDay.Mardi&&(horaire+="<p><span>Mardi :</span>"+this.openingHoursByDay.Mardi+"</p>"),this.openingHoursByDay.Mercredi&&(horaire+="<p><span>Mercredi :</span>"+this.openingHoursByDay.Mercredi+"</p>"),this.openingHoursByDay.Jeudi&&(horaire+="<p><span>Jeudi :</span>"+this.openingHoursByDay.Jeudi+"</p>"),this.openingHoursByDay.Vendredi&&(horaire+="<p><span>Vendredi :</span>"+this.openingHoursByDay.Vendredi+"</p>"),this.openingHoursByDay.Samedi&&(horaire+="<p><span>Samedi :</span>"+this.openingHoursByDay.Samedi+"</p>"),this.openingHoursByDay.Dimanche&&(horaire+="<p><span>Dimanche :</span>"+this.openingHoursByDay.Dimanche+"</p>")),horaire}}]}]}],displayRelaySelectPickUpPage:[{tag:"label",html:"Trier par:"},{tag:"select",id:"",children:[{tag:"option",value:"",html:"Distance"}]},{tag:"div",class:"address-container",children:function(){return json2html.transform(this.sites,mobileTemplates.relaySelectPickUp)}}],relaySelectPickUp:[{tag:"address",class:"white_block",children:[{tag:"input",id:"${network}-${code}",name:"checkedId",value:"${network}-${code}",type:"radio"},{tag:"label",for:"${network}-${code}",id:"${network}-${code}","data-store":"${designation}","data-site-id":"${code}","data-zipcode":"${address.zipCode}","data-city":"${address.city}","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",class:"input-radio"},{tag:"div",class:"name",html:function(){return this.designation},children:[{tag:"span",class:"distance",html:function(){return" - "+this.formatDistance}}]},{tag:"div",class:"address-sites",html:function(){return bl.delivery.formatAddressForModalRelay(this.address)}},{tag:"div",class:function(){return"status "+this.openStateRelay+" "+bl.delivery.open24h(this.nextOpeningHour)},html:function(){if(this.nextOpeningHour)return this.nextOpeningHour}},{tag:"div",class:"delivery-bloc-info",children:[{tag:"div",class:"map_canvas","data-latitude":"${address.location.lat}","data-longitude":"${address.location.lon}",children:[{tag:"div",class:"loader",html:""},{tag:"div",class:"infotext",children:[{tag:"div",class:"location",html:function(){return this.address.lines[0]}},{tag:"div",class:"address",html:function(){return this.address.lines[1]?this.address.lines[1]:(this.address.lines[2],this.address.lines[2])}},{tag:"div",class:"zip",html:"${address.zipCode}"},{tag:"div",class:"city",html:"${address.city}"},{tag:"div",class:"zoom",html:"17"},{tag:"div",class:"latitude",html:"${address.location.lat}"},{tag:"div",class:"longitude",html:"${address.location.lon}"}]}]},{tag:"div",class:"table",children:[{tag:"table",children:[{tag:"tbody",html:function(){var horaire="";return this.openingHoursByDay&&(this.openingHoursByDay.Lundi&&(horaire+="<tr><td>Lundi</td><td>"+this.openingHoursByDay.Lundi+"</td></tr>"),this.openingHoursByDay.Mardi&&(horaire+="<tr><td>Mardi</td><td>"+this.openingHoursByDay.Mardi+"</td></tr>"),this.openingHoursByDay.Mercredi&&(horaire+="<tr><td>Mercredi</td><td>"+this.openingHoursByDay.Mercredi+"</td></tr>"),this.openingHoursByDay.Jeudi&&(horaire+="<tr><td>Jeudi</td><td>"+this.openingHoursByDay.Jeudi+"</td></tr>"),this.openingHoursByDay.Vendredi&&(horaire+="<tr><td>Vendredi</td><td>"+this.openingHoursByDay.Vendredi+"</td></tr>"),this.openingHoursByDay.Samedi&&(horaire+="<tr><td>Samedi</td><td>"+this.openingHoursByDay.Samedi+"</td></tr>"),this.openingHoursByDay.Dimanche&&(horaire+="<tr><td>Dimanche</td><td>"+this.openingHoursByDay.Dimanche+"</td</tr>")),horaire}}]}]}]}]}]};function addiOSMetaData(){if(0===$j("meta[name=apple-itunes-app]").length){$j("head").append("\n\x3c!-- START iOS META --\x3e<meta name='apple-itunes-app' content='app-id=401920975, affiliate-data=at=1001lnWM&ct=smart_app_banner_bcom_ios&pt=447572'>\x3c!-- END --\x3e")}}function addAndroidManifestFile(){if(0===$j("link[rel=manifest]").length){$j("head").append("\n\x3c!-- START Diving Deep Android link manifest--\x3e<link rel='manifest' href='/webapp/wcs/stores/BoulangerStg/statics/plugins/json/webapp_android_manifest.json'>\x3c!-- END --\x3e")}}if(void 0===bl&&(bl={}),void 0===bl.google&&(bl.google={}),$j.extend(bl.google,{isLoaded:function(){return"undefined"!=typeof google&&void 0!==google.maps},initAPI:function(callbackName,callback,arg1,arg2){var logger=new BoulangerLogData;if("undefined"==typeof google||void 0===google.maps){var url=bl.apiGoogleMaps+"&key="+bl.googleMapApiKey+"&sensor=false";logger.add("API Google","Chargement des APIs Google:"+url),$j.getScript(url).done(function(script,textStatus){logger.add("API Google","APIs charg"),void 0!==callback&&(logger.add("API Google","Appel de la methode callback:"+callbackName),void 0===arg1?callback():void 0!==arg2?(logger.add("API Google","Avec les paramtres:"+arg1+"-"+arg2),callback.call(this,arg1,arg2)):(logger.add("API Google","Avec le paramtre:"+arg1),callback.call(this,arg1))),logger.log()}).fail(function(jqxhr,settings,exception){logger.add("API Google","Une erreur est intevenue lors du chargement des APIs"),logger.log()})}else logger.add("API Google","APIs Google OK"),logger.log()},initAPILivraison:function(callback1,callback2Name,callback2,arg1,arg2){var logger=new BoulangerLogData;if("undefined"==typeof google||void 0===google.maps){var url=bl.apiGoogleMaps+"&key="+bl.googleMapApiKey+"&sensor=false";logger.add("API Google","Chargement des APIs Google:"+url),$j.getScript(url).done(function(script,textStatus){logger.add("API Google","APIs charg"),void 0!==callback2&&(logger.add("API Google","Appel de la methode callback:"+callback2Name),void 0===arg1?callback2():void 0!==arg2?(logger.add("API Google","Avec les paramtres:"+arg1+"-"+arg2),callback2.call(this,arg1,arg2)):(logger.add("API Google","Avec le paramtre:"+arg1),callback2.call(this,arg1))),logger.log(),void 0!==callback1&&callback1()}).fail(function(jqxhr,settings,exception){logger.add("API Google","Une erreur est intevenue lors du chargement des APIs"),logger.log()})}else logger.add("API Google","APIs Google OK"),logger.log()}}),$j(document).ready(function(){"true"===bl.showSmartAppBannerAndroid&&addAndroidManifestFile(),"true"===bl.showSmartAppBanneriOS&&addiOSMetaData()}),void 0===typeof $j)var $j=jQuery.noConflict();var loadingLayerHandle=null,options_closure;function showLoadingLayer(){if(0<$j("#blLoadingLayer").length)return $j("#blLoadingLayer .popup").css({top:$j(window).scrollTop()+100+"px","z-index":Box.zdIndex+100}),void $j("#blLoadingLayer").show();var html=$j('<div id="blLoadingLayer"></div>').css({height:$j(document).height()+"px"});$j(html).append('<div class="background"></div>'),/opera/.test(navigator.userAgent.toLowerCase())||$j(".background",html).css({height:$j(document).height()+"px"}),$j(html).append('<div class="popup"></div>'),$j(".popup",html).css({top:$j(window).scrollTop()+100+"px"});var path="wcsstore/boulangerstg/statics/plugins/loader/img/ajax-loader.gif";void 0!==bl&&void 0!==bl.vars&&void 0!==bl.vars.imgDir&&(path="wcsstore/boulangerstg/statics/plugins/loader/img/ajax-loader.gif"),$j(".popup",html).append('<img src="'+path+'" width="100" height="100" alt="Chargement..." />'),$j(".popup",html).append("<p>Nous traitons votre demande, merci de patienter.</p>"),$j("body").append(html),$j("#blLoadingLayer").css("z-index",Box.zdIndex+100),loadingLayerHandle=setTimeout(hideLoadingLayer,12e4)}function hideLoadingLayer(){0<$j("#blLoadingLayer").length&&$j("#blLoadingLayer").hide(),null!=loadingLayerHandle&&(clearTimeout(loadingLayerHandle),loadingLayerHandle=null)}var Box={el:null,boxs:[],defaults:{loading:!0,element:null,html:null,modal:!1,show:null,close:null,top:0,left:0,url:null,urldata:null,width:0,height:0,type:"GET"},open:function(pOptions){"use strict";var options={};$j.extend(options,Box.defaults,pOptions);var cacheUrl=!(options_closure=function(){return options});null!==options.url?(-1!==options.url.indexOf("cacheUrl")&&(cacheUrl=!0),options.loading&&showLoadingLayer(),$j.ajax({type:options.type,url:options.url,data:options.urldata,cache:cacheUrl,success:function(html){options.html=html,Box.load(options)}})):Box.load(options)},load:function(options){"use strict";if(options.loading&&hideLoadingLayer(),void 0!==options.html&&""!==options.html||null!==options.element){var B=$j("#modalContainerDiv");0===B.length&&(B=$j('<div id="modalContainerDiv"></div>').prependTo("body")),0===(B=$j("#modalContainerDiv-"+Box.boxs.length)).length&&(B=$j('<div class="modalContainerDiv" id="modalContainerDiv-'+Box.boxs.length+'" style="display:none;"></div>').appendTo("#modalContainerDiv")),B.attr("data-box-id",Box.boxs.length),B.empty().prepend('<div class="black_box" onclick="closeModal();"></div>'),options.element?Box.el=$j(options.element).clone().prependTo(B):Box.el=$j(options.html).prependTo(B),$j(".modalContainerDiv").show();var top=options.top;0===top&&(top=$j(window).scrollTop()+$j(window).height()/2-B.children().height())<50&&(top=50);var maxWidth=0;B.children("div").each(function(index){!isNaN($j(this).width())&&$j(this).width()>maxWidth&&(maxWidth=$j(this).width())}),Box.boxs.push({options:options,el:Box.el,id:Box.boxs.length}),Box.events(options),$j(".black_box").show()}},events:function(options){"use strict";$j(".pp_modal_close").click(function(){return Box.close(this),!1}),$j("#modal-error-layer .bt_modal_close").click(function(){return Box.close(this),!1}),$j("#num_1 .modal_close_bottom").click(function(){return Box.close(this),!1}),$j("#modal-comparaison .zone-haut .fermer").click(function(){return Box.close(this),!1}),$j("#modal-comparaison .bt-retour").click(function(){return Box.close(this),!1}),$j("#modal-comparaison .bt-continuer").click(function(){return Box.close(this),!1}),$j(".modal_close, #modal_close, .close_modal, #close_modal, .close_box").click(function(){return Box.close(this),!1}),$j(document).one("keydown",function(e){if(27===e.which)return Box.close(),!1}),"function"==typeof options.show&&options.show()},_close:function(trigger){"use strict";Box.close(trigger)},close:function(trigger){"use strict";if(0!==Box.boxs.length){var box=Box.boxs[Box.boxs.length-1];if("object"==typeof trigger){var id=$j(trigger).parents(".modalContainerDiv").attr("data-box-id");if(!$j.isNumeric(id)||id!=box.id)return}(box=Box.boxs.pop()).el.parent(".modalContainerDiv, .modal-overlay").remove(),hideLoadingLayer(),0<Box.boxs.length?"function"==typeof box.options.close&&box.options.close():(box.el.fadeOut(400,function(){"function"==typeof box.options.close&&box.options.close()}),$j("#modalContainerDiv").remove())}},_closeInfo:function(){"use strict";return $j("#info-planning").remove(),!1}};function closeModal(){"use strict";0===$j("#addDelivery_modal, #validationCarglass").length&&Box._close()}if(function($j){"use strict";$j.fn.openModal=function(pOptions){$j.extend({modal:!0},pOptions);return $j(this).each(function init(args){$j(this).unbind("click").bind("click",function(e){var modalUrl=$j(this).attr("data-modal-url");return void 0!==$j(this).parents("#pp").html()&&tc_events_global(this,"standard",{event_name:"Clics_Fiches_produits::services_en_savoir_plus",event_type:"A"}),null==modalUrl||""===modalUrl||(Box.open({modal:!0,url:modalUrl}),e.preventDefault()),!1})}),$j(this)}}(jQuery),$j(document).ready(function(){}),jQuery.fn.cnil=function(options){var A,settings=$j.extend({cofaxUrl:"javascript:void(0);",cookieName:"cnil",handleAllClicks:!0,display:0},options),getWidthWindow=function(){return $j(window).width()},vLayer=jQuery("#layerCookies");if(1==settings.display&&1!=(A=settings.cookieName,0<document.cookie.length&&(c_start=document.cookie.indexOf(A+"="),-1!=c_start)?(c_start=c_start+A.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):"")&&!vLayer.length){var layer;layer="<div id='layerCookies' style=\"display:none;\">",layer+="<p align='right' class='layerCookieRight'>",layer+="<a href='#' class='close'>X</a>",layer+="</p>",layer+="<p align='left' class='layerCookieLeft' style='line-height: 14px;'>",layer+="<em>En poursuivant votre navigation,  vous acceptez l'utilisation des cookies pour disposer de contenus adapt&eacute;s &agrave; vos centres d'int&eacute;r&ecirc;t et am&eacute;liorer votre exp&eacute;rience sur le site. </em><em>Pour en savoir plus et g&eacute;rer vos param&egrave;tres, </em>",layer+="<a href='"+unsecureBaseHref+settings.cofaxUrl+"' target='_blank'>cliquez ici</a>",layer+="</p>",layer+="<div style='clear:both;'> </div>",layer+="</div>",$j("body").prepend(layer);var windowsSize=1e3;getWidthWindow()<1e3&&(windowsSize=getWidthWindow()),$j("#layerCookies").width(windowsSize),window.onresize=function(){var windowsSize=1e3;getWidthWindow()<1e3&&(windowsSize=getWidthWindow()),$j("#layerCookies").width(windowsSize)},$j("#layerCookies .close").bind("click",function(e){e.preventDefault(),$j("#layerCookies").animate({top:"-40px"},{duration:300,complete:function(){$j("#layerCookies").remove()}});var today=new Date;!function(C,G,D,H,E,A){D instanceof Date?D=D.toGMTString():"number"==typeof D&&(D=new Date(+new Date+1e3*D).toGMTString());var I,F,B=[C+"="+escape(G)];for(F in I={expires:D,path:H,domain:E})I[F]&&B.push(F+"="+I[F]);A&&B.push("secure"),document.cookie=B.join(";")}(settings.cookieName,"1",new Date(new Date(today).setMonth(today.getMonth()+12)),"/",".boulanger.com")})}},void 0===$j)var $j=jQuery.noConflict();function setCookie(C,G,D,H,E,A){D instanceof Date?D=D.toGMTString():"number"==typeof D&&(D=new Date(+new Date+1e3*D).toGMTString());var I,F,B=[C+"="+escape(G)];for(F in I={expires:D,path:H,domain:E})I[F]&&B.push(F+"="+I[F]);return A&&B.push("secure"),document.cookie=B.join(";"),!0}function getCookie(A){return 0<document.cookie.length&&(c_start=document.cookie.indexOf(A+"="),-1!=c_start)?(c_start=c_start+A.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""}function isAutorizeWriteCookie(){var nameCookiePRIVACY=getCookie("PRIVACY"),nameCookiePRIVACYMOB=getCookie("PRIVACY_MOB"),nameCookieTC_PAGES_VIEWED=getCookie("TC_PAGES_VIEWED");return""!==nameCookiePRIVACY&&!isNaN(nameCookiePRIVACY)&&1<parseInt(nameCookiePRIVACY)||""!==nameCookiePRIVACYMOB&&!isNaN(nameCookiePRIVACYMOB)&&1<parseInt(nameCookiePRIVACYMOB)||""!==nameCookieTC_PAGES_VIEWED&&!isNaN(nameCookieTC_PAGES_VIEWED)&&1<parseInt(nameCookieTC_PAGES_VIEWED)}void 0===bl&&(bl={}),void 0===bl.accountLayer&&(bl.accountLayer={}),$j.extend(bl.accountLayer,{init:function(userInfo){var connect=!!userInfo&&userInfo.connected;if(connect){var firstName=userInfo.username;firstName&&15<firstName.length&&(firstName=firstName.substr(0,13)+"..."),hasCard=userInfo.card,isPersonalAccount=userInfo.personalAccount,isPersonalAccount?hasCard?($j("#accountLayerLogon").find(".no_bCard").hide(),$j("#accountLayerLogon").find(".bCard").show()):($j("#accountLayerLogon").find(".bCard").hide(),$j("#accountLayerLogon").find(".no_bCard").show()):($j("#accountLayerLogon").find(".no_bCard").hide(),$j("#accountLayerLogon").find(".bCard").hide()),null!=firstName?($j("#blockUser .account").addClass("connect").html("<span>&nbsp; </span>Bonjour<br>"+firstName),$j("#blockUser .not_this_user").html("Vous n&#39;tes pas "+firstName+" ?")):($j("#blockUser .account").addClass("connect").html("<span>&nbsp; </span>Bonjour<br>"),$j("#blockUser .not_this_user").html("Vous n&#39;tes pas connect ?"));var currentUrl=window.document.location.toString();if(currentUrl.indexOf("https")<0){var hrefDisconnect=document.getElementById("disconnect").href;hrefDisconnect=hrefDisconnect.replace("homepage",currentUrl),document.getElementById("disconnect").href=hrefDisconnect}}layerOpened=!1,mouseenter=!1,hover=!1,$j("#blockUser .account").on("click",function(e){if(connect)layerOpened?layerOpened&&bl.accountLayer.layerFade(connect,!1).delay(500):bl.accountLayer.layerFade(connect,!0).delay(500);else{var url=$j(this).attr("data-url");void 0!==url&&(window.location.href=url)}}),$j(".accountLayer").on("mouseenter",function(){mouseenter=!0}),$j(".accountLayer").on("mouseleave",function(){setTimeout(function(){mouseenter&&(bl.accountLayer.layerFade(connect,!1),mouseenter=!1,hover=!1)},200)}),$j("#blockUser .account").show()},onHover:function(){$j(".accountLayer").hover(function(){hover=!0})},fadeTime:function(connect,openTime){setTimeout(function(){hover||(bl.accountLayer.layerFade(connect,!1),mouseenter=!1,hover=!1)},openTime)},layerFade:function(connect,open){_this=$j("#accountLayerLogon"),connect&&(open&&!layerOpened||open&&layerOpened?(_this.stop(1,1).fadeIn(),layerOpened=!0):!open&&layerOpened&&(_this.stop(1,1).fadeOut(),layerOpened=!1))}}),$j(document).ready(function(){return $j("#disconnect").on("click",function(){localStorage.removeItem("favStore"),localStorage.removeItem("shipAddress");var cookieUser=$j.cookie("WC_BOULANGER_GEOCODE_RESULTS");void 0!==cookieUser&&("SEARCH_ZIPCODE"!==cookieUser.split("#")[2]&&$j.removeCookie("WC_BOULANGER_GEOCODE_RESULTS",{path:"/"}))}),$j("#notUser").on("click",function(){localStorage.removeItem("favStore"),localStorage.removeItem("shipAddress");var cookieUser=$j.cookie("WC_BOULANGER_GEOCODE_RESULTS");void 0!==cookieUser&&("SEARCH_ZIPCODE"!==cookieUser.split("#")[2]&&$j.removeCookie("WC_BOULANGER_GEOCODE_RESULTS",{path:"/"}))}),$j(".changeBillingAddress").on("click",function(){localStorage.removeItem("shipAddress");var cookieUser=$j.cookie("WC_BOULANGER_GEOCODE_RESULTS");if(void 0!==cookieUser){var splitCookie=cookieUser.split("#");"SEARCH_ZIPCODE"!==splitCookie[2]&&"FAVORITE_STORE"!==splitCookie[2]&&$j.removeCookie("WC_BOULANGER_GEOCODE_RESULTS",{path:"/"})}}),!0}),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?factory(require("jquery")):factory(jQuery)}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s)}function read(s,converter){var value=config.raw?s:function parseCookieValue(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}(s);return $.isFunction(converter)?converter(value):value}var config=$.cookie=function(key,value,options){if(void 0!==value&&!$.isFunction(value)){if("number"==typeof(options=$.extend({},config.defaults,options)).expires){var days=options.expires,t=options.expires=new Date;t.setTime(+t+864e5*days)}return document.cookie=[encode(key),"=",function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var s,result=key?void 0:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("="),name=(s=parts.shift(),config.raw?s:decodeURIComponent(s)),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||void 0===(cookie=read(cookie))||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return void 0!==$.cookie(key)&&($.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key))}}),void 0===bl&&(bl={}),void 0===bl.cookie&&(bl.cookie={}),$j.extend(bl.cookie,{read:function(name,fallback){if(void 0===name||""===$j.trim(name))return"";for(var c,bits=document.cookie.split("; "),i=0;c=bits[i]&&bits[i].split("=");i++)if(decodeURIComponent(c[0])===name)return decodeURIComponent(c[1]||"");return fallback||""},write:function(name,value,expireDays,path,domain){if(void 0!==name&&""!==$j.trim(name)){var text=name+"="+(value=value||"");if(void 0!==expireDays&&-1!=expireDays){var expires=new Date;expires.setDate(expires.getDate()+expireDays),text+="; expires="+expires.toUTCString()}path=path||"/","string"==typeof domain&&(text+="; domain="+domain),document.cookie=text+"; path="+path}},remove:function(name,path){if(void 0!==name&&""!==$j.trim(name)){var expires=new Date;expires.setDate(expires.getDate()-1),path=path||"/",document.cookie=name+"=; expires="+expires.toUTCString()+"; path="+path}}}),void 0===bl&&(bl={}),void 0===bl.cookieCart&&(bl.cookieCart={}),$j.extend(bl.cookieCart,{init:function(pOptions){bl.cookieCart.options=$j.extend({checkLastUpdate:!0,urlRefreshCookie:null},pOptions)},updateCartHeader:function(pOptions,headerCart){bl.cookieCart.displayQuantityActive&&bl.cookieCart.init(pOptions)}}),$j(function(){$j("#services .table-services .btn button.add").die("click").live("click",function(){$j(this).closest(".groupService").find("button.added").removeClass("added").addClass("add").attr("disabled",!1).text("Ajouter"),$j(this).closest(".groupService").find(".remove a").fadeOut(),$j("#inputAddServices").val()===$j(this).val()&&$j("#inputAddServices").attr("data-type")===$j(this).attr("data-type")?($j("#inputAddServices").removeClass("add").addClass("added").attr("disabled",!0).text("Ajout"),$j(".add-services .remove").show()):$j("#inputAddServices").hasClass("added")&&$j("#inputAddServices").attr("data-type")!==$j(this).attr("data-type")?($j("#inputAddServices").removeClass("add").addClass("added").attr("disabled",!0).text("Ajout"),$j(".add-services .remove").show()):($j("#inputAddServices").removeClass("added").addClass("add").attr("disabled",!1).text("Ajouter"),$j(".add-services .remove").hide()),$j(this).removeClass("add").addClass("added").attr("disabled",!0).text("Ajout"),$j(this).closest(".table").find(".remove a").fadeIn()}),$j("#services .table-services .remove").live("click",function(){$j(this).closest(".table").find("button.added").removeClass("added").addClass("add").attr("disabled",!1).text("Ajouter"),$j(this).closest(".table").find(".remove a").fadeOut(),$j("#inputAddServices").val()===$j(this).siblings(".btn").children("button").val()&&$j("#inputAddServices").attr("data-type")===$j(this).siblings(".btn").children("button").attr("data-type")&&($j("#inputAddServices").removeClass("added").addClass("add").attr("disabled",!1).text("Ajouter"),$j(".add-services .remove").hide())}),$j("#inputAddServices").die("click").live("click",function(){var valueAddService=$j(this).val(),typeService=$j(this).attr("data-type");$j(this).removeClass("add").addClass("added").attr("disabled",!0).text("Ajout"),$j(".btn button.added").each(function(index,value){$j(this).val()!==valueAddService&&$j(this).attr("data-type")===typeService?($j(this).removeClass("added").addClass("add").attr("disabled",!1).text("Ajouter"),$j(this).closest(".table").find(".remove a").fadeOut()):$j(this).val()===valueAddService&&$j(this).attr("data-type")===typeService&&($j(this).removeClass("added").addClass("add").attr("disabled",!1).text("Ajouter"),$j(this).closest(".table").find(".remove a").fadeOut())}),$j(".btn button.add").each(function(index,value){$j(this).val()===valueAddService&&$j(this).attr("data-type")===typeService&&($j(this).removeClass("add").addClass("added").attr("disabled",!0).text("Ajout"),$j(this).closest(".table").find(".remove a").fadeIn())}),$j(".add-services .remove").show()}),$j(".add-services .remove").live("click",function(){var valueAddService=$j(this).attr("data-value"),typeService=$j(this).attr("data-type");$j(".btn button.added").each(function(index,value){$j(this).val()===valueAddService&&$j(this).attr("data-type")===typeService&&($j(this).removeClass("added").addClass("add").attr("disabled",!1).text("Ajouter"),$j(this).closest(".table").find(".remove a").fadeOut())}),$j("#inputAddServices").removeClass("added").addClass("add").attr("disabled",!1).text("Ajouter"),$j(this).hide()})}),$j("document").ready(function(){function removePopin(){$j("body").find(".popin-layer").remove()}0!=$j(".s7Video").length&&$j(".s7Video").get(0).paused&&($j(".s7Video").parent().addClass("parents7Video"),$j(".parents7Video")[0].appendChild(document.createElement("button")).setAttribute("class","paused")),$j(".s7Video").click(function(){$j(".s7Video").get(0).paused?$j(".paused").removeClass("paused"):$j(".parents7Video button").addClass("paused")}),$j(".paused").click(function(){$j(".paused").removeClass("paused"),$j(".s7Video").get(0).play()}),$j("body").on("click",".js-popin",function(e){e.preventDefault(),e.stopPropagation();var popinName=$j(this).attr("data-popin"),suffixClasses="";void 0!==$j(this).attr("data-suffix-classes")&&(suffixClasses=$j(this).attr("data-suffix-classes")),$j("body").append('<div class="popin-layer"><div class="popin-container"></div></div>'),$j("body").on("click",".js-popin-close",function(){removePopin()}),$j(document).bind("click",function(e){0===$j(e.target).closest(".popin-container").length&&removePopin()});var concernedPopin=$j('.popin-content[data-popin="'+popinName+'"]').html();$j(".popin-container").html(concernedPopin).addClass(popinName+" "+suffixClasses)})}),$j(function(){$j(".modal .add-services .info").die("click").live("click",function(){$j(this).text(function(i,text){return"En savoir plus"===text?"Rduire":"En savoir plus"}),$j(this).toggleClass("open"),$j(this).closest(".modal").find(".info").hasClass("open")?($j(this).closest(".modal").find(".recommendation").addClass("close"),$j(this).closest(".modal").find(".recommendation .owl-carousel").slideUp()):($j(this).closest(".modal").find(".recommendation").removeClass("close"),$j(this).closest(".modal").find(".recommendation .owl-carousel").slideDown()),$j(this).parents(".add-services").next().slideToggle()}),$j(".modal .recommendation.close .title").live("click",function(){$j(this).parent().removeClass("close"),$j(this).closest(".modal").find(".read-more").slideUp(),$j(this).closest(".modal").find(".recommendation .owl-carousel").slideDown(),$j(".modal .add-services .info").text("En savoir plus"),$j(this).closest(".modal").find(".info").removeClass("open").addClass("close")}),$j(".modal .recommendation .ems .add").live("click",function(){$j(this).removeClass("add").addClass("added").attr("disabled",!0).text("Ajout"),$j(this).prev(".remove").fadeIn()}),$j(".modal .recommendation .ems .remove").live("click",function(){$j(this).next(".added").removeClass("added").addClass("add").attr("disabled",!1).text("Ajouter au panier"),$j(this).fadeOut()}),$j(".modal .modal-body .content-energie").live("mouseover",function(){$j(this).find(".table-energie").removeClass("off"),$j(this).closest(".modal-add-to-cart").css("overflow","visible")}),$j(".modal .modal-body .content-energie").live("mouseout",function(){$j(this).find(".table-energie").addClass("off"),$j(this).closest(".modal-add-to-cart").css("overflow","hidden")}),$j(".modal .modal-header .btn-cart").live("click",function(){var dataUrl=$j(this).attr("data-url");try{if(tc_vars.product_description&&tc_vars.product_sap){var eventName="Popin::Voir_mon_panier::"+tc_vars.product_description+"_"+tc_vars.product_sap.substring(tc_vars.product_sap.length-10,tc_vars.product_sap.length);tc_events_global(this,"ajouts_paniers",{level2_id:tc_vars.xiti_xtn2,event_name:eventName,event_type:"A"})}else{var product_description=$j(this).attr("data-product-name"),product_sap=$j(this).attr("data-product-partnumber");eventName="Popin::Voir_mon_panier::"+product_description+"_"+product_sap.substring(product_sap.length-10,product_sap.length);tc_events_global(this,"ajouts_paniers",{level2_id:tc_vars.xiti_xtn2,event_name:eventName,event_type:"A"})}}finally{window.location.href=dataUrl}})});try{$j("").owlCarousel()}catch(e){!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},a.each(["onResize","onThrottledResize"],a.proxy(function(b,c){this._handlers[c]=a.proxy(this[c],this)},this)),a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a.charAt(0).toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Workers,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}e.Defaults={items:3,loop:!1,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},e.Width={Default:"default",Inner:"inner",Outer:"outer"},e.Type={Event:"event",State:"state"},e.Plugins={},e.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(a){var b=this.settings.margin||"",c=!this.settings.autoWidth,d=this.settings.rtl,e={width:"auto","margin-left":d?b:"","margin-right":d?"":b};!c&&this.$stage.children().css(e),a.css=e}},{filter:["width","items","settings"],run:function(a){var b=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,c=null,d=this._items.length,e=!this.settings.autoWidth,f=[];for(a.items={merge:!1,width:b};d--;)c=this._mergers[d],c=this.settings.mergeFit&&Math.min(c,this.settings.items)||c,a.items.merge=1<c||a.items.merge,f[d]=e?b*c:this._items[d].width();this._widths=f}},{filter:["items","settings"],run:function(){var b=[],c=this._items,d=this.settings,e=Math.max(2*d.items,4),f=2*Math.ceil(c.length/2),g=d.loop&&c.length?d.rewind?e:Math.max(e,f):0,h="",i="";for(g/=2;g--;)b.push(this.normalize(b.length/2,!0)),h+=c[b[b.length-1]][0].outerHTML,b.push(this.normalize(c.length-1-(b.length-1)/2,!0)),i=c[b[b.length-1]][0].outerHTML+i;this._clones=b,a(h).addClass("cloned").appendTo(this.$stage),a(i).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var a=this.settings.rtl?1:-1,b=this._clones.length+this._items.length,c=-1,d=0,e=0,f=[];++c<b;)d=f[c-1]||0,e=this._widths[this.relative(c)]+this.settings.margin,f.push(d+e*a);this._coordinates=f}},{filter:["width","items","settings"],run:function(){var a=this.settings.stagePadding,b=this._coordinates,c={width:Math.ceil(Math.abs(b[b.length-1]))+2*a,"padding-left":a||"","padding-right":a||""};this.$stage.css(c)}},{filter:["width","items","settings"],run:function(a){var b=this._coordinates.length,c=!this.settings.autoWidth,d=this.$stage.children();if(c&&a.items.merge)for(;b--;)a.css.width=this._widths[this.relative(b)],d.eq(b).css(a.css);else c&&(a.css.width=a.items.width,d.css(a.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(a){a.current=a.current?this.$stage.children().index(a.current):0,a.current=Math.max(this.minimum(),Math.min(this.maximum(),a.current)),this.reset(a.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;c<d;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,"<=",g)&&this.op(a,">",h)||this.op(b,"<",g)&&this.op(b,">",h))&&i.push(c);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+i.join("), :eq(")+")").addClass("active"),this.settings.center&&(this.$stage.children(".center").removeClass("center"),this.$stage.children().eq(this.current()).addClass("center"))}}],e.prototype.initialize=function(){var b,c,e;(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading"))&&(b=this.$element.find("img"),c=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,e=this.$element.children(c).width(),b.length&&e<=0&&this.preloadAutoWidthImages(b));this.$element.addClass(this.options.loadingClass),this.$stage=a("<"+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this.$element.is(":visible")?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){a<=b&&d<a&&(d=Number(a))}),"function"==typeof(e=a.extend({},this.options,c[d])).stagePadding&&(e.stagePadding=e.stagePadding()),delete e.responsive,e.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+d))):e=a.extend({},this.options),this.trigger("change",{property:{name:"settings",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},e.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger("prepare",{content:b});return c.data||(c.data=a("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(b)),this.trigger("prepared",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};b<c;)(this._invalidated.all||0<a.grep(this._pipe[b].filter,d).length)&&this._pipe[b].run(e),b++;this._invalidated={},!this.is("valid")&&this.enter("valid")},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return!!this._items.length&&this._width!==this.$element.width()&&!!this.$element.is(":visible")&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))},e.prototype.registerEventHandlers=function(){a.support.transition&&this.$stage.on(a.support.transition.end+".owl.core",a.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(b,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",a.proxy(this.onDragEnd,this)))},e.prototype.onDragStart=function(b){var d=null;3!==b.which&&(a.support.transform?d={x:(d=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===d.length?12:4],y:d[16===d.length?13:5]}:(d=this.$stage.position(),d={x:this.settings.rtl?d.left+this.$stage.width()-this.width()+this.settings.margin:d.left,y:d.top}),this.is("animating")&&(a.support.transform?this.animate(d.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===b.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=a(b.target),this._drag.stage.start=d,this._drag.stage.current=d,this._drag.pointer=this.pointer(b),a(c).on("mouseup.owl.core touchend.owl.core",a.proxy(this.onDragEnd,this)),a(c).one("mousemove.owl.core touchmove.owl.core",a.proxy(function(b){var d=this.difference(this._drag.pointer,this.pointer(b));a(c).on("mousemove.owl.core touchmove.owl.core",a.proxy(this.onDragMove,this)),Math.abs(d.x)<Math.abs(d.y)&&this.is("valid")||(b.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},e.prototype.onDragMove=function(a){var b=null,c=null,d=null,e=this.difference(this._drag.pointer,this.pointer(a)),f=this.difference(this._drag.stage.start,e);this.is("dragging")&&(a.preventDefault(),this.settings.loop?(b=this.coordinates(this.minimum()),c=this.coordinates(this.maximum()+1)-b,f.x=((f.x-b)%c+c)%c+b):(b=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),c=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),d=this.settings.pullDrag?-1*e.x/5:0,f.x=Math.max(Math.min(f.x,b+d),c+d)),this._drag.stage.current=f,this.animate(f.x))},e.prototype.onDragEnd=function(b){var d=this.difference(this._drag.pointer,this.pointer(b)),e=this._drag.stage.current,f=0<d.x^this.settings.rtl?"left":"right";a(c).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==d.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(e.x,0!==d.x?f:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=f,(3<Math.abs(d.x)||300<(new Date).getTime()-this._drag.time)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},e.prototype.closest=function(b,c){var d=-1,f=this.width(),g=this.coordinates();return this.settings.freeDrag||a.each(g,a.proxy(function(a,h){return"left"===c&&h-30<b&&b<h+30?d=a:"right"===c&&h-f-30<b&&b<h-f+30?d=a+1:this.op(b,"<",h)&&this.op(b,">",g[a+1]||h-f)&&(d="left"===c?a+1:a),-1===d},this)),this.settings.loop||(this.op(b,">",g[this.minimum()])?d=b=this.minimum():this.op(b,"<",g[this.maximum()])&&(d=b=this.maximum())),d},e.prototype.animate=function(b){var c=0<this.speed();this.is("animating")&&this.onTransitionEnd(),c&&(this.enter("animating"),this.trigger("translate")),a.support.transform3d&&a.support.transition?this.$stage.css({transform:"translate3d("+b+"px,0px,0px)",transition:this.speed()/1e3+"s"}):c?this.$stage.animate({left:b+"px"},this.speed(),this.settings.fallbackEasing,a.proxy(this.onTransitionEnd,this)):this.$stage.css({left:b+"px"})},e.prototype.is=function(a){return this._states.current[a]&&0<this._states.current[a]},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.invalidate=function(b){return"string"===a.type(b)&&(this._invalidated[b]=!0,this.is("valid")&&this.leave("valid")),a.map(this._invalidated,function(a,b){return b})},e.prototype.reset=function(a){(a=this.normalize(a))!==d&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))},e.prototype.normalize=function(a,b){var c=this._items.length,e=b?0:this._clones.length;return!this.isNumeric(a)||c<1?a=d:(a<0||c+e<=a)&&(a=((a-e/2)%c+c)%c+e/2),a},e.prototype.relative=function(a){return a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=this.settings,f=this._coordinates.length;if(e.loop)f=this._clones.length/2+this._items.length-1;else if(e.autoWidth||e.merge){for(b=this._items.length,c=this._items[--b].width(),d=this.$element.width();b--&&!(d<(c+=this._items[b].width()+this.settings.margin)););f=b+1}else f=e.center?this._items.length-1:this._items.length-e.items;return a&&(f-=this._clones.length/2),Math.max(f,0)},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2==0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c,e=1,f=b-1;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(this.settings.rtl&&(e=-1,f=b+1),c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[f]||0))/2*e):c=this._coordinates[f]||0,c=Math.ceil(c))},e.prototype.duration=function(a,b,c){return 0===c?0:Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(a,b){var c=this.current(),d=null,e=a-this.relative(c),f=(0<e)-(e<0),g=this._items.length,h=this.minimum(),i=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(e)>g/2&&(e+=-1*f*g),(d=(((a=c+e)-h)%g+g)%g+h)!==a&&d-e<=i&&0<d-e&&(c=d-e,a=d,this.reset(c))):this.settings.rewind?a=(a%(i+=1)+i)%i:a=Math.max(h,Math.min(i,a)),this.speed(this.duration(c,a,b)),this.current(a),this.$element.is(":visible")&&this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.onTransitionEnd=function(a){if(a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},e.prototype.viewport=function(){var d;return this.options.responsiveBaseElement!==b?d=a(this.options.responsiveBaseElement).width():b.innerWidth?d=b.innerWidth:c.documentElement&&c.documentElement.clientWidth?d=c.documentElement.clientWidth:console.warn("Can not detect viewport width."),d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find("."+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},e.prototype.add=function(b,c){var e=this.relative(this._current);c=c===d?this._items.length:this.normalize(c,!0),b=b instanceof jQuery?b:a(b),this.trigger("add",{content:b,position:c}),b=this.prepare(b),0===this._items.length||c===this._items.length?(0===this._items.length&&this.$stage.append(b),0!==this._items.length&&this._items[c-1].after(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[c].before(b),this._items.splice(c,0,b),this._mergers.splice(c,0,1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[e]&&this.reset(this._items[e].index()),this.invalidate("items"),this.trigger("added",{content:b,position:c})},e.prototype.remove=function(a){(a=this.normalize(a,!0))!==d&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))},e.prototype.preloadAutoWidthImages=function(b){b.each(a.proxy(function(b,c){this.enter("pre-loading"),c=a(c),a(new Image).one("load",a.proxy(function(a){c.attr("src",a.target.src),c.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",c.attr("src")||c.attr("data-src")||c.attr("data-src-retina"))},this))},e.prototype.destroy=function(){for(var d in this.$element.off(".owl.core"),this.$stage.off(".owl.core"),a(c).off(".owl.core"),!1!==this.settings.responsive&&(b.clearTimeout(this.resizeTimer),this.off(b,"resize",this._handlers.onThrottledResize)),this._plugins)this._plugins[d].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?c<a:a<c;case">":return d?a<c:c<a;case">=":return d?a<=c:c<=a;case"<=":return d?c<=a:a<=c}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d,f,g){var h={item:{count:this._items.length,index:this.current()}},i=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),j=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},h,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(j)}),this.register({type:e.Type.Event,name:b}),this.$element.trigger(j),this.settings&&"function"==typeof this.settings[i]&&this.settings[i].call(this,j)),j},e.prototype.enter=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]===d&&(this._states.current[b]=0),this._states.current[b]++},this))},e.prototype.leave=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]--},this))},e.prototype.register=function(b){if(b.type===e.Type.Event){if(a.event.special[b.name]||(a.event.special[b.name]={}),!a.event.special[b.name].owl){var c=a.event.special[b.name]._default;a.event.special[b.name]._default=function(a){return!c||!c.apply||a.namespace&&-1!==a.namespace.indexOf("owl")?a.namespace&&-1<a.namespace.indexOf("owl"):c.apply(this,arguments)},a.event.special[b.name].owl=!0}}else b.type===e.Type.State&&(this._states.tags[b.name]?this._states.tags[b.name]=this._states.tags[b.name].concat(b.tags):this._states.tags[b.name]=b.tags,this._states.tags[b.name]=a.grep(this._states.tags[b.name],a.proxy(function(c,d){return a.inArray(c,this._states.tags[b.name])===d},this)))},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.pointer=function(a){var c={x:null,y:null};return(a=(a=a.originalEvent||a||b.event).touches&&a.touches.length?a.touches[0]:a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a).pageX?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY),c},e.prototype.isNumeric=function(a){return!isNaN(parseFloat(a))},e.prototype.difference=function(a,b){return{x:a.x-b.x,y:a.y-b.y}},a.fn.owlCarousel=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),f=d.data("owl.carousel");f||(f=new e(this,"object"==typeof b&&b),d.data("owl.carousel",f),a.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(b,c){f.register({type:e.Type.Event,name:c}),f.$element.on(c+".owl.carousel.core",a.proxy(function(a){a.namespace&&a.relatedTarget!==this&&(this.suppress([c]),f[c].apply(this,[].slice.call(arguments,1)),this.release([c]))},f))})),"string"==typeof b&&"_"!==b.charAt(0)&&f[b].apply(f,c)})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoRefresh:!0,autoRefreshInterval:500},e.prototype.watch=function(){this._interval||(this._visible=this._core.$element.is(":visible"),this._interval=b.setInterval(a.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},e.prototype.refresh=function(){this._core.$element.is(":visible")!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},e.prototype.destroy=function(){var a,c;for(a in b.clearInterval(this._interval),this._handlers)this._core.$element.off(a,this._handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoRefresh=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&"position"==b.property.name||"initialized"==b.type))for(var c=this._core.settings,e=c.center&&Math.ceil(c.items/2)||c.items,f=c.center&&-1*e||0,g=(b.property&&void 0!==b.property.value?b.property.value:this._core.current())+f,h=this._core.clones().length,i=a.proxy(function(a,b){this.load(b)},this);f++<e;)this.load(h/2+this._core.relative(g)),h&&a.each(this._core.clones(this._core.relative(g)),i),g++},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={lazyLoad:!1},e.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(".owl-lazy");!e||-1<a.inArray(d.get(0),this._loaded)||(e.each(a.proxy(function(c,d){var e,f=a(d),g=1<b.devicePixelRatio&&f.attr("data-src-retina")||f.attr("data-src");this._core.trigger("load",{element:f,url:g},"lazy"),f.is("img")?f.one("load.owl.lazy",a.proxy(function(){f.css("opacity",1),this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("src",g):((e=new Image).onload=a.proxy(function(){f.css({"background-image":'url("'+g+'")',opacity:"1"}),this._core.trigger("loaded",{element:f,url:g},"lazy")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&"position"==a.property.name&&this.update()},this),"loaded.owl.lazy":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},e.prototype.update=function(){var f,b=this._core._current,c=b+this._core.settings.items,d=this._core.$stage.children().toArray().slice(b,c),e=[];a.each(d,function(b,c){e.push(a(c).height())}),f=Math.max.apply(null,e),this._core.$stage.parent().height(f).addClass(this._core.settings.autoHeightClass)},e.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.video&&this.isInFullScreen()&&a.preventDefault()},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"===a.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find(".owl-video");c.length&&(c.css("display","none"),this.fetch(c,a(b.content)))}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.play(a)},this))};e.Defaults={video:!1,videoHeight:!1,videoWidth:!1},e.prototype.fetch=function(a,b){var c=a.attr("data-vimeo-id")?"vimeo":a.attr("data-vzaar-id")?"vzaar":"youtube",d=a.attr("data-vimeo-id")||a.attr("data-youtube-id")||a.attr("data-vzaar-id"),e=a.attr("data-width")||this._core.settings.videoWidth,f=a.attr("data-height")||this._core.settings.videoHeight,g=a.attr("href");if(!g)throw new Error("Missing video URL.");if(-1<(d=g.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu"))c="youtube";else if(-1<d[3].indexOf("vimeo"))c="vimeo";else{if(!(-1<d[3].indexOf("vzaar")))throw new Error("Video URL not supported.");c="vzaar"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr("data-video",g),this.thumbnail(a,this._videos[g])},e.prototype.thumbnail=function(b,c){var d,f,g=c.width&&c.height?'style="width:'+c.width+"px;height:"+c.height+'px;"':"",h=b.find("img"),i="src",j="",k=this._core.settings,l=function(a){'<div class="owl-video-play-icon"></div>',d=k.lazyLoad?'<div class="owl-video-tn '+j+'" '+i+'="'+a+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+a+')"></div>',b.after(d),b.after('<div class="owl-video-play-icon"></div>')};if(b.wrap('<div class="owl-video-wrapper"'+g+"></div>"),this._core.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length)return l(h.attr(i)),h.remove(),!1;"youtube"===c.type?(f="//img.youtube.com/vi/"+c.id+"/hqdefault.jpg",l(f)):"vimeo"===c.type?a.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a[0].thumbnail_large,l(f)}}):"vzaar"===c.type&&a.ajax({type:"GET",url:"//vzaar.com/api/videos/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a.framegrab_url,l(f)}})},e.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},e.prototype.play=function(b){var c,e=a(b.target).closest("."+this._core.settings.itemClass),f=this._videos[e.attr("data-video")],g=f.width||"100%",h=f.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),e=this._core.items(this._core.relative(e.index())),this._core.reset(e.index()),"youtube"===f.type?c='<iframe width="'+g+'" height="'+h+'" src="//www.youtube.com/embed/'+f.id+"?autoplay=1&rel=0&v="+f.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===f.type?c='<iframe src="//player.vimeo.com/video/'+f.id+'?autoplay=1" width="'+g+'" height="'+h+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>':"vzaar"===f.type&&(c='<iframe frameborder="0"height="'+h+'"width="'+g+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen src="//view.vzaar.com/'+f.id+'/player?autoplay=true"></iframe>'),a('<div class="owl-video-frame">'+c+"</div>").insertAfter(e.find(".owl-video")),this._playing=e.addClass("owl-video-playing"))},e.prototype.isInFullScreen=function(){var b=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return b&&a(b).parent().hasClass("owl-video-frame")},e.prototype.destroy=function(){var a,b;for(a in this._core.$element.off("click.owl.video"),this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){a.namespace&&(this.swapping="translated"==a.type)},this),"translate.owl.carousel":a.proxy(function(a){a.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&a.support.animation&&a.support.transition){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.one(a.support.animation.end,c).css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g)),f&&e.one(a.support.animation.end,c).addClass("animated owl-animated-in").addClass(f))}},e.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._timeout=null,this._paused=!1,this._handlers={"changed.owl.carousel":a.proxy(function(a){a.namespace&&"settings"===a.property.name?this._core.settings.autoplay?this.play():this.stop():a.namespace&&"position"===a.property.name&&this._core.settings.autoplay&&this._setAutoPlayInterval()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":a.proxy(function(a,b,c){a.namespace&&this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(a){a.namespace&&this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=a.extend({},e.Defaults,this._core.options)};e.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},e.prototype.play=function(a,b){this._paused=!1,this._core.is("rotating")||(this._core.enter("rotating"),this._setAutoPlayInterval())},e.prototype._getNextTimeout=function(d,e){return this._timeout&&b.clearTimeout(this._timeout),b.setTimeout(a.proxy(function(){this._paused||this._core.is("busy")||this._core.is("interacting")||c.hidden||this._core.next(e||this._core.settings.autoplaySpeed)},this),d||this._core.settings.autoplayTimeout)},e.prototype._setAutoPlayInterval=function(){this._timeout=this._getNextTimeout()},e.prototype.stop=function(){this._core.is("rotating")&&(b.clearTimeout(this._timeout),this._core.leave("rotating"))},e.prototype.pause=function(){this._core.is("rotating")&&(this._paused=!0)},e.prototype.destroy=function(){var a,b;for(a in this.stop(),this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(b){this._core=b,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":a.proxy(function(b){b.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+a(b.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,0,this._templates.pop())},this),"remove.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&this.draw()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var b,c=this._core.settings;for(b in this._controls.$relative=(c.navContainer?a(c.navContainer):a("<div>").addClass(c.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=a("<"+c.navElement+">").addClass(c.navClass[0]).html(c.navText[0]).prependTo(this._controls.$relative).on("click",a.proxy(function(a){this.prev(c.navSpeed)},this)),this._controls.$next=a("<"+c.navElement+">").addClass(c.navClass[1]).html(c.navText[1]).appendTo(this._controls.$relative).on("click",a.proxy(function(a){this.next(c.navSpeed)},this)),c.dotsData||(this._templates=[a("<div>").addClass(c.dotClass).append(a("<span>")).prop("outerHTML")]),this._controls.$absolute=(c.dotsContainer?a(c.dotsContainer):a("<div>").addClass(c.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","div",a.proxy(function(b){var d=a(b.target).parent().is(this._controls.$absolute)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(d,c.dotsSpeed)},this)),this._overrides)this._core[b]=a.proxy(this[b],this)},e.prototype.destroy=function(){var a,b,c,d;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},e.prototype.update=function(){var a,b,d=this._core.clones().length/2,e=d+this._core.items().length,f=this._core.maximum(!0),g=this._core.settings,h=g.center||g.autoWidth||g.dotsData?1:g.dotsEach||g.items;if("page"!==g.slideBy&&(g.slideBy=Math.min(g.slideBy,g.items)),g.dots||"page"==g.slideBy)for(this._pages=[],a=d,b=0;a<e;a++){if(h<=b||0===b){if(this._pages.push({start:Math.min(f,a-d),end:a-d+h-1}),Math.min(f,a-d)===f)break;b=0,0}b+=this._core.mergers(this._core.relative(a))}},e.prototype.draw=function(){var b,c=this._core.settings,d=this._core.items().length<=c.items,e=this._core.relative(this._core.current()),f=c.loop||c.rewind;this._controls.$relative.toggleClass("disabled",!c.nav||d),c.nav&&(this._controls.$previous.toggleClass("disabled",!f&&e<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!f&&e>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!c.dots||d),c.dots&&(b=this._pages.length-this._controls.$absolute.children().length,c.dotsData&&0!==b?this._controls.$absolute.html(this._templates.join("")):0<b?this._controls.$absolute.append(new Array(b+1).join(this._templates[0])):b<0&&this._controls.$absolute.children().slice(b).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(a.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotsData?1:c.dotsEach||c.items)}},e.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,a.proxy(function(a,c){return a.start<=b&&a.end>=b},this)).pop()},e.prototype.getPosition=function(b){var c,d,e=this._core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},e.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},e.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},e.prototype.to=function(b,c,d){var e;!d&&this._pages.length?(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c)):a.proxy(this._overrides.to,this._core)(b,c)},a.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(c){this._core=c,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":a.proxy(function(c){c.namespace&&"URLHash"===this._core.settings.startPosition&&a(b).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!c)return;this._hashes[c]=b.content}},this),"changed.owl.carousel":a.proxy(function(c){if(c.namespace&&"position"===c.property.name){var d=this._core.items(this._core.relative(this._core.current())),e=a.map(this._hashes,function(a,b){return a===d?b:null}).join();if(!e||b.location.hash.slice(1)===e)return;b.location.hash=e}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(a){var c=b.location.hash.substring(1),e=this._core.$stage.children(),f=this._hashes[c]&&e.index(this._hashes[c]);void 0!==f&&f!==this._core.current()&&this._core.to(this._core.relative(f),!1,!0)},this))};e.Defaults={URLhashListener:!1},e.prototype.destroy=function(){var c,d;for(c in a(b).off("hashchange.owl.navigation"),this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){function e(b,c){var e=!1,f=b.charAt(0).toUpperCase()+b.slice(1);return a.each((b+" "+h.join(f+" ")+f).split(" "),function(a,b){if(g[b]!==d)return e=!c||b,!1}),e}function f(a){return e(a,!0)}var g=a("<support>").get(0).style,h="Webkit Moz O ms".split(" "),i={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},j_csstransforms=function(){return!!e("transform")},j_csstransforms3d=function(){return!!e("perspective")},j_cssanimations=function(){return!!e("animation")};(function(){return!!e("transition")})()&&(a.support.transition=new String(f("transition")),a.support.transition.end=i.transition.end[a.support.transition]),j_cssanimations()&&(a.support.animation=new String(f("animation")),a.support.animation.end=i.animation.end[a.support.animation]),j_csstransforms()&&(a.support.transform=new String(f("transform")),a.support.transform3d=j_csstransforms3d())}(window.Zepto||window.jQuery,window,document)}var callBLGetStoreInformation=new Array,activateGoogleShoppingCookieForContextualization=!1;function isElementInViewport(el){var rect=el.getBoundingClientRect();return 0<=rect.top&&0<=rect.left&&rect.bottom<=(window.innerHeight+55||document.documentElement.clientHeight+55)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)}function lazyLoadImages(){var images=document.querySelectorAll("img[data-lazy-src]"),windowEmplacement=window.innerHeight+window.pageYOffset;[].forEach.call(images,function(item){item.hasAttribute("data-lazy-click")||0!=item.getBoundingClientRect().top&&(windowEmplacement>=item.getBoundingClientRect().top||isElementInViewport(item))&&"none"!=window.getComputedStyle(item).getPropertyValue("display")&&(item.setAttribute("src",item.getAttribute("data-lazy-src")),item.removeAttribute("data-lazy-src"))})}if($j.initObject("bl.catalog.productPage.googleShoppingContextualization"),$j.extend(bl.catalog.productPage.googleShoppingContextualization,{loadGoogleShoppingContext:function(activateCookieForGeolocalization){var logger=new BoulangerLogData;if(this.isGoogleShoppingContext()&&isAutorizeWriteCookie()){activateGoogleShoppingCookieForContextualization=activateCookieForGeolocalization;var googleShoppingStoreCode=this.getGoogleShoppingStoreCodeInUrl(),googleShoppingStoreCookie=this.getGoogleShoppingStoreCodeInCookie();void 0!==googleShoppingStoreCookie?googleShoppingStoreCode!=googleShoppingStoreCookie&&this._createCookie(googleShoppingStoreCode):void 0!==googleShoppingStoreCode&&""!==googleShoppingStoreCode?this._createCookie(googleShoppingStoreCode):logger.add("Le Cookie a t altr")}},isGoogleShoppingContext:function(){var result=!1;if(this.isValidStoreCode()){var storeCode=this.getGoogleShoppingStoreCodeInUrl();this._getStoreInformation(storeCode,function(storeInformation){null!=storeInformation&&null!=storeInformation&&(storeInformation.pfsDown||(result=void 0!==storeInformation.sites&&""!==storeInformation.sites))})}return result},isValidStoreCode:function(){var queryString=this._getQueryString();return void 0!==queryString&&void 0!==queryString.store&&/^F[0-9]{3}/.test(queryString.store)&&4==queryString.store.length},getGoogleShoppingStoreCodeInUrl:function(){var queryString=this._getQueryString();return this.isValidStoreCode()?queryString.store:""},getGoogleShoppingStoreCodeInCookie:function(){var googleShoppingStoreCookie=$j.cookie("BL_GOOGLE_SHOPPING_STORE");return void 0!==googleShoppingStoreCookie?googleShoppingStoreCookie.split("#")[3]:""},getGoogleShoppingStoreLatitudeInCookie:function(){var googleShoppingStoreCookie=$j.cookie("BL_GOOGLE_SHOPPING_STORE");return void 0!==googleShoppingStoreCookie?googleShoppingStoreCookie.split("#")[2]:""},getGoogleShoppingStoreLongitudeInCookie:function(){var googleShoppingStoreCookie=$j.cookie("BL_GOOGLE_SHOPPING_STORE");return void 0!==googleShoppingStoreCookie?googleShoppingStoreCookie.split("#")[1]:""},getGoogleShoppingStoreZipcodeInCookie:function(){var googleShoppingStoreCookie=$j.cookie("BL_GOOGLE_SHOPPING_STORE");return void 0!==googleShoppingStoreCookie?googleShoppingStoreCookie.split("#")[0]:""},needReloadGoogleShoppingContext:function(){var latitudeFromGeolocationCookie=bl.cookie.getLatitudeFromGeolocationCookie(),longitudeFromGeolocationCookie=bl.cookie.getLongitudeFromGeolocationCookie(),latitudeFromGoogleShoppingCookie=this.getGoogleShoppingStoreLongitudeInCookie(),longitudeFromGoogleShoppingCookie=this.getGoogleShoppingStoreLatitudeInCookie();return latitudeFromGeolocationCookie==latitudeFromGoogleShoppingCookie&&longitudeFromGeolocationCookie==longitudeFromGoogleShoppingCookie},_getStoreInformation:function(googleShoppingStoreCode,callbackFunction){var logger=new BoulangerLogData,code=googleShoppingStoreCode;void 0!==callBLGetStoreInformation&&void 0!==callBLGetStoreInformation[googleShoppingStoreCode]?callbackFunction(callBLGetStoreInformation[googleShoppingStoreCode]):$j.ajax({url:"/webapp/wcs/stores/servlet/BLGetStoreInformation",data:{store:code},cache:!0,async:!1,dataType:"json",success:function(data,textStatus,jqXHR){callBLGetStoreInformation[code]=data,callbackFunction(data),logger.add("Appel BLGetStoreInformation","Recuperation des informations du magasin: "+code),logger.log()},error:function(jqXHR,textStatus,errorThrown){logger.add("Appel BLGetStoreInformation","Erreur lors de la recuperation des information: "+errorThrown),logger.log()},complete:function(jqXHR,textStatus){logger.add("Appel BLGetStoreInformation","Resultat de la requette: "+textStatus),logger.log()}})},_createCookie:function(googleShoppingStoreCode){this._getStoreInformation(googleShoppingStoreCode,function(storeInformation){if(null!=storeInformation&&null!=storeInformation&&!storeInformation.pfsDown){var googleShoppingStoreCookieContent,zipCode=storeInformation.sites.address.zipCode,latitude=storeInformation.sites.address.location.lat;googleShoppingStoreCookieContent=zipCode+"#"+storeInformation.sites.address.location.lon+"#"+latitude+"#"+storeInformation.sites.code,bl.cookie.createGoogleShoppingStoreCookie(googleShoppingStoreCookieContent)}})},_getQueryString:function(){for(var queryString={},vars=window.location.search.substring(1).split("&"),i=0;i<vars.length;i++){var pair=vars[i].split("=");if(void 0===queryString[pair[0]])queryString[pair[0]]=decodeURIComponent(pair[1]);else if("string"==typeof queryString[pair[0]]){var arr=[queryString[pair[0]],decodeURIComponent(pair[1])];queryString[pair[0]]=arr}else queryString[pair[0]].push(decodeURIComponent(pair[1]))}return queryString}}),window.addEventListener("DOMContentLoaded",lazyLoadImages),window.addEventListener("load",lazyLoadImages),window.addEventListener("resize",lazyLoadImages),window.addEventListener("scroll",lazyLoadImages),window.addEventListener("click",lazyLoadImages),void 0===typeof $j)var $j=jQuery.noConflict();$j.initObject("bl.catalog.modal.addToCart");var height2carousel=-50;if($j.extend(bl.catalog.modal.addToCart,{bind:function(){$j(".x-addToCart").unbind("click").bind("click",function(){if(bl.cookie.isVenteCookieExist()){var sellerDataDOM=$j(this).parent().find(".sellerData"),dataOfferId=$j(this).parent().attr("data-offer-id");if(void 0!==sellerDataDOM&&void 0!==dataOfferId){var codeProductId="codeProduct-"+dataOfferId,bundleProductQuantityId="bundleProductQuantity-"+dataOfferId,codeProduct=sellerDataDOM.find("#"+codeProductId),bundleProductQuantity=sellerDataDOM.find("#"+bundleProductQuantityId);if(void 0!==codeProduct&&void 0!==bundleProductQuantity){var codeProductValue=codeProduct.attr("value"),bundleProductQuantityValue=parseInt(bundleProductQuantity.attr("value")),dataJson=bl.seller.createJsonAddCartFV(codeProductValue,bundleProductQuantityValue);""!=dataJson&&bl.seller.callWSFrontVendeur(bl.cookie.getIdSessionFromVenteCookie(),bl.cookie.getNumFVFromVenteCookie(),dataJson,!1)}}}else{var url=$j(this).attr("data-cart-url");$j("input.product-service[type='radio']").each(function(index,value){$j(this).is(":checked")&&(url+="&serviceCatentryId="+$j(this).val()+":"+$j(this).data("zipcode"))}),($j(".content").hasClass("pageComparateur")||$j(".content").hasClass("pageMarchand"))&&(url+="&pageComparateur=true");var offerIdService,offerIdServiceVal=$j("#inputAddServices").val();if(null!=offerIdServiceVal&&(offerIdService=offerIdServiceVal.split(":")[1]),offerIdService==$j(this).parent().attr("data-offer-id")){var bestServSell=null;$j("#inputAddServices").hasClass("added")&&(bestServSell=$j("#inputAddServices").val(),url+="&serviceCatentryId="+bestServSell),0==$j("#inputAddServices").length&&$j(".groupService .added").each(function(){bestServSell=$j(this).val(),url+="&serviceCatentryId="+bestServSell}),$j("#inputAddServices").hasClass("added")||null!=(bestServSell=$j("#inputAddServices").val())&&""!=bestServSell&&(url+="&bestServSell="+bestServSell),$j(".btn button.added").each(function(index,value){bestServSell!=$j(this).val()&&(url+="&serviceCatentryId="+$j(this).val()+":")})}if($j(this).attr("data-cart-is-pickup")){var selectedPickUp=$j(".formStoresList .list input.selected").val(),shipmodeId=$j(".formStoresList .list input.selected").attr("data-shipmode"),selectedPickUpName=$j(".formStoresList .list input.selected").attr("data-store");url+="&selectedPickupPoint="+selectedPickUp+"&shipModeId="+shipmodeId+"&selectedPickupName="+selectedPickUpName}if($j(this).attr("data-cart-is-rem")){var selectedREM=$j(".formStoresList .list input.selected").val();shipmodeId=$j(".formStoresList .list input.selected").attr("data-shipmode");url+="&siteInformation="+selectedREM+"&shipModeId="+shipmodeId}var isTypePanierTestAB=$j(this).attr("data-type-panier-test-ab");void 0===isTypePanierTestAB&&(isTypePanierTestAB="true");var typePopinAjoutPanier=bl.cookie.getTypePopinPanierTestABCookie();void 0!==typePopinAjoutPanier&&""!==typePopinAjoutPanier&&"true"===isTypePanierTestAB&&(url+="&typePopinPanierTestAB="+typePopinAjoutPanier),"string"==typeof url&&(-1!==url.indexOf("addToCartFromCart")?(showLoadingLayer(),window.location=url):Box.open({modal:!0,url:url,show:function(){bl.catalog.modal.addToCart.xiti(typePopinAjoutPanier,isTypePanierTestAB),bl.catalog.modal.addToCart.events(),blg.getCartInfo()}}));var productPage=$j("#pp");if(void 0!==productPage.html()){tc_vars.product_description,tc_vars.product_sap;var ajoutsServicesEventName=void 0,nbServicesAdded=0,listServices=productPage.find(".table-services");if(void 0!==listServices&&void 0!==listServices.find(".table").find(".table-cell.btn")){var btnAjouter=listServices.find(".table").find(".table-cell.btn"),servicesAdded=btnAjouter.find("button.added");void 0!==servicesAdded&&(nbServicesAdded=servicesAdded.length),ajoutsServicesEventName=1<nbServicesAdded?new Array:"";var numService=0;btnAjouter.each(function(index){var serviceAdded=$j(this).find("button.added");if(0<nbServicesAdded&&void 0!==serviceAdded.html())if(1==nbServicesAdded)ajoutsServicesEventName="Ajouts_Services::Pages_produits::"+tc_vars.product_services[index].product_service_description+"_"+tc_vars.product_services[index].product_service_id.substring(tc_vars.product_services[index].product_service_id.length-10,tc_vars.product_services[index].product_service_id.length)+"::"+tc_vars.product_description+"_"+tc_vars.product_sap;else if(1<nbServicesAdded){var eventName="Ajouts_Services::Pages_produits::"+tc_vars.product_services[index].product_service_description+"_"+tc_vars.product_services[index].product_service_id.substring(tc_vars.product_services[index].product_service_id.length-10,tc_vars.product_services[index].product_service_id.length)+"::"+tc_vars.product_description+"_"+tc_vars.product_sap;ajoutsServicesEventName[numService]=eventName,numService++}})}0<nbServicesAdded&&tc_events_global(this,"ajouts_services",{event_name:ajoutsServicesEventName,event_type:"A"})}var plPrecedente=localStorage.getItem("PLPrecedente");void 0!==plPrecedente&&""!==plPrecedente&&tcEventsGlobalDispatcher("ajouts_paniers_plmg",""+tc_vars.xiti_xtn2,"Ajouts_PaniersPLMG::Pages_Listes::"+plPrecedente,"A","onlinePurshaseTag_82")}})},xiti:function(typePopin,isTypePanierTestAB){"function"==typeof xt_med&&("A"===typePopin&&"true"===isTypePanierTestAB?0<$j(".scp_recommended_product",this.el).length?xt_med("F","17","layer_ajout_panier_cross_selling_old"):xt_med("F","17","layer_ajout_panier_old"):0<$j(".scp_recommended_product",this.el).length?xt_med("F","17","layer_ajout_panier_cross_selling"):xt_med("F","17","layer_ajout_panier"))},events:function(){var context=this.el;bl.catalog.modal.prenium.bind(),$j("a.close",this.el).bind("click",function(){return Box._close(this),!1}),bl.catalog.modal.notifyme.bind();var oldValue=$j(".x-changeQuantity",this.el).val();function returnWPX(value){return new String(value).split("px")[0]}$j(".price .x-changeQuantity",this.el).bind("change",function(event){var select=$j(this);if(!select.data("disabled")){var form=$j(select[0].form),url=form.attr("action"),params=form.serializeArray();select.attr("disabled","disabled"),$j(".x-delete-orderItem",context).addClass("disabled"),$j.ajax({dataType:"json",url:url,data:params,success:function(data){select.removeAttr("disabled"),$j(".x-delete-orderItem",context).removeClass("disabled"),"success"===data.status?($j("#modal_confirm_cs_mp .price span").html(data.price),select.data("disabled",!0),select.val(data.quantity),oldValue=data.quantity,select.data("disabled",!1),$j("input[name='orderItemId']",form).val(data.orderItemId),$j("input[name='productQuantityInShopCart']",form).val(data.quantity),$j("input[name='price']",form).val(data.price)):(select.data("disabled",!0),select.val(oldValue),select.data("disabled",!1),$j("input[name='errorKey']",form).val(data.errorKey)),document.dispatchEvent(bl.customEvent.addToCartSuccess)},error:function(xhr,status,error){select.removeAttr("disabled"),$j(".x-delete-orderItem",context).removeClass("disabled"),select.data("disabled",!0),select.val(oldValue),select.data("disabled",!1)}})}}),$j(".x-delete-orderItem",this.el).bind("click",function(event){if(event.preventDefault(),$j(this).hasClass("disabled"))return!1;var url=$j(this).attr("data-href");$j(this).addClass("disabled"),$j(".x-changeQuantity",context).attr("disabled","disabled");var _this_=this;return $j.ajax({dataType:"json",url:url,success:function(data){Box.close(_this_),document.dispatchEvent(bl.customEvent.addToCartSuccess)},error:function(xhr,status,error){Box.close(_this_)}}),!1}),$j(".price a",context).bind("click",function(){var D=$j(this).attr("data-modal-url");if(void 0!==D)return Box.open({modal:!0,url:D}),!1});var nbrElement=$j(".scp_box_white ul li",context).length;if(0<nbrElement){var pageMax=Math.ceil(nbrElement/3),page=1;$j(".scp_recommended_product .scp_paginate .scp_page",context).text(page),$j(".scp_recommended_product .scp_paginate .scp_page_max",context).text(pageMax),3<nbrElement&&$j(".scp_arrow.scp_next",context).addClass("active");$j(".scp_box_white ul li",context).outerWidth(!0);$j(".scp_arrow",context).unbind().bind("click",function(){var ElementWidth=$j(".scp_box_white ul li",context).outerWidth(!0)+15,nbrElement=$j(".scp_box_white ul li",context).length,carousel=nbrElement*ElementWidth,left=Math.abs(returnWPX($j(".view #carousel_container ul",context).css("left"))),temp=(Math.abs((3-nbrElement)*ElementWidth),left+3*ElementWidth);$j(this).hasClass("scp_next")?(page<pageMax&&page++,$j(".scp_recommended_product .scp_paginate .scp_page",context).text(page),nbrElement%3==0?temp<carousel&&(returnWPX($j(".view #carousel_container ul",context).css("left"))>=(3-nbrElement)*ElementWidth&&$j(".view #carousel_container ul",context).animate({left:"-="+3*ElementWidth},300,function(){var temp2=Math.abs(returnWPX($j(".view #carousel_container ul",context).css("left")))+3*ElementWidth;temp2<=carousel&&temp2==carousel&&$j(".scp_arrow.scp_next",context).removeClass("active")}),$j(".scp_arrow.scp_prev",context).addClass("active")):temp<=carousel&&(returnWPX($j(".view #carousel_container ul",context).css("left"))>=(3-nbrElement)*ElementWidth&&$j(".view #carousel_container ul",context).animate({left:"-="+3*ElementWidth},300,function(){var left2=Math.abs(returnWPX($j(".view #carousel_container ul",context).css("left")));carousel<left2+3*ElementWidth&&$j(".scp_arrow.scp_next",context).removeClass("active")}),$j(".scp_arrow.scp_prev",context).addClass("active"),temp==carousel&&$j(".scp_arrow.scp_next",context).removeClass("active"))):(Math.abs(returnWPX($j(".view #carousel_container ul",context).css("left")))==3*ElementWidth&&$j(".scp_arrow.scp_prev",context).removeClass("active"),1!=page&&($j(".scp_arrow.scp_next",context).addClass("active"),page--),returnWPX($j(".view #carousel_container ul",context).css("left"))<0&&$j(".view #carousel_container ul",context).animate({left:"+="+3*ElementWidth},300),$j(".scp_recommended_product .scp_paginate .scp_page",context).text(page))})}var addRemoveXSellProduct=function(event){if(event.preventDefault(),$j(this).hasClass("scp_pro_available"))return!1;var action=$j(this).attr("data-action"),actionUrl=$j(this).attr("href");if(null!==actionUrl&&""!==actionUrl&&void 0!==actionUrl||(actionUrl=$j(this).attr("data-url")),null==action||""===action||null==actionUrl||""===actionUrl)return!1;"delete"==action&&actionUrl.match("^catalog")&&(actionUrl="/webapp/wcs/stores/servlet/"+actionUrl);var that=this;return $j("#modal_confirm_cs_mp").addClass("mouseWaiting"),$j.getJSON(actionUrl,null,function(data){if("add"===action){if("error"==data.status)$j(that).addClass("scp_pro_unavailable").removeClass("scp_pro_add"),$j(that).attr("data-action",""),$j(that).attr("href",""),$j(that).attr("data-url","");else if("success"==data.status){$j(that).next(".scp_pro_delete").show().attr("href",data.deleteUrl),$j(that).prev(".remove").attr("href",data.deleteUrl),$j(that).removeClass("add").addClass("added").attr("disabled",!0).text("Ajout"),$j(that).prev(".remove").fadeIn(),$j(that).prevAll(".scp_pro_available").removeClass("hidden"),null!==$j(that).attr("data-url")&&""!==$j(that).attr("data-url")&&void 0!==$j(that).attr("data-url")||$j(that).hide(),bl.customEvent&&document.dispatchEvent(bl.customEvent.addToCartSuccess);try{var eventName="Ajouts_Paniers::Popin_ajout_panier::"+$j(that).attr("data-description")+"_"+$j(that).attr("data-partnumber").substring($j(that).attr("data-partnumber").length-10,$j(that).attr("data-partnumber"));tc_events_global(this,"ajouts_paniers",{event_name:eventName,event_type:"A"})}catch(e){console.error(e)}}}else $j(that).prevAll(".scp_pro_add").show(),$j(that).prevAll(".scp_pro_available").addClass("hidden"),$j(that).next(".added").removeClass("added").addClass("add").attr("disabled",!1).text("Ajouter au panier"),$j(that).fadeOut(),$j(that).hide(),document.dispatchEvent(bl.customEvent.addToCartSuccess)}),!1};$j(".scp_pro_add, .scp_pro_delete",this.el).unbind().bind("click",addRemoveXSellProduct),$j(".crossSelladd, .crossSellremove",this.el).unbind().bind("click",addRemoveXSellProduct),$j(".addService",this.el).unbind().bind("click",function(event){event.target.disabled=!event.target.disabled,event.preventDefault();var actionUrl=$j(this).attr("data-url");if(null==actionUrl||""===actionUrl)return!1;actionUrl="/webapp/wcs/stores/servlet/"+actionUrl;var that=this;$j.ajax({url:actionUrl,type:"POST",dataType:"json",success:function(json){urlbasePath=$j(that).attr("data-base-url"),$j(that).parents(".table").find(".removeService").attr("data-remove",urlbasePath+json.deleteUrl),$j(that).removeClass("add").addClass("added").attr("disabled",!0).text("Ajout"),$j(that).closest(".add-services").find(".remove").removeClass("remove").addClass("removed").fadeIn(),document.dispatchEvent(bl.customEvent.addToCartSuccess)}});var partNumber=$j(this).attr("data-part-number");if(void 0!==partNumber){var dataLayerProductServices=tc_vars.product_services;if(void 0!==dataLayerProductServices)for(var i=0;i<dataLayerProductServices.length;i++)if(partNumber===(serviceId=tc_vars.product_services[i].product_service_id)){var eventName="Ajouts_Services::popin::"+tc_vars.product_services[i].product_service_description+"_"+serviceId.substring(serviceId.length-10,serviceId.length)+"::"+tc_vars.product_description+"_"+tc_vars.product_sap.substring(tc_vars.product_sap.length-10,tc_vars.product_sap.length);tc_events_global(this,"ajouts_services",{event_name:eventName,event_type:"A"});break}if(!dataLayerProductServices){var descriptionService=$j(this).attr("data-description"),serviceId=$j(this).attr("data-part-number"),descriptionProduct=$j(this).attr("data-product-name"),productId=$j(this).attr("data-product-partnumber");eventName="Ajouts_Services::popin::"+descriptionService+"_"+serviceId.substring(serviceId.length-10,serviceId.length)+"::"+descriptionProduct+"_"+productId.substring(productId.length-10,productId.length),tc_events_global(this,"ajouts_services",{event_name:eventName,event_type:"A"})}}return!1}),$j(".removeService",this.el).unbind().bind("click",function(event){var urlDelete=$j(this).attr("data-remove");if(null==urlDelete||""===urlDelete)return!1;var that=this;return $j.ajax({url:urlDelete,cache:!0,type:"GET",async:!0,dataType:"json",success:function(json){null!=json&&($j(that).closest(".table").find(".added").removeClass("added").addClass("add").attr("disabled",!1).text("Ajouter"),$j(that).closest(".add-services").find(".removed").removeClass("removed").addClass("remove").fadeOut()),document.dispatchEvent(bl.customEvent.addToCartSuccess)}}),!1}),$j(".scp_pro_gamme").unbind("click").bind("click",function(){$j(".scp_category_product").remove();var catProduct=$j(this).attr("data-cat-product");$j.ajax({url:catProduct,success:function(response){$j("#modal_confirm_cs_mp").append(response);var context=$j("#modal_confirm_cs_mp .scp_category_product");$j(context).toggle("slow",function(){var height=$j(document).height();height2carousel=height2carousel<0?$j(context).height():0,carousel2=$j(context);$j(window).scrollTop();$j(".black_box").css("height",height),carousel2.is(":visible")?$j("html, body").animate({scrollTop:"+="+height2carousel},600):$j("html, body").animate({scrollTop:"-="+height2carousel},600)}),$j(".scp_pro_add, .scp_pro_delete",context).unbind().bind("click",addRemoveXSellProduct);var nbrElement_category=$j(".scp_box_grey ul li",context).length;if(0<nbrElement_category){var pageMax_category=Math.ceil(nbrElement_category/3),page_category=1;$j(".scp_paginate .scp_page",context).text(page_category),$j(".scp_paginate .scp_page_max",context).text(pageMax_category),3<nbrElement_category&&$j(".scp_arrow_category.scp_next_category",context).addClass("active");$j(".scp_box_grey ul li",context).outerWidth(!0);$j(".scp_arrow_category",context).bind("click",function(){var ElementWidth_category=$j(".scp_box_grey ul li",context).outerWidth(!0)+15,nbrElement_category=$j(".scp_box_grey ul li",context).length,carousel_category=nbrElement_category*ElementWidth_category,left_category=Math.abs(returnWPX($j("#carousel_container_category ul",context).css("left"))),temp_category=(Math.abs((3-nbrElement_category)*ElementWidth_category),left_category+3*ElementWidth_category);$j(this).hasClass("scp_next_category")?(page_category<pageMax_category&&page_category++,$j(".scp_paginate .scp_page",context).text(page_category),nbrElement_category%3==0?temp_category<carousel_category&&(returnWPX($j("#carousel_container_category ul",context).css("left"))>=(3-nbrElement_category)*ElementWidth_category&&$j("#carousel_container_category ul",context).animate({left:"-="+3*ElementWidth_category},300,function(){var temp2_category=Math.abs(returnWPX($j("#carousel_container_category ul",context).css("left")))+3*ElementWidth_category;temp2_category<=carousel_category&&temp2_category==carousel_category&&$j(".scp_arrow_category.scp_next_category",context).removeClass("active")}),$j(".scp_arrow_category.scp_prev_category",context).addClass("active")):temp_category<=carousel_category&&(returnWPX($j("#carousel_container_category ul",context).css("left"))>=(3-nbrElement_category)*ElementWidth_category&&$j("#carousel_container_category ul",context).animate({left:"-="+3*ElementWidth_category},300,function(){var left2_category=Math.abs(returnWPX($j("#carousel_container_category ul",context).css("left")));carousel_category<left2_category+3*ElementWidth_category&&$j(".scp_arrow_category.scp_next_category",context).removeClass("active")}),$j(".scp_arrow_category.scp_prev_category",context).addClass("active"),temp_category==carousel_category&&$j(".scp_arrow_category.scp_next_category",context).removeClass("active"))):($j(".scp_arrow_category.scp_next_category",context).addClass("active"),Math.abs(returnWPX($j("#carousel_container_category ul",context).css("left")))==3*ElementWidth_category&&$j(".scp_arrow_category.scp_prev_category",context).removeClass("active"),1!=page_category&&page_category--,returnWPX($j("#carousel_container_category ul",context).css("left"))<0&&$j("#carousel_container_category ul",context).animate({left:"+="+3*ElementWidth_category},300),$j(".scp_paginate .scp_page",context).text(page_category))})}}})}),void 0!==bl.catalog.modal.deliveryDates&&bl.catalog.modal.deliveryDates.bind(),$j(".continue-shopping",this.el).bind("click",function(){return Box._close(this),!1})}}),void 0===typeof $j)var $j=jQuery.noConflict();var ua=navigator.userAgent,event=ua.match(/iPad/i)?"touchstart":"click";function isDepartmentCodeFormat(value){return/[0-9]+/.test(value)&&2==value.length}function isCityNameFormat(value){return/[a-zA-Z]+/.test(value)}$j.initObject("bl.catalog.modal.storePickup");var isGoogleShoppingLink=!1,initPage2Events=function(){bl.catalog.modal.storePickup.page2Events(),isGoogleShoppingLink&&bl.catalog.productPage.googleShoppingContextualization&&bl.catalog.productPage.googleShoppingContextualization.isGoogleShoppingContext()&&$j(".content-list li").each(function(){bl.catalog.productPage.googleShoppingContextualization.getGoogleShoppingStoreCodeInUrl()===$j(this).attr("data-site-id")&&$j(this).children(".name-mag").click()})},initSelectedSortOption=function(){for(var i=0;i<$j("#dropdown option").size();i++)$j("#dropdown option")[i].value==$j("#sortByOption").val()&&$j("#dropdown").val($j("#sortByOption").val())};if($j.extend(bl.catalog.modal.storePickup,{bind:function(){$j(".x-addToStore, .x-addToStore-onlinePurchase").unbind("click").bind("click",function(){var url=$j(this).attr("data-modal-url"),store=$j(this).attr("data-modal-googleShoppingStore");isGoogleShoppingLink=!!store,Box.open({modal:!0,url:url,show:function(){if(0<Box.el.parent().find("div#exposition").length)bl.catalog.modal.storeHasProduct.events();else{bl.catalog.modal.storePickup.events();var deliveryPage=$j("#modal_store_pickup").attr("data-delivery-page"),orderId=($j("#modal_store_pickup").attr("data-multi-shipping"),$j("#modal_store_pickup").attr("data-order-id")),merchantId=$j("#modal_store_pickup").attr("data-merchant-id"),numDeliveryPage=$j("#modal_store_pickup").attr("data-num-delivery-page"),orderItemId=$j("#modal_store_pickup").attr("data-order-item-id"),shipModeId=$j("#modal_store_pickup").attr("data-shipmode-id"),zipCode=$j("#modal_store_pickup").attr("data-code-postal"),catentryId=$j("#modal_store_pickup").attr("data-catentry-id"),multiProduct=$j("#modal_store_pickup").attr("data-multiProduct"),productId=$j("#modal_store_pickup").attr("data-product-id"),postalCode=$j(".postal-code input:text"),postalCodeSubmit=$j(".postal-code input:submit"),isGoogleShoppingContext=void 0!==store&&""!==store,contextualisationZipCode=bl.cookie.getZipCodeUseForContextualisation(),isContextualisationZipCode=void 0!==contextualisationZipCode&&""!==contextualisationZipCode;void 0!==zipCode&&""!==zipCode||isContextualisationZipCode||isGoogleShoppingContext?(isGoogleShoppingContext?(zipCodeGoogleShopping=bl.catalog.productPage.googleShoppingContextualization.getGoogleShoppingStoreZipcodeInCookie(),void 0!==zipCodeGoogleShopping&&""!==zipCodeGoogleShopping?zipCode=zipCodeGoogleShopping:bl.catalog.productPage.googleShoppingContextualization._getStoreInformation(store,function(data){zipCode=data.sites.address.zipCode})):isContextualisationZipCode?zipCode=contextualisationZipCode:void 0!==postalCode&&""!==postalCode&&(zipCode=postalCode.val()),postalCode.val(zipCode).next(postalCodeSubmit).removeClass("off").removeAttr("disabled"),bl.catalog.modal.storePickup.storeListDisplay("",zipCode,orderId,merchantId,numDeliveryPage,catentryId,orderItemId,shipModeId,deliveryPage,multiProduct,productId,!0,"pickup")):postalCode.val()?(postalCode.next(postalCodeSubmit).removeClass("off").removeAttr("disabled"),bl.catalog.modal.storePickup.storeListDisplay("",postalCode.val(),orderId,merchantId,numDeliveryPage,catentryId,orderItemId,shipModeId,deliveryPage,multiProduct,productId,!0,"pickup")):"function"==typeof xt_med&&bl.catalog.modal.storePickup.storeListDisplay("","",orderId,merchantId,numDeliveryPage,catentryId,orderItemId,shipModeId,deliveryPage,multiProduct,productId,!0,"pickup")}}})}),$j(".x-consultAvailability").unbind("click").bind("click",function(){var url=$j(this).attr("data-modal-url");Box.open({modal:!0,url:url,show:function(){if(0<Box.el.parent().find("div#exposition").length)bl.catalog.modal.storeHasProduct.events();else{bl.catalog.modal.storePickup.events();var deliveryPage=$j("#modal_store_pickup").attr("data-delivery-page"),orderId=($j("#modal_store_pickup").attr("data-multi-shipping"),$j("#modal_store_pickup").attr("data-order-id")),merchantId=$j("#modal_store_pickup").attr("data-merchant-id"),numDeliveryPage=$j("#modal_store_pickup").attr("data-num-delivery-page"),orderItemId=$j("#modal_store_pickup").attr("data-order-item-id"),shipModeId=$j("#modal_store_pickup").attr("data-shipmode-id"),zipCode=$j("#modal_store_pickup").attr("data-code-postal"),catentryId=$j("#modal_store_pickup").attr("data-catentry-id"),multiProduct=$j("#modal_store_pickup").attr("data-multiProduct"),productId=$j("#modal_store_pickup").attr("data-product-id"),postalCode=$j(".postal-code input:text"),postalCodeSubmit=$j(".postal-code input:submit");void 0!==zipCode&&""!==zipCode?(void 0!==postalCode&&""!==postalCode&&(zipCode=postalCode.val()),postalCode.val(zipCode).next(postalCodeSubmit).removeClass("off").removeAttr("disabled"),bl.catalog.modal.storePickup.storeListDisplay("",zipCode,orderId,merchantId,numDeliveryPage,catentryId,orderItemId,shipModeId,deliveryPage,multiProduct,productId,!0,"consult")):postalCode.val()&&(postalCode.next(postalCodeSubmit).removeClass("off").removeAttr("disabled"),bl.catalog.modal.storePickup.storeListDisplay("",postalCode.val(),orderId,merchantId,numDeliveryPage,catentryId,orderItemId,shipModeId,deliveryPage,multiProduct,productId,!0,"pickup"))}}})})},events:function(){var storeFirstForm=$j("#modal_store_pickup form"),postalCode=$j(".postal-code input:text"),postalSearchCode=$j("#city"),postalCodeSubmit=$j(".postal-code input:submit"),postalCodeSearchSubmit=$j(".search-postal-code input:submit"),catentryId=$j("#modal_store_pickup").attr("data-catentry-id"),orderId=$j("#modal_store_pickup").attr("data-order-id"),merchantId=$j("#modal_store_pickup").attr("data-merchant-id"),orderItemId=$j("#modal_store_pickup").attr("data-order-item-id"),shipModeId=$j("#modal_store_pickup").attr("data-shipmode-id"),deliveryPage=$j("#modal_store_pickup").attr("data-delivery-page"),multiProduct=$j("#modal_store_pickup").attr("data-multiProduct"),productId=$j("#modal_store_pickup").attr("data-product-id"),numDeliveryPage=$j("#modal_store_pickup").attr("data-num-delivery-page"),storeBtn=$j(".content-list a.popup"),storeAvailabilityBtn=$j(".content-list a.storePickupAvailability"),closeBtn=$j(".modal_close"),zipCode=bl.cookie.getZipCodeFromGeolocationCookie();void 0!==zipCode&&!0!==zipCode&&postalCode.val(zipCode),$j(".on_region,.on_region_min, .geolocation").on(" touchstart click",function(e){$j(".view .page-01").hide(),$j(".page-02").css({display:"block"}),$j(".page-02 .main-list").html(""),$j(".page-02 .error").hide(),e.preventDefault();var codeRegion=$j(this).attr("data-region-code"),page="pickup";"storesCatalogPickUpAvailabilityPopin"==$j("#typePopin").val()&&(page="consult"),bl.catalog.modal.storePickup.storeListDisplay(codeRegion,"",orderId,merchantId,numDeliveryPage,catentryId,orderItemId,shipModeId,deliveryPage,multiProduct,productId,"pickup",page)}),$j('#modal_store_pickup .postal-code input[type="text"]').on("keyup",function(){postalCodeSubmit=$j(".postal-code input:submit"),2===$j(this).val().length||5===$j(this).val().length?postalCodeSubmit.removeClass("off").addClass("on").removeAttr("disabled"):postalCodeSubmit.addClass("off").removeClass("on").attr("disabled","disabled")}),postalCode.bind("keyup",function(e){return bl.form.zipCode($j(this),postalCodeSubmit)}),storeFirstForm.bind("submit",function(e){var postalCodeSave=postalCode.val();$j(".view .page-01").hide(),$j(".page-02").show(),$j(".page-02 .error").hide(),$j(".main-list").show(),postalSearchCode.val(postalCodeSave).next(postalCodeSearchSubmit).removeClass("off").removeAttr("disabled"),postalSearchCode.css("color","#000"),e.preventDefault();var page="pickup";"storesCatalogPickUpAvailabilityPopin"==$j("#typePopin").val()&&(page="consult"),bl.catalog.modal.storePickup.storeListDisplay("",postalCodeSave,orderId,merchantId,numDeliveryPage,catentryId,orderItemId,shipModeId,deliveryPage,multiProduct,productId,"pickup",page)}),storeBtn.bind("click",function(){return Box.close(this),!1}),storeAvailabilityBtn.bind("click",function(){return Box.close(this),!1}),closeBtn.on("touchstart click",function(){return Box.close(),!1})},eventsXitiTag:function(){"function"==typeof xt_med&&xt_med("F","17","Layer_confirmation_ajout_produit_retrait")},eventsXitiTagConsult:function(){"function"==typeof xt_med&&xt_med("F","17","Layer_confirmation_disponibilite_magasin_retrait")},mapOver:function(id,mag,region,map){if(1<mag?$j("body").append('<div id="on_region"><span>'+region+"</span><span>"+mag+" magasins</span></div>"):$j("body").append('<div id="on_region"><span>'+region+"</span><span>"+mag+" magasin</span></div>"),$j("#"+id).bind("mousemove",function(A){$j("#on_region").css({left:A.pageX-70,top:A.pageY-70,"z-index":"110000"})}),id=parseInt(id.slice(4,6),"10"),"big"===map)$j("#ssp_carte_hover").removeClass(),$j("#ssp_carte_hover").addClass("aff"+id);else{if("small"!==map)return!1;$j("#ssp_carte_hover_min").removeClass(),$j("#ssp_carte_hover_min").addClass("aff"+id)}},mapOut:function(id){$j("#ssp_carte_hover").removeClass(),$j("#ssp_carte_hover_min").removeClass(),$j("#"+id).unbind("mousemove"),$j("#on_region").remove()},mapClick:function(id,map){if(id=parseInt(id.slice(4,6),"10"),"big"===map)$j("#ssp_carte_click").removeClass(),$j("#ssp_carte_click").addClass("aff"+id),$j("#ssp_carte_click_min").addClass("aff"+id),$j("#on_region").remove();else{if("small"!==map)return!1;$j("#ssp_carte_click_min").removeClass(),$j("#ssp_carte_click_min").addClass("aff"+id)}},storeListDisplay:function(codeRegion,codePostal,orderId,merchantId,numDeliveryPage,catentryId,orderItemId,shipModeId,deliveryPage,multiProduct,productId,hide,page){var storeListURL;if($j(".page-02 .store-infos .error").remove(),storeListURL=$j(".page-02").attr("data-modal-url"),null!==orderItemId)for(var orderItemSplit=orderItemId.split(","),i=0;i<orderItemSplit.length;i++)storeListURL=0===i?storeListURL+"?orderItemId="+orderItemSplit[i]:storeListURL+"&orderItemId="+orderItemSplit[i];if(null!==catentryId)for(var catentrySplit=catentryId.split(","),k=0;k<catentrySplit.length;k++)storeListURL=storeListURL+"&catentryId="+catentrySplit[k];hide&&(""!==codePostal&&($j("#ville").val(codePostal),$j("#ville").css("color","#000")),$j(".page-02 .page-02-loader .main-loading").css({display:"block"})),$j.get(storeListURL,{storeId:bl.vars.storeId,catalogId:bl.vars.catalogId,langId:bl.vars.langId,orderId:orderId,merchantId:merchantId,numDeliveryPage:numDeliveryPage,shipModeId:shipModeId,codePostal:codePostal,codeRegion:codeRegion,deliveryPage:deliveryPage,multiProduct:multiProduct,productId:productId},function(data){hide&&$j(".page-02 .page-02-loader .main-loading").hide(),$j(".page-02 .store-infos").remove(),$j(".page-02").append(data),$j(".page-02").show(),bl.catalog.modal.storePickup.page2Events(),""!==codePostal&&($j("#city").val(codePostal),$j("#city").css("color","#000"));var searchParams=null,searchType=null,region=null;if(codeRegion){searchType="region";var regionArea=$j(".page-01 .map area[data-region-code="+codeRegion+"]");region=null,regionArea&&(region=regionArea.data("region"))}else searchType=codePostal&&2<codePostal.length?"postalCode":"departement";(searchParams={value:codeRegion?region:codePostal,type:searchType}).url=$j("#city").closest("#modal_store_pickup").find("#storemap-form").attr("data-search-url");var callBackFunctions=[initPage2Events];void 0!==codePostal&&""!==codePostal&&("consult"==page?(xt_med("F","17","layer_disponibilite_magasin"),bl.delivery.searchSites(searchParams,".store-infos","storesCatalogPickUpAvailabilityPopin",callBackFunctions)):(xt_med("F","17","layer_liste_magasin"),bl.delivery.searchSites(searchParams,".store-infos","storesCatalogPickUpPopin",callBackFunctions)))}),$j(".view .page-01").hide()},page2Events:function(){var postalCode=$j(".postal-code input:text"),postalCodeSubmit=($j("#city"),$j(".postal-code input:submit")),postalCodeSearchSubmit=$j(".search-postal-code input:submit"),catentryId=$j("#modal_store_pickup").attr("data-catentry-id"),storeTitle=($j(".content-list li"),$j("li.store-mag .name-mag")),orderId=($j(".content-list a.popup"),$j(".content-list a.storePickupAvailability"),$j(".modal_close"),$j("#modal_store_pickup").attr("data-order-id")),merchantId=$j("#modal_store_pickup").attr("data-merchant-id"),orderItemId=$j("#modal_store_pickup").attr("data-order-item-id"),shipModeId=$j("#modal_store_pickup").attr("data-shipmode-id"),deliveryPage=$j("#modal_store_pickup").attr("data-delivery-page"),storeInfos=($j("#modal_store_pickup").attr("data-multiProduct"),$j("#modal_store_pickup").attr("data-product-id"),$j(".content-list .info-mag")),storeInfosBtn=$j(".content-list .info-mag .fermeture-info"),autocompleteUrl=$j("#city").attr("data-autocomplete-url");$j("#city").closest("#modal_store_pickup").find("#storemap-form").attr("data-search-url");$j("#city").bind("keypress",function(){$j(this).css({color:"#000"});var minLength=2;isCityNameFormat($j(this).val())&&(minLength=3),2<=minLength&&$j(this).autocomplete({minLength:minLength})}),$j("#city").autocomplete({source:function(request,response){var departmentCode,zipCode,cityName,isDepartmentSearch=!1,isZipCodeSearch=!1,isCityNameSearch=!1,params={storeId:bl.vars.storeId,catalogId:bl.vars.catalogId,langId:bl.vars.langId};isDepartmentCodeFormat(request.term)?(departmentCode=request.term,isDepartmentSearch=!0,params.departmentCode=departmentCode):isZipCodeFormat(request.term)?(zipCode=request.term,isZipCodeSearch=!0,params.zipCode=zipCode):isCityNameFormat(request.term)&&(cityName=request.term,isCityNameSearch=!0,params.cityName=cityName),isDepartmentSearch||isZipCodeSearch||isCityNameSearch?$j.ajax({url:autocompleteUrl,dataType:"json",data:params,success:function(data){if($j("#city").removeClass("ui-autocomplete-loading"),isDepartmentSearch){$j("#codePostal").val(data.code);var responseArray=[];if(responseArray[0]={value:data.code,label:data.code+" - "+data.name},void 0!==data.stores){for(postalCodeSearchSubmit.removeClass("off").removeAttr("disabled"),i=0;i<data.stores.length;i++)responseArray.push({value:data.stores[i].code,label:data.stores[i].name});response(responseArray)}else response({})}else isZipCodeSearch?void 0!==data.cities&&0<data.cities.length?(postalCodeSearchSubmit.removeClass("off").removeAttr("disabled"),$j("#codePostal").val(data.cities[0].zipCode),response($j.map(data.cities,function(v,i){return{value:v.zipCode,label:v.zipCode+" - "+v.cityName}}))):response({}):isCityNameSearch&&void 0!==data.cities&&0<data.cities.length?(postalCodeSearchSubmit.removeClass("off").removeAttr("disabled"),$j("#codePostal").val(data.cities[0].zipCode),response($j.map(data.cities,function(v,i){return{value:v.zipCode,label:v.cityName+" - "+v.zipCode}}))):response({})},error:function(){$j("#city").removeClass("ui-autocomplete-loading"),response({})}}):($j("#city").removeClass("ui-autocomplete-loading"),response({}))},appendTo:".list-selection",autoFocus:!0,position:{my:"left top",at:"left top",of:".list-selection"},minLength:2,messages:{noResults:function(){$j(".refine").size()<1?$j(".ui-autocomplete").after('<div class="refine">Aucun r&eacute;sultat trouv&eacute;</div>'):$j(".refine").html("Aucun r&eacute;sultat trouv&eacute;"),$j(".refine").addClass("on"),$j(".ui-widget-content").css("height","auto")},results:function(){var b=$j(".ui-autocomplete li:visible").length,maxStoresToRetrieve=$j("#maxStoresToRetrieve").val();null!==maxStoresToRetrieve&&(maxStoresToRetrieve=parseInt(maxStoresToRetrieve));var c=$j(".refine").size();if(maxStoresToRetrieve<b){c<1?$j(".ui-autocomplete").after('<div class="refine">Veuillez affiner votre recherche</div>'):$j(".refine").html("Veuillez affiner votre recherche"),$j(".refine").addClass("on"),$j(".ui-widget-content").css("height","auto");var i=1;$j(".ui-autocomplete li").each(function(){maxStoresToRetrieve<i&&$j(this).css({display:"none"}),i++})}else $j(".refine").removeClass("on"),$j(".ui-widget-content").css({height:""});$j(".ui-menu-item").click(function(){$j(".refine").removeClass("on")})}},select:function(v,i){postalCodeSearchSubmit.removeClass("off").removeAttr("disabled"),$j(".refine").removeClass("on"),$j("#city").val(i.item.value),$j("#codePostal").val(i.item.value),postalCodeSearchSubmit.click()},open:function(){$j(".ui-widget-content").css("cssText","width: 100% !important;")}}).data("ui-autocomplete")._renderItem=function(ul,item){var d=$j("#city").val().toUpperCase();return value=item.label.replace(d,"<span>"+d+"</span>"),$j("<li></li>").data("ui-autocomplete-item",item).append("<a>"+value+"</a>").appendTo(ul)},postalCodeSearchSubmit.unbind().bind("click",function(){var codePostal=$j("#codePostal").val(),typePopin=($j("#codeRegion").val(),$j("#sortByOption").val(),$j("#catentryId").val(),$j("#typePopin").val()),callBackFunctions=($j("#modal_store_pickup").attr("data-delivery-page"),[initPage2Events,initSelectedSortOption]);if(null!==codePostal&&""!==codePostal){"";var codePostalVal=$j("#codePostal").val();void 0!==codePostalVal&&5===codePostalVal.length&&(sessionStorage.setItem("SEARCH_ZIPCODE",codePostalVal),$j.removeCookie("WC_BOULANGER_GEOCODE_RESULTS",{path:"/"}),bl.woosmap.saveUserGeolocation())}var searchParams={type:2<$j("#city").val().length?"postalCode":"departement",value:$j("#city").val()};return searchParams.url=$j("#city").closest("#modal_store_pickup").find("#storemap-form").attr("data-search-url"),bl.delivery.searchSites(searchParams,".store-infos",typePopin,callBackFunctions),!1}),$j(".selection span.pickup").unbind().bind("click",function(e){$j(".view .page-02").hide(),$j(".page-01").css({display:"block"}),$j(".error").css({display:"none"}),xt_med("F","17","layer_choix_magasin"),$j("#city").val("Magasin, ville ou code postal"),postalCode.val(""),postalCodeSubmit.addClass("off").attr("disabled","disabled"),e.preventDefault()}),$j(".selection span.consult").unbind().bind("click",function(e){$j(".view .page-02").hide(),$j(".page-01").css({display:"block"}),$j(".error").css({display:"none"}),xt_med("F","17","layer_choix_magasin_disponibilite_magasin"),$j("#city").val("Magasin, ville ou code postal"),postalCode.val(""),postalCodeSubmit.addClass("off").attr("disabled","disabled"),e.preventDefault()}),$j(".content-list li a.popup").unbind().bind("click",function(e){e.preventDefault(),showLoadingLayer();var modalUrl=$j(this).attr("data-modal-url"),li=$j(this).parents("li.store-mag"),siteId=li.attr("data-site-id"),zipCode=li.attr("data-zipcode"),city=li.attr("data-city"),numDeliveryPage=$j(this).parents(".store-infos").attr("data-num-delivery-page"),action=modalUrl+"?storeId="+bl.vars.storeId+"&catalogId="+bl.vars.catalogId+"&langId="+bl.vars.langId+"&orderId="+orderId+"&merchantId="+merchantId+"&numDeliveryPage="+numDeliveryPage,productpartNumber=$j("#modal_store_pickup").attr("data-partnumber"),catgroupId=$j("#modal_store_pickup").attr("data-catgroupId");if(null!==orderItemId)for(var orderItemSplit=orderItemId.split(","),i=0;i<orderItemSplit.length;i++)action=action+"&orderItemId="+orderItemSplit[i];if(null!==catentryId)for(var catentrySplit=catentryId.split(","),j=0;j<catentrySplit.length;j++)action=action+"&catEntryId="+catentrySplit[j];if(null!==productpartNumber&&(action=action+"&productpartNumber="+productpartNumber),null!==catgroupId&&(action=action+"&catgroupId="+catgroupId),action=action+"&shipModeId="+shipModeId+"&siteId="+siteId+"&zipCode="+zipCode+"&city="+city+"&favCodeMagasin="+siteId,$j(this).hasClass("drive")?action+="&action=DRV":action+="&action=REM","true"===deliveryPage)$j.ajax({type:"get",url:action,complete:function(data){var url=document.location.href;document.location.href=url+"&lastStoreIndex=0&storeUpdated=true"}});else{$j("input.product-service[type='radio']").each(function(index,value){$j(this).is(":checked")&&(action+="&serviceCatentryId="+$j(this).val()+":"+$j(this).data("zipcode"))});var offerIdService,offerIdServiceVal=$j("#inputAddServices").val();if(null!=offerIdServiceVal&&(offerIdService=offerIdServiceVal.split(":")[1]),offerIdService==$j(this).parents("#modal_store_pickup").attr("data-catentry-id")){var bestServSell=null;$j("#inputAddServices").hasClass("added")&&(bestServSell=$j("#inputAddServices").val(),action+="&serviceCatentryId="+bestServSell),$j("#inputAddServices").hasClass("added")||null!=(bestServSell=$j("#inputAddServices").val())&&""!=bestServSell&&(action+="&bestServSell="+bestServSell),$j("button.added").each(function(index,value){bestServSell!=$j(this).val()&&(action+="&serviceCatentryId="+$j(this).val()+":")})}Box._close(),Box.open({modal:!0,url:action,show:function(){hideLoadingLayer(),bl.catalog.modal.storePickup.eventsXitiTag(),bl.catalog.modal.addToCart.events(),document.dispatchEvent(bl.customEvent.addToCartSuccess)}})}return!1}),$j(".content-list li a.storePickupAvailability").unbind().bind("click",function(e){e.preventDefault();var modalUrl=$j(this).attr("data-modal-url"),li=$j(this).parents("li.store-mag"),siteId=li.attr("data-site-id"),zipCode=li.attr("data-zipcode"),city=li.attr("data-city"),action=modalUrl+"?storeId="+bl.vars.storeId+"&catalogId="+bl.vars.catalogId+"&langId="+bl.vars.langId+"&orderId="+orderId+"&merchantId="+merchantId;if(null!==orderItemId)for(var orderItemSplit=orderItemId.split(","),i=0;i<orderItemSplit.length;i++)action=action+"&orderItemId="+orderItemSplit[i];if(null!==catentryId)for(var catentrySplit=catentryId.split(","),j=0;j<catentrySplit.length;j++)action=action+"&catEntryId="+catentrySplit[j];if(action=action+"&shipModeId="+shipModeId+"&siteId="+siteId+"&zipCode="+zipCode+"&city="+city+"&favCodeMagasin="+siteId,"true"===deliveryPage)$j.ajax({type:"get",url:action,complete:function(data){var url=document.location.href;document.location.href=url+"&lastStoreIndex=0"}});else{$j("input.product-service[type='radio']").each(function(index,value){$j(this).is(":checked")&&(action+="&serviceCatentryId="+$j(this).val()+":"+$j(this).data("zipcode"))});var bestServSell=null;$j("#inputAddServices").hasClass("added")&&(bestServSell=$j("#inputAddServices").val(),action+="&serviceCatentryId="+bestServSell),$j("#inputAddServices").hasClass("added")||null!=(bestServSell=$j("#inputAddServices").val())&&""!=bestServSell&&(action+="&bestServSell="+bestServSell),$j("button.added").each(function(index,value){bestServSell!=$j(this).val()&&(action+="&serviceCatentryId="+$j(this).val()+":")}),Box._close(),Box.open({modal:!0,url:action,show:function(){hideLoadingLayer(),bl.catalog.modal.storePickup.eventsXitiTagConsult(),bl.catalog.modal.addToCart.events(),document.dispatchEvent(bl.customEvent.addToCartSuccess)}})}return!1}),storeInfosBtn.bind("click",function(){$j(this).parent(storeInfos).slideUp("slow"),$j(this).parents("li").find(".name-mag").removeClass("selected")}),storeTitle.bind("click",function(e){bl.google.isLoaded()?bl.catalog.modal.storePickup.showTimeTableAndMapForCatalogStorePopin($j(this)):bl.google.initAPI("bl.catalog.modal.storePickup.showTimeTableAndMapForCatalogStorePopin",bl.catalog.modal.storePickup.showTimeTableAndMapForCatalogStorePopin,$j(this))}),$j("input:text").each(function(){var v=this.value;$j(this).blur(function(){0===this.value.length&&($j(".refine").removeClass("on"),this.value=v)}).focus(function(){this.value=""})}),$j("#dropdown")&&$j("#dropdown").unbind().bind("change",function(){var sortingTypeVal=$j(this).val();$j("#sortByOption").val(sortingTypeVal);var cityValue=$j("#city").val(),codeRegion=$j("#codeRegion").val();if($j.isNumeric(cityValue))postalCodeSearchSubmit.click();else if(codeRegion){var regionArea=$j(".page-01 .map area[data-region-code="+codeRegion+"]"),regionValue=null;regionArea&&(regionValue=regionArea.data("region"));var searchParams={type:"region",value:regionValue};searchParams.url=$j("#city").closest("#modal_store_pickup").find("#storemap-form").attr("data-search-url");var callBackFunctions=[initPage2Events,initSelectedSortOption];bl.delivery.searchSites(searchParams,".store-infos","storesCatalogPickUpPopin",callBackFunctions)}})},showTimeTableAndMapForCatalogStorePopin:function(element){if($j(".content-list ul li .info-mag").slideUp("slow"),element.is(".selected"))$j("li.store-mag .name-mag").removeClass("selected");else{element.siblings(".info-mag").slideDown("slow"),$j("li.store-mag .name-mag").removeClass("selected"),element.addClass("selected"),setCookie("BL_CLICKED_STORE",element.parents("li").attr("data-zipcode")+"-"+element.parents("li").attr("data-site-id").toUpperCase(),"","/",".boulanger.com");var _this=element.siblings(".info-mag");_this.is(".created")||(_this.addClass("created"),bl.map.createGoogleMap(_this,".store-mag"))}}}),void 0===typeof $j)var $j=jQuery.noConflict();if($j.initObject("bl.catalog.modal.prenium"),$j.extend(bl.catalog.modal.prenium,{bind:function(){$j(".prenium").unbind("click").bind("click",function(){var url=$j(this).attr("data-modal-url");Box.open({modal:!0,url:url,show:function(){}})})}}),void 0===typeof $j)var $j=jQuery.noConflict();if($j(document).ready(function(){if(0<$j(".grid-list").length){window.setInterval(dispoMag,100);function dispoMag(){if(0<$j(".alertDispo.on").length){clearInterval(dispoMag);for(var listNotifyMe=$j(".alertDispo.on .notifyme"),i=0;i<listNotifyMe.length;i++)$j(listNotifyMe[i]).closest(".deliveryDatesModal").attr("data-modal-url",$j(listNotifyMe[i]).attr("data-modal-url")),$j(listNotifyMe[i]).removeAttr("data-modal-url")}var listDelivery=$j(".alertDispo.on").closest(".deliveryDatesModal").find(".purchaseBlockAvailability");for(i=0;i<listDelivery.length;i++){var item=$j(listDelivery[i]);$j(item).closest(".deliveryDatesModal").unbind("click").bind("click",function(){if($j(this).attr("data-modal-url")){var url=$j(this).attr("data-modal-url");Box.open({modal:!0,url:url,show:function(){$j(".modal_close").on("click",function(){$j(".black_box").hide()}),$j(".black_box").on("click",function(){$j(".black_box").hide()})}})}})}var listUnavailableDelivery=$j(".alertDispo.off").closest(".deliveryDatesModal").find(".purchaseBlockAvailability");for(i=0;i<listUnavailableDelivery.length;i++){"indisponible"==(item=$j(listUnavailableDelivery[i])).html()&&item.closest(".deliveryDatesModal").addClass("no")}}setTimeout(clearInterval(dispoMag),3e3)}}),$j.initObject("bl.catalog.modal.notifyme"),$j.extend(bl.catalog.modal.notifyme,{bind:function(){$j(".notifyme").unbind("click").bind("click",function(){var url=$j(this).attr("data-modal-url");Box.open({modal:!0,url:url,show:function(){$j(".modal_close").on("click",function(){$j(".black_box").hide()}),$j(".black_box").on("click",function(){$j(".black_box").hide()})}})})},events:function(){var emailRadio=$j("#notifyme_modal #emailType"),emailField=$j("#notifyme_modal #email"),smsRadio=(emailField.val(),$j("#notifyme_modal #smsType")),smsField=$j("#notifyme_modal #phoneNumber"),validBtn=(smsField.val(),$j("#notifyme_modal form div.buttons")),emailParentP=emailField.parents("p"),smsParentP=smsField.parents("p"),checkEmailField=function(field){smsParentP.removeClass("ok"),smsParentP.removeClass("nok"),""!==field.val()&&field.val().match(/^[a-zA-Z0-9\+._-]+@[a-z0-9._-]{2,}\.[a-z]{2,4}$/)?(emailParentP.removeClass("nok").addClass("ok"),validBtn.removeClass("off")):(emailParentP.removeClass("ok").addClass("nok"),validBtn.addClass("off"))},checkSmsField=function(field){emailParentP.removeClass("ok"),emailParentP.removeClass("nok"),""!==field.val()&&field.val().match(/^0[1-7,9][0-9]{8}$/)?(smsParentP.removeClass("nok").addClass("ok"),validBtn.removeClass("off")):(smsParentP.removeClass("ok").addClass("nok"),validBtn.addClass("off"))};emailField.bind("blur",function(){checkEmailField(emailField)}).bind("keyup focus",function(){emailRadio.attr("checked","checked"),checkEmailField(emailField)}),emailRadio.bind("change",function(){$j(this).attr("checked")&&(emailField.focus(),checkEmailField(emailField))}),smsField.bind("blur",function(){checkSmsField(smsField)}).bind("keyup focus",function(){smsRadio.attr("checked","checked"),checkSmsField(smsField)}),smsRadio.bind("change",function(){$j(this).attr("checked")&&(smsField.focus(),checkSmsField(smsField))}),validBtn.find("a.next").bind("click",function(){if($j(this).parent().hasClass("off"))return!1;var form=$j(this).parents("form[id=notifymeForm]");$j("#notifyme_modal #success").hide(),$j("#notifyme_modal #failure").hide(),$j.ajax({type:"post",data:form.serialize(),url:form.attr("action"),complete:function(data){"success"===getAttrFromResponse($j(data.responseText),"notifyme_modal","data-status")?($j("#notifyme_modal #success").show(),$j("#notifyme_modal #notifymeForm").remove()):$j("#notifyme_modal #failure").show()}})}),"function"==typeof xt_med&&xt_med("F","95","Alerting_dispo_produit::layer_disponibilite");var weekSelect=$j("#notifyme_modal #week")[0];bl.catalog.modal.notifyme.weekToSpan(weekSelect.options[weekSelect.selectedIndex])},weekToSpan:function(object){var temps=new Date,i=0;document.getElementById("week")&&(i=document.getElementById("week").value);var absolu_ensuite=temps.getTime()+7*i*24*60*60*1e3;temps.setTime(absolu_ensuite);var tab_jour=new Array("Dim","Lun","Mar","Mer","Jeu","Ven","Sam"),annee=temps.getFullYear(),mois=temps.getMonth()+1;mois<10&&(mois="0"+mois);var jour=temps.getDate();jour<10&&(jour="0"+jour);var journee=tab_jour[temps.getDay()],span_jour_date=document.getElementById("journee"),span_jour=document.getElementById("jour"),span_mois=document.getElementById("mois"),span_annee=document.getElementById("annee");span_jour_date&&(span_jour_date.innerHTML=journee),span_jour&&(span_jour.innerHTML=jour),span_mois&&(span_mois.innerHTML=mois),span_annee&&(span_annee.innerHTML=annee),1==i?$j("#notifyme_modal #semaine").hide():1<i&&$j("#notifyme_modal #semaine").show()}}),function(window,$,undefined){var $body,$datepickersContainer,datepicker,containerBuilt,defaults,hotKeys,Datepicker;defaults={classes:"",inline:containerBuilt=!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg class="a-decepticon" aria-hidden="true" viewBox="0 0 50 50"><use xlink:href="#mono-arrow-on-roundedsquare"></use></svg>',nextHtml:'<svg class="a-decepticon" aria-hidden="true" viewBox="0 0 50 50"><use xlink:href="#mono-arrow-on-roundedsquare"></use></svg>',navTitles:{days:'<span class="month">MM</span> <i>yyyy</i>',months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:"",onShow:"",onHide:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},hotKeys={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]},(datepicker=Datepicker=function(el,options){this.el=el,this.$el=$(el),this.opts=$.extend(!0,{},defaults,options,this.$el.data()),null==$body&&($body=$("body")),this.opts.startDate||(this.opts.startDate=new Date),"INPUT"==this.el.nodeName&&(this.elIsInput=!0),this.opts.altField&&(this.$altField="string"==typeof this.opts.altField?$(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this._prevOnSelectValue="",this.init()}).prototype={VERSION:"2.2.3",viewIndexes:["days","months","years"],init:function(){containerBuilt||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&!this.opts.onlyTimepicker&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.timepicker&&(this.timepicker=new $.fn.datepicker.Timepicker(this,this.opts),this._bindTimepickerEvents()),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.views[this.currentView]=new $.fn.datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new $.fn.datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$el.on("clickCell.adp",this._onClickCell.bind(this)),this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("keyup.adp",this._onKeyUpGeneral.bind(this)),$(window).on("resize.adp",this._onResize.bind(this)),$("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(day){return-1!==this.opts.weekends.indexOf(day)},_defineLocale:function(lang){"string"==typeof lang?(this.loc=$.fn.datepicker.language[lang],this.loc||(console.warn("Can't find language \""+lang+'" in Datepicker.language, will use "ru" instead'),this.loc=$.extend(!0,{},$.fn.datepicker.language.ru)),this.loc=$.extend(!0,{},$.fn.datepicker.language.ru,$.fn.datepicker.language[lang])):this.loc=$.extend(!0,{},$.fn.datepicker.language.ru,lang),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),this.opts.timeFormat&&(this.loc.timeFormat=this.opts.timeFormat),""!==this.opts.firstDay&&(this.loc.firstDay=this.opts.firstDay),this.opts.timepicker&&(this.loc.dateFormat=[this.loc.dateFormat,this.loc.timeFormat].join(this.opts.dateTimeSeparator)),this.opts.onlyTimepicker&&(this.loc.dateFormat=this.loc.timeFormat);var boundary=this._getWordBoundaryRegExp;(this.loc.timeFormat.match(boundary("aa"))||this.loc.timeFormat.match(boundary("AA")))&&(this.ampm=!0)},_buildDatepickersContainer:function(){containerBuilt=!0,$body.append('<div class="datepickers-container" id="datepickers-container"></div>'),$datepickersContainer=$("#datepickers-container")},_buildBaseHtml:function(){var $appendTarget,$inline=$('<div class="datepicker-inline">');$appendTarget="INPUT"==this.el.nodeName?this.opts.inline?$inline.insertAfter(this.$el):$datepickersContainer:$inline.appendTo(this.$el),this.$datepicker=$('<div class="datepicker"><i class="datepicker--pointer"></i><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>').appendTo($appendTarget),this.$content=$(".datepicker--content",this.$datepicker),this.$nav=$(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length){if(""===this._prevOnSelectValue)return;return this._prevOnSelectValue="",this.opts.onSelect("","",this)}var formattedDates,selectedDates=this.selectedDates,parsedSelected=datepicker.getParsedDate(selectedDates[0]),_this=this,dates=new Date(parsedSelected.year,parsedSelected.month,parsedSelected.date,parsedSelected.hours,parsedSelected.minutes);formattedDates=selectedDates.map(function(date){return _this.formatDate(_this.loc.dateFormat,date)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(dates=selectedDates.map(function(date){var parsedDate=datepicker.getParsedDate(date);return new Date(parsedDate.year,parsedDate.month,parsedDate.date,parsedDate.hours,parsedDate.minutes)})),this._prevOnSelectValue=formattedDates,this.opts.onSelect(formattedDates,dates,this)},next:function(){var d=this.parsedDate,o=this.opts;switch(this.view){case"days":this.date=new Date(d.year,d.month+1,1),o.onChangeMonth&&o.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(d.year+1,d.month,1),o.onChangeYear&&o.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(d.year+10,0,1),o.onChangeDecade&&o.onChangeDecade(this.curDecade)}},prev:function(){var d=this.parsedDate,o=this.opts;switch(this.view){case"days":this.date=new Date(d.year,d.month-1,1),o.onChangeMonth&&o.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(d.year-1,d.month,1),o.onChangeYear&&o.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(d.year-10,0,1),o.onChangeDecade&&o.onChangeDecade(this.curDecade)}},formatDate:function(string,date){date=date||this.date;var validHours,result=string,boundary=this._getWordBoundaryRegExp,locale=this.loc,leadingZero=datepicker.getLeadingZeroNum,decade=datepicker.getDecade(date),d=datepicker.getParsedDate(date),fullHours=d.fullHours,hours=d.hours,ampm=string.match(boundary("aa"))||string.match(boundary("AA")),dayPeriod="am",replacer=this._replacer;switch(this.opts.timepicker&&this.timepicker&&ampm&&(fullHours=leadingZero((validHours=this.timepicker._getValidHoursFromDate(date,ampm)).hours),hours=validHours.hours,dayPeriod=validHours.dayPeriod),!0){case/@/.test(result):result=result.replace(/@/,date.getTime());case/aa/.test(result):result=replacer(result,boundary("aa"),dayPeriod);case/AA/.test(result):result=replacer(result,boundary("AA"),dayPeriod.toUpperCase());case/dd/.test(result):result=replacer(result,boundary("dd"),d.fullDate);case/d/.test(result):result=replacer(result,boundary("d"),d.date);case/DD/.test(result):result=replacer(result,boundary("DD"),locale.days[d.day]);case/D/.test(result):result=replacer(result,boundary("D"),locale.daysShort[d.day]);case/mm/.test(result):result=replacer(result,boundary("mm"),d.fullMonth);case/m/.test(result):result=replacer(result,boundary("m"),d.month+1);case/MM/.test(result):result=replacer(result,boundary("MM"),this.loc.months[d.month]);case/M/.test(result):result=replacer(result,boundary("M"),locale.monthsShort[d.month]);case/ii/.test(result):result=replacer(result,boundary("ii"),d.fullMinutes);case/i/.test(result):result=replacer(result,boundary("i"),d.minutes);case/hh/.test(result):result=replacer(result,boundary("hh"),fullHours);case/h/.test(result):result=replacer(result,boundary("h"),hours);case/yyyy/.test(result):result=replacer(result,boundary("yyyy"),d.year);case/yyyy1/.test(result):result=replacer(result,boundary("yyyy1"),decade[0]);case/yyyy2/.test(result):result=replacer(result,boundary("yyyy2"),decade[1]);case/yy/.test(result):result=replacer(result,boundary("yy"),d.year.toString().slice(-2))}return result},_replacer:function(str,reg,data){return str.replace(reg,function(match,p1,p2,p3){return p1+data+p3})},_getWordBoundaryRegExp:function(sign){var symbols="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+symbols+")("+sign+")($|<|"+symbols+")","g")},selectDate:function(date){var _this=this,opts=_this.opts,d=_this.parsedDate,len=_this.selectedDates.length,newDate="";if(Array.isArray(date))date.forEach(function(d){_this.selectDate(d)});else if(date instanceof Date){if(this.lastSelectedDate=date,this.timepicker&&this.timepicker._setTime(date),_this._trigger("selectDate",date),this.timepicker&&(date.setHours(this.timepicker.hours),date.setMinutes(this.timepicker.minutes)),"days"==_this.view&&date.getMonth()!=d.month&&opts.moveToOtherMonthsOnSelect&&(newDate=new Date(date.getFullYear(),date.getMonth(),1)),"years"==_this.view&&date.getFullYear()!=d.year&&opts.moveToOtherYearsOnSelect&&(newDate=new Date(date.getFullYear(),0,1)),newDate&&(_this.silent=!0,_this.date=newDate,_this.silent=!1,_this.nav._render()),opts.multipleDates&&!opts.range){if(len===opts.multipleDates)return;_this._isSelected(date)||_this.selectedDates.push(date)}else opts.range?2==len?(_this.selectedDates=[date],_this.minRange=date,_this.maxRange=""):1==len?(_this.selectedDates.push(date),_this.maxRange?_this.minRange=date:_this.maxRange=date,datepicker.bigger(_this.maxRange,_this.minRange)&&(_this.maxRange=_this.minRange,_this.minRange=date),_this.selectedDates=[_this.minRange,_this.maxRange]):(_this.selectedDates=[date],_this.minRange=date):_this.selectedDates=[date];_this._setInputValue(),opts.onSelect&&_this._triggerOnChange(),opts.autoClose&&!this.timepickerIsActive&&(opts.multipleDates||opts.range?opts.range&&2==_this.selectedDates.length&&_this.hide():_this.hide()),_this.views[this.currentView]._render()}},removeDate:function(date){var selected=this.selectedDates,_this=this;if(date instanceof Date)return selected.some(function(curDate,i){if(datepicker.isSame(curDate,date))return selected.splice(i,1),_this.selectedDates.length?_this.lastSelectedDate=_this.selectedDates[_this.selectedDates.length-1]:(_this.minRange="",_this.maxRange="",_this.lastSelectedDate=""),_this.views[_this.currentView]._render(),_this._setInputValue(),_this.opts.onSelect&&_this._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date,this.opts.todayButton instanceof Date&&this.selectDate(this.opts.todayButton)},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(param,value){var len=arguments.length,lastSelectedDate=this.lastSelectedDate;return 2==len?this.opts[param]=value:1==len&&"object"==typeof param&&(this.opts=$.extend(!0,this.opts,param)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.opts.onlyTimepicker||this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.opts.timepicker&&(lastSelectedDate&&this.timepicker._handleDate(lastSelectedDate),this.timepicker._updateRanges(),this.timepicker._updateCurrentTime(),lastSelectedDate&&(lastSelectedDate.setHours(this.timepicker.hours),lastSelectedDate.setMinutes(this.timepicker.minutes))),this._setInputValue(),this},_syncWithMinMaxDates:function(){var curTime=this.date.getTime();this.silent=!0,this.minTime>curTime&&(this.date=this.minDate),this.maxTime<curTime&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(checkDate,cellType){var res=!1;return this.selectedDates.some(function(date){if(datepicker.isSame(date,checkDate,cellType))return res=date,!0}),res},_setInputValue:function(){var altValues,_this=this,opts=_this.opts,format=_this.loc.dateFormat,altFormat=opts.altFieldDateFormat,value=_this.selectedDates.map(function(date){return _this.formatDate(format,date)});opts.altField&&_this.$altField.length&&(altValues=(altValues=this.selectedDates.map(function(date){return _this.formatDate(altFormat,date)})).join(this.opts.multipleDatesSeparator),this.$altField.val(altValues)),value=value.join(this.opts.multipleDatesSeparator),this.$el.val(value)},_isInRange:function(date,type){var time=date.getTime(),d=datepicker.getParsedDate(date),min=datepicker.getParsedDate(this.minDate),max=datepicker.getParsedDate(this.maxDate),dMinTime=new Date(d.year,d.month,min.date).getTime(),dMaxTime=new Date(d.year,d.month,max.date).getTime(),types={day:time>=this.minTime&&time<=this.maxTime,month:dMinTime>=this.minTime&&dMaxTime<=this.maxTime,year:d.year>=min.year&&d.year<=max.year};return type?types[type]:types.day},_getDimensions:function($el){var offset=$el.offset();return{width:$el.outerWidth(),height:$el.outerHeight(),left:offset.left,top:offset.top}},_getDateFromCell:function(cell){var curDate=this.parsedDate,year=cell.data("year")||curDate.year,month=null==cell.data("month")?curDate.month:cell.data("month"),date=cell.data("date")||1;return new Date(year,month,date)},_setPositionClasses:function(pos){var main=(pos=pos.split(" "))[0],classes="datepicker -"+main+"-"+pos[1]+"- -from-"+main+"-";this.visible&&(classes+=" active"),this.$datepicker.removeAttr("class").addClass(classes)},setPosition:function(position){position=position||this.opts.position;var top,left,dims=this._getDimensions(this.$el),selfDims=this._getDimensions(this.$datepicker),pos=position.split(" "),offset=this.opts.offset,main=pos[0],secondary=pos[1];switch(main){case"top":top=dims.top-selfDims.height-offset;break;case"right":left=dims.left+dims.width+offset;break;case"bottom":top=dims.top+dims.height+offset;break;case"left":left=dims.left-selfDims.width-offset}switch(secondary){case"top":top=dims.top;break;case"right":left=dims.left+dims.width-selfDims.width;break;case"bottom":top=dims.top+dims.height-selfDims.height;break;case"left":left=dims.left;break;case"center":/left|right/.test(main)?top=dims.top+dims.height/2-selfDims.height/2:left=dims.left+dims.width/2-selfDims.width/2}this.$datepicker.css({left:left,top:top})},show:function(){var onShow=this.opts.onShow;this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0,onShow&&this._bindVisionEvents(onShow)},hide:function(){var onHide=this.opts.onHide;this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur(),onHide&&this._bindVisionEvents(onHide)},down:function(date){this._changeView(date,"down")},up:function(date){this._changeView(date,"up")},_bindVisionEvents:function(event){this.$datepicker.off("transitionend.dp"),event(this,!1),this.$datepicker.one("transitionend.dp",event.bind(this,this,!0))},_changeView:function(date,dir){date=date||this.focused||this.date;var nextView="up"==dir?this.viewIndex+1:this.viewIndex-1;2<nextView&&(nextView=2),nextView<0&&(nextView=0),this.silent=!0,this.date=new Date(date.getFullYear(),date.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[nextView]},_handleHotKey:function(key){var focusedParsed,newDate,totalDaysInNextMonth,date=datepicker.getParsedDate(this._getFocusedDate()),o=this.opts,monthChanged=!1,yearChanged=!1,decadeChanged=!1,y=date.year,m=date.month,d=date.date;switch(key){case"ctrlRight":case"ctrlUp":m+=1,monthChanged=!0;break;case"ctrlLeft":case"ctrlDown":m-=1,monthChanged=!0;break;case"shiftRight":case"shiftUp":yearChanged=!0,y+=1;break;case"shiftLeft":case"shiftDown":yearChanged=!0,y-=1;break;case"altRight":case"altUp":decadeChanged=!0,y+=10;break;case"altLeft":case"altDown":decadeChanged=!0,y-=10;break;case"ctrlShiftUp":this.up()}totalDaysInNextMonth=datepicker.getDaysCount(new Date(y,m)),newDate=new Date(y,m,d),totalDaysInNextMonth<d&&(d=totalDaysInNextMonth),newDate.getTime()<this.minTime?newDate=this.minDate:newDate.getTime()>this.maxTime&&(newDate=this.maxDate),this.focused=newDate,focusedParsed=datepicker.getParsedDate(newDate),monthChanged&&o.onChangeMonth&&o.onChangeMonth(focusedParsed.month,focusedParsed.year),yearChanged&&o.onChangeYear&&o.onChangeYear(focusedParsed.year),decadeChanged&&o.onChangeDecade&&o.onChangeDecade(this.curDecade)},_registerKey:function(key){this.keys.some(function(curKey){return curKey==key})||this.keys.push(key)},_unRegisterKey:function(key){var index=this.keys.indexOf(key);this.keys.splice(index,1)},_isHotKeyPressed:function(){var currentHotKey,found=!1,pressedKeys=this.keys.sort();for(var hotKey in hotKeys)currentHotKey=hotKeys[hotKey],pressedKeys.length==currentHotKey.length&&currentHotKey.every(function(key,i){return key==pressedKeys[i]})&&(this._trigger("hotKey",hotKey),found=!0);return found},_trigger:function(event,args){this.$el.trigger(event,args)},_focusNextCell:function(keyCode,type){type=type||this.cellType;var date=datepicker.getParsedDate(this._getFocusedDate()),y=date.year,m=date.month,d=date.date;if(!this._isHotKeyPressed()){switch(keyCode){case 37:"day"==type&&(d-=1),"month"==type&&(m-=1),"year"==type&&(y-=1);break;case 38:"day"==type&&(d-=7),"month"==type&&(m-=3),"year"==type&&(y-=4);break;case 39:"day"==type&&(d+=1),"month"==type&&(m+=1),"year"==type&&(y+=1);break;case 40:"day"==type&&(d+=7),"month"==type&&(m+=3),"year"==type&&(y+=4)}var nd=new Date(y,m,d);nd.getTime()<this.minTime?nd=this.minDate:nd.getTime()>this.maxTime&&(nd=this.maxDate),this.focused=nd}},_getFocusedDate:function(){var focused=this.focused||this.selectedDates[this.selectedDates.length-1],d=this.parsedDate;if(!focused)switch(this.view){case"days":focused=new Date(d.year,d.month,(new Date).getDate());break;case"months":focused=new Date(d.year,d.month,1);break;case"years":focused=new Date(d.year,0,1)}return focused},_getCell:function(date,type){type=type||this.cellType;var $cell,d=datepicker.getParsedDate(date),selector='.datepicker--cell[data-year="'+d.year+'"]';switch(type){case"month":selector='[data-month="'+d.month+'"]';break;case"day":selector+='[data-month="'+d.month+'"][data-date="'+d.date+'"]'}return($cell=this.views[this.currentView].$el.find(selector)).length?$cell:$("")},destroy:function(){this.$el.off(".adp").data("datepicker",""),this.selectedDates=[],this.focused="",this.views={},this.keys=[],this.minRange="",this.maxRange="",this.opts.inline||!this.elIsInput?this.$datepicker.closest(".datepicker-inline").remove():this.$datepicker.remove()},_handleAlreadySelectedDates:function(alreadySelected,selectedDate){this.opts.range?this.opts.toggleSelected?this.removeDate(selectedDate):2!=this.selectedDates.length&&this._trigger("clickCell",selectedDate):this.opts.toggleSelected&&this.removeDate(selectedDate),this.opts.toggleSelected||(this.lastSelectedDate=alreadySelected,this.opts.timepicker&&(this.timepicker._setTime(alreadySelected),this.timepicker.update()))},_onShowEvent:function(e){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(e){this.inFocus=!0},_onMouseUpDatepicker:function(e){this.inFocus=!1,e.originalEvent.inFocus=!0,e.originalEvent.timepickerFocus||this.$el.focus()},_onKeyUpGeneral:function(e){this.$el.val()||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onMouseUpBody:function(e){e.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(e){e.originalEvent.inFocus=!0,setTimeout(this._onKeyUpGeneral.bind(this),4)},_onKeyDown:function(e){var code=e.which;if(this._registerKey(code),37<=code&&code<=40&&(e.preventDefault(),this._focusNextCell(code)),13==code&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var alreadySelected=this._isSelected(this.focused,this.cellType);if(!alreadySelected)return this.timepicker&&(this.focused.setHours(this.timepicker.hours),this.focused.setMinutes(this.timepicker.minutes)),void this.selectDate(this.focused);this._handleAlreadySelectedDates(alreadySelected,this.focused)}}27==code&&this.hide()},_onKeyUp:function(e){var code=e.which;this._unRegisterKey(code)},_onHotKey:function(e,hotKey){this._handleHotKey(hotKey)},_onMouseEnterCell:function(e){var $cell=$(e.target).closest(".datepicker--cell"),date=this._getDateFromCell($cell);this.silent=!0,this.focused&&(this.focused=""),$cell.addClass("-focus-"),this.focused=date,this.silent=!1,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",datepicker.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(e){$(e.target).closest(".datepicker--cell").removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onTimeChange:function(e,h,m){var date=new Date,selected=!1;this.selectedDates.length&&(selected=!0,date=this.lastSelectedDate),date.setHours(h),date.setMinutes(m),selected||this._getCell(date).hasClass("-disabled-")?(this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()):this.selectDate(date)},_onClickCell:function(e,date){this.timepicker&&(date.setHours(this.timepicker.hours),date.setMinutes(this.timepicker.minutes)),this.selectDate(date)},set focused(val){if(!val&&this.focused){var $cell=this._getCell(this.focused);$cell.length&&$cell.removeClass("-focus-")}this._focused=val,this.opts.range&&1==this.selectedDates.length&&(this.minRange=this.selectedDates[0],this.maxRange="",datepicker.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=val)},get focused(){return this._focused},get parsedDate(){return datepicker.getParsedDate(this.date)},set date(val){if(val instanceof Date)return this.currentDate=val,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),val},get date(){return this.currentDate},set view(val){if(this.viewIndex=this.viewIndexes.indexOf(val),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=val,this.inited&&(this.views[val]?this.views[val]._render():this.views[val]=new $.fn.datepicker.Body(this,val,this.opts),this.views[this.prevView].hide(),this.views[val].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(val),this.elIsInput&&this.visible&&this.setPosition()),val},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var min=datepicker.getParsedDate(this.minDate);return new Date(min.year,min.month,min.date).getTime()},get maxTime(){var max=datepicker.getParsedDate(this.maxDate);return new Date(max.year,max.month,max.date).getTime()},get curDecade(){return datepicker.getDecade(this.date)}},datepicker.getDaysCount=function(date){return new Date(date.getFullYear(),date.getMonth()+1,0).getDate()},datepicker.getParsedDate=function(date){return{year:date.getFullYear(),month:date.getMonth(),fullMonth:date.getMonth()+1<10?"0"+(date.getMonth()+1):date.getMonth()+1,date:date.getDate(),fullDate:date.getDate()<10?"0"+date.getDate():date.getDate(),day:date.getDay(),hours:date.getHours(),fullHours:date.getHours()<10?"0"+date.getHours():date.getHours(),minutes:date.getMinutes(),fullMinutes:date.getMinutes()<10?"0"+date.getMinutes():date.getMinutes()}},datepicker.getDecade=function(date){var firstYear=10*Math.floor(date.getFullYear()/10);return[firstYear,firstYear+9]},datepicker.template=function(str,data){return str.replace(/#\{([\w]+)\}/g,function(source,match){if(data[match]||0===data[match])return data[match]})},datepicker.isSame=function(date1,date2,type){if(!date1||!date2)return!1;var d1=datepicker.getParsedDate(date1),d2=datepicker.getParsedDate(date2),_type=type||"day";return{day:d1.date==d2.date&&d1.month==d2.month&&d1.year==d2.year,month:d1.month==d2.month&&d1.year==d2.year,year:d1.year==d2.year}[_type]},datepicker.less=function(dateCompareTo,date,type){return!(!dateCompareTo||!date)&&date.getTime()<dateCompareTo.getTime()},datepicker.bigger=function(dateCompareTo,date,type){return!(!dateCompareTo||!date)&&date.getTime()>dateCompareTo.getTime()},datepicker.getLeadingZeroNum=function(num){return parseInt(num)<10?"0"+num:num},datepicker.resetTime=function(date){if("object"==typeof date)return date=datepicker.getParsedDate(date),new Date(date.year,date.month,date.date)},$.fn.datepicker=function(options){return this.each(function(){if($.data(this,"datepicker")){var _this=$.data(this,"datepicker");_this.opts=$.extend(!0,_this.opts,options),_this.update()}else $.data(this,"datepicker",new Datepicker(this,options))})},$.fn.datepicker.Constructor=Datepicker,$.fn.datepicker.language={ru:{days:["","","","","","",""],daysShort:["","","","","","",""],daysMin:["","","","","","",""],months:["","","","","","","","","","","",""],monthsShort:["","","","","","","","","","","",""],today:"",clear:"",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}},$(function(){$(".datepicker-here").datepicker()}),function(){var templates={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},datepicker=$.fn.datepicker,dp=datepicker.Constructor;datepicker.Body=function(d,type,opts){this.d=d,this.type=type,this.opts=opts,this.$el=$(""),this.opts.onlyTimepicker||this.init()},datepicker.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",$.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=$(templates[this.type]).appendTo(this.d.$content),this.$names=$(".datepicker--days-names",this.$el),this.$cells=$(".datepicker--cells",this.$el)},_getDayNamesHtml:function(firstDay,curDay,html,i){return html=html||"",7<(i=null!=i?i:0)?html:7==(curDay=null!=curDay?curDay:firstDay)?this._getDayNamesHtml(firstDay,0,html,++i):(html+='<div class="datepicker--day-name'+(this.d.isWeekend(curDay)?" -weekend-":"")+'">'+this.d.loc.daysMin[curDay]+"</div>",this._getDayNamesHtml(firstDay,++curDay,html,++i))},_getCellContents:function(date,type){var classes="datepicker--cell datepicker--cell-"+type,currentDate=new Date,parent=this.d,minRange=dp.resetTime(parent.minRange),maxRange=dp.resetTime(parent.maxRange),opts=parent.opts,d=dp.getParsedDate(date),render={},html=d.date;switch(type){case"day":parent.isWeekend(d.day)&&(classes+=" -weekend-"),d.month!=this.d.parsedDate.month&&(classes+=" -other-month-",opts.selectOtherMonths||(classes+=" -disabled-"),opts.showOtherMonths||(html=""));break;case"month":html=parent.loc[parent.opts.monthsField][d.month];break;case"year":var decade=parent.curDecade;html=d.year,(d.year<decade[0]||d.year>decade[1])&&(classes+=" -other-decade-",opts.selectOtherYears||(classes+=" -disabled-"),opts.showOtherYears||(html=""))}return opts.onRenderCell&&(html=(render=opts.onRenderCell(date,type)||{}).html?render.html:html,classes+=render.classes?" "+render.classes:""),opts.range&&(dp.isSame(minRange,date,type)&&(classes+=" -range-from-"),dp.isSame(maxRange,date,type)&&(classes+=" -range-to-"),1==parent.selectedDates.length&&parent.focused?((dp.bigger(minRange,date)&&dp.less(parent.focused,date)||dp.less(maxRange,date)&&dp.bigger(parent.focused,date))&&(classes+=" -in-range-"),dp.less(maxRange,date)&&dp.isSame(parent.focused,date)&&(classes+=" -range-from-"),dp.bigger(minRange,date)&&dp.isSame(parent.focused,date)&&(classes+=" -range-to-")):2==parent.selectedDates.length&&dp.bigger(minRange,date)&&dp.less(maxRange,date)&&(classes+=" -in-range-")),dp.isSame(currentDate,date,type)&&(classes+=" -current-"),parent.focused&&dp.isSame(date,parent.focused,type)&&(classes+=" -focus-"),parent._isSelected(date,type)&&(classes+=" -selected-"),parent._isInRange(date,type)&&!render.disabled||(classes+=" -disabled-"),{html:html,classes:classes}},_getDaysHtml:function(date){for(var m,y,totalMonthDays=dp.getDaysCount(date),firstMonthDay=new Date(date.getFullYear(),date.getMonth(),1).getDay(),lastMonthDay=new Date(date.getFullYear(),date.getMonth(),totalMonthDays).getDay(),daysFromPevMonth=firstMonthDay-this.d.loc.firstDay,daysFromNextMonth=6-lastMonthDay+this.d.loc.firstDay,html="",i=1-(daysFromPevMonth=daysFromPevMonth<0?daysFromPevMonth+7:daysFromPevMonth),max=totalMonthDays+(daysFromNextMonth=6<daysFromNextMonth?daysFromNextMonth-7:daysFromNextMonth);i<=max;i++)y=date.getFullYear(),m=date.getMonth(),html+=this._getDayHtml(new Date(y,m,i));return html},_getDayHtml:function(date){var content=this._getCellContents(date,"day");return'<div class="'+content.classes+'" data-date="'+date.getDate()+'" data-month="'+date.getMonth()+'" data-year="'+date.getFullYear()+'">'+content.html+"</div>"},_getMonthsHtml:function(date){for(var html="",d=dp.getParsedDate(date),i=0;i<12;)html+=this._getMonthHtml(new Date(d.year,i)),i++;return html},_getMonthHtml:function(date){var content=this._getCellContents(date,"month");return'<div class="'+content.classes+'" data-month="'+date.getMonth()+'">'+content.html+"</div>"},_getYearsHtml:function(date){dp.getParsedDate(date);for(var decade=dp.getDecade(date),html="",i=decade[0]-1;i<=decade[1]+1;i++)html+=this._getYearHtml(new Date(i,0));return html},_getYearHtml:function(date){var content=this._getCellContents(date,"year");return'<div class="'+content.classes+'" data-year="'+date.getFullYear()+'">'+content.html+"</div>"},_renderTypes:{days:function(){var dayNames=this._getDayNamesHtml(this.d.loc.firstDay),days=this._getDaysHtml(this.d.currentDate);this.$cells.html(days),this.$names.html(dayNames)},months:function(){var html=this._getMonthsHtml(this.d.currentDate);this.$cells.html(html)},years:function(){var html=this._getYearsHtml(this.d.currentDate);this.$cells.html(html)}},_render:function(){this.opts.onlyTimepicker||this._renderTypes[this.type].bind(this)()},_update:function(){var classes,$cell,date,$cells=$(".datepicker--cell",this.$cells),_this=this;$cells.each(function(cell,i){$cell=$(this),date=_this.d._getDateFromCell($(this)),classes=_this._getCellContents(date,_this.d.cellType),$cell.attr("class",classes.classes)})},show:function(){this.opts.onlyTimepicker||(this.$el.addClass("active"),this.acitve=!0)},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(el){var date=el.data("date")||1,month=el.data("month")||0,year=el.data("year")||this.d.parsedDate.year,dp=this.d;if(dp.view==this.opts.minView){var selectedDate=new Date(year,month,date),alreadySelected=this.d._isSelected(selectedDate,this.d.cellType);alreadySelected?dp._handleAlreadySelectedDates.bind(dp,alreadySelected,selectedDate)():dp._trigger("clickCell",selectedDate)}else dp.down(new Date(year,month,date))},_onClickCell:function(e){var $el=$(e.target).closest(".datepicker--cell");$el.hasClass("-disabled-")||this._handleClick.bind(this)($el)}}}(),function(){var datepicker=$.fn.datepicker,dp=datepicker.Constructor;datepicker.Navigation=function(d,opts){this.d=d,this.opts=opts,this.$buttonsContainer="",this.init()},datepicker.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",$.proxy(this._onClickNavButton,this)),this.d.$datepicker.on("click",".datepicker--button",$.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this.opts.onlyTimepicker||this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var title=this._getTitle(this.d.currentDate),html=dp.template('<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',$.extend({title:title},this.opts));this.d.$nav.html(html),"years"==this.d.view&&$(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(date){return this.d.formatDate(this.opts.navTitles[this.d.view],date)},_addButton:function(type){this.$buttonsContainer.length||this._addButtonsContainer();var data={action:type,label:this.d.loc[type]},html=dp.template('<span class="datepicker--button" data-action="#{action}">#{label}</span>',data);$("[data-action="+type+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(html)},_addButtonsContainer:function(){this.d.$datepicker.append('<div class="datepicker--buttons"></div>'),this.$buttonsContainer=$(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var date=this.d.parsedDate,m=date.month,y=date.year,d=date.date;switch(this.d.view){case"days":this.d._isInRange(new Date(y,m-1,1),"month")||this._disableNav("prev"),this.d._isInRange(new Date(y,m+1,1),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(y-1,m,d),"year")||this._disableNav("prev"),this.d._isInRange(new Date(y+1,m,d),"year")||this._disableNav("next");break;case"years":var decade=dp.getDecade(this.d.date);this.d._isInRange(new Date(decade[0]-1,0,1),"year")||this._disableNav("prev"),this.d._isInRange(new Date(decade[1]+1,0,1),"year")||this._disableNav("next")}}},_disableNav:function(nav){$('[data-action="'+nav+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(nav){$('[data-action="'+nav+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(e){var action=$(e.target).closest("[data-action]").data("action");this.d[action]()},_onClickNavTitle:function(e){if(!$(e.target).hasClass("-disabled-"))return"days"==this.d.view?this.d.view="months":void(this.d.view="years")}}}(),function(){var datepicker=$.fn.datepicker,dp=datepicker.Constructor;datepicker.Timepicker=function(inst,opts){this.d=inst,this.opts=opts,this.init()},datepicker.Timepicker.prototype={init:function(){var input="input";this._setTime(this.d.date),this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(input="change"),this.d.$el.on("selectDate",this._onSelectDate.bind(this)),this.$ranges.on(input,this._onChangeRange.bind(this)),this.$ranges.on("mouseup",this._onMouseUpRange.bind(this)),this.$ranges.on("mousemove focus ",this._onMouseEnterRange.bind(this)),this.$ranges.on("mouseout blur",this._onMouseOutRange.bind(this))},_setTime:function(date){var _date=dp.getParsedDate(date);this._handleDate(date),this.hours=_date.hours<this.minHours?this.minHours:_date.hours,this.minutes=_date.minutes<this.minMinutes?this.minMinutes:_date.minutes},_setMinTimeFromDate:function(date){this.minHours=date.getHours(),this.minMinutes=date.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()>date.getHours()&&(this.minMinutes=this.opts.minMinutes)},_setMaxTimeFromDate:function(date){this.maxHours=date.getHours(),this.maxMinutes=date.getMinutes(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()<date.getHours()&&(this.maxMinutes=this.opts.maxMinutes)},_setDefaultMinMaxTime:function(){var opts=this.opts;this.minHours=opts.minHours<0||23<opts.minHours?0:opts.minHours,this.minMinutes=opts.minMinutes<0||59<opts.minMinutes?0:opts.minMinutes,this.maxHours=opts.maxHours<0||23<opts.maxHours?23:opts.maxHours,this.maxMinutes=opts.maxMinutes<0||59<opts.maxMinutes?59:opts.maxMinutes},_validateHoursMinutes:function(date){this.hours<this.minHours?this.hours=this.minHours:this.hours>this.maxHours&&(this.hours=this.maxHours),this.minutes<this.minMinutes?this.minutes=this.minMinutes:this.minutes>this.maxMinutes&&(this.minutes=this.maxMinutes)},_buildHTML:function(){var lz=dp.getLeadingZeroNum,data={hourMin:this.minHours,hourMax:lz(this.maxHours),hourStep:this.opts.hoursStep,hourValue:this.hours,hourVisible:lz(this.displayHours),minMin:this.minMinutes,minMax:lz(this.maxMinutes),minStep:this.opts.minutesStep,minValue:lz(this.minutes)},_template=dp.template('<div class="datepicker--time"><div class="datepicker--time-current">   <span class="datepicker--time-current-hours">#{hourVisible}</span>   <span class="datepicker--time-current-colon">:</span>   <span class="datepicker--time-current-minutes">#{minValue}</span></div><div class="datepicker--time-sliders">   <div class="datepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <div class="datepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div></div></div>',data);this.$timepicker=$(_template).appendTo(this.d.$datepicker),this.$ranges=$('[type="range"]',this.$timepicker),this.$hours=$('[name="hours"]',this.$timepicker),this.$minutes=$('[name="minutes"]',this.$timepicker),this.$hoursText=$(".datepicker--time-current-hours",this.$timepicker),this.$minutesText=$(".datepicker--time-current-minutes",this.$timepicker),this.d.ampm&&(this.$ampm=$('<span class="datepicker--time-current-ampm">').appendTo($(".datepicker--time-current",this.$timepicker)).html(this.dayPeriod),this.$timepicker.addClass("-am-pm-"))},_updateCurrentTime:function(){var h=dp.getLeadingZeroNum(this.displayHours),m=dp.getLeadingZeroNum(this.minutes);this.$hoursText.html(h),this.$minutesText.html(m),this.d.ampm&&this.$ampm.html(this.dayPeriod)},_updateRanges:function(){this.$hours.attr({min:this.minHours,max:this.maxHours}).val(this.hours),this.$minutes.attr({min:this.minMinutes,max:this.maxMinutes}).val(this.minutes)},_handleDate:function(date){this._setDefaultMinMaxTime(),date&&(dp.isSame(date,this.d.opts.minDate)?this._setMinTimeFromDate(this.d.opts.minDate):dp.isSame(date,this.d.opts.maxDate)&&this._setMaxTimeFromDate(this.d.opts.maxDate)),this._validateHoursMinutes(date)},update:function(){this._updateRanges(),this._updateCurrentTime()},_getValidHoursFromDate:function(date,ampm){var hours=date;date instanceof Date&&(hours=dp.getParsedDate(date).hours);var dayPeriod="am";if(ampm||this.d.ampm)switch(!0){case 0==hours:hours=12;break;case 12==hours:dayPeriod="pm";break;case 11<hours:hours-=12,dayPeriod="pm"}return{hours:hours,dayPeriod:dayPeriod}},set hours(val){this._hours=val;var displayHours=this._getValidHoursFromDate(val);this.displayHours=displayHours.hours,this.dayPeriod=displayHours.dayPeriod},get hours(){return this._hours},_onChangeRange:function(e){var $target=$(e.target),name=$target.attr("name");this.d.timepickerIsActive=!0,this[name]=$target.val(),this._updateCurrentTime(),this.d._trigger("timeChange",[this.hours,this.minutes]),this._handleDate(this.d.lastSelectedDate),this.update()},_onSelectDate:function(e,data){this._handleDate(data),this.update()},_onMouseEnterRange:function(e){var name=$(e.target).attr("name");$(".datepicker--time-current-"+name,this.$timepicker).addClass("-focus-")},_onMouseOutRange:function(e){var name=$(e.target).attr("name");this.d.inFocus||$(".datepicker--time-current-"+name,this.$timepicker).removeClass("-focus-")},_onMouseUpRange:function(e){this.d.timepickerIsActive=!1}}}()}(window,jQuery),void 0===typeof $j)var $j=jQuery.noConflict();$j.initObject("bl.catalog.modal.deliveryDates");var isLoadedOnce=!0,isLoadedOncePickUp=!0;function initializeGMap(){$j(".googlemaps .mapframe").each(function(){$j(this).blGoogleMaps("initGMap",{context:$j(this).parents(".center_part")})})}function waitGMapToLoad(){"undefined"==typeof google&&setTimeout(waitGMapToLoad,1e3)}function changeQueryArrtibuteValue(url,keyString,replaceString){for(var query=url.split("?"),attr=query[1].split("&"),i=0;i<attr.length;i++){var pair=attr[i].split("=");pair[0]==keyString&&(attr[i]=pair[0]+"="+replaceString)}return query[1]=attr.join("&"),query.join("?")}function setSessionStorageZipCode(zipcode){sessionStorage.setItem("SEARCH_ZIPCODE",zipcode),$j.removeCookie("WC_BOULANGER_GEOCODE_RESULTS",{path:"/"}),bl.woosmap.saveUserGeolocation()}function verifyIfNeedToGeolocate(zipcode){void 0!==zipcode&&(5===zipcode.length&&sessionStorage.getItem("SEARCH_ZIPCODE")!==zipcode&&setSessionStorageZipCode(zipcode))}$j.extend(bl.catalog.modal.deliveryDates,{gmapApiScriptRequested:!1,bind:function(modalScope){$j(".deliveryDatesModal, .deliveryModesModal").unbind("click").bind("click",function(){var url=$j(this).attr("data-modal-url");isLoadedOnce||(isLoadedOnce=!0),isLoadedOncePickUp||(isLoadedOncePickUp=!0),Box.open({modal:!0,url:url,show:function(){"string"==typeof modalScope&&"checkout"==modalScope?bl.catalog.modal.deliveryDates.checkoutEvents():bl.catalog.modal.deliveryDates.catalogEvents()}})})},checkoutEvents:function(){leftPartLinks=$j(".left_part .btm"),centerContent=$j(".center_part"),leftPartLinks.bind("click",function(){$j("#Fpdd .right").removeClass("helpDelivery"),elData=$j(this).attr("data-content"),leftPartLinks.removeClass("active"),$j("#Fpdd .top").removeClass("active"),$j("#Fpdd #delivery_top").addClass("off"),$j(this).addClass("active"),centerContent.addClass("off"),$j("#"+elData).removeClass("off"),$j(".startSearch",$j("#"+elData)).trigger("click")}),$j("#Fpdd .top span.information").click(function(){var dataGroup=$j(this).parent().attr("data-delivery-group");leftPartLinks.removeClass("active"),$j("#Fpdd .top").removeClass("active"),$j(this).parent().addClass("active"),$j("#Fpdd .center_part").addClass("off"),$j("#Fpdd #delivery_top.infoBlock_"+dataGroup).removeClass("off"),$j("#Fpdd .right").addClass("helpDelivery"),$j("#Fpdd .right").animate({scrollTop:0},0)}),$j(".left_part div.btm :first").trigger("click"),bindNumericsOnly()},catalogEvents:function(){bl.google.initAPI(),initializeGMap(),waitGMapToLoad();var elData=$j("#modal_delivery .left_part .btm .selected").attr("data-content");$j(".center_part").addClass("off"),$j("#"+elData).removeClass("off"),bl.catalog.modal.deliveryDates.initialDeliveryLoad(elData);var contextualisationZipCode=bl.cookie.getZipCodeUseForContextualisation();null!=contextualisationZipCode&&$j('#modal_delivery .right input[type="text"]').val(contextualisationZipCode),leftPartLinks=$j(".left_part .btm"),leftPartLinks.each(function(){var shipModeName=$j(this).attr("ship-mode-name");if("string"==typeof shipModeName){if("REM"==shipModeName)$j("#delivery_shop .startSearch").bind("click",function(){if($j("#sitesSearch")&&$j("#sitesSearch").val().length<2)return!1;var type=2==$j("#sitesSearch").val().length?"departement":"postalCode",zipCodeSearched=$j("#delivery_shop #zipCodeSearched"),zipCode=$j("#delivery_shop  #sitesSearch");void 0!==zipCodeSearched&&void 0!==zipCode&&(zipCodeSearched.html(zipCode.val()),verifyIfNeedToGeolocate(zipCode.val()));var searchParams={type:type,value:$j("#delivery_shop #sitesSearch").val(),url:$j("#delivery_shop #sitesSearch").data("search-url")};return bl.delivery.searchSites(searchParams,"#delivery_shop","storesCatalogPopin",null),!1}),$j("#delivery_shop .storeList").bind("change",function(){var searchValue=$j(this).find(":selected").data("zipcode");if(isNaN(searchValue))return!1;var searchType=2<(searchValue=searchValue.toString()).length?"postalCode":"departement",zipCodeSearched=$j("#delivery_shop #zipCodeSearched"),zipCode=$j("#delivery_shop  #sitesSearch");void 0!==zipCodeSearched&&void 0!==zipCode&&(zipCodeSearched.html(zipCode.val()),verifyIfNeedToGeolocate(zipCode.val()));var searchParams={type:searchType,value:searchValue,url:$j(".storeList").data("search-url")};return bl.delivery.searchSites(searchParams,"#delivery_shop","storesCatalogPopin",null),void 0!==(zipCodeSearched=$j("#delivery_chronopost #zipCodeSearched"))&&(zipCodeSearched.html($j("#delivery_chronopost  #sitesSearch").val()),verifyIfNeedToGeolocate($j("#delivery_chronopost  #sitesSearch").val())),!1});else if("CHR"==shipModeName){var zipCodeSearched=$j("#delivery_chronopost #zipCodeSearched"),zipCode=$j("#delivery_chronopost  #chrSearchZipCode");void 0!==zipCodeSearched&&void 0!==zipCode&&(zipCodeSearched.html(zipCode.val()),verifyIfNeedToGeolocate(zipCode.val())),$j("#valueOfZipCodeSelected").val(zipCodeSearched.html()),$j("#delivery_chronopost .startSearch").blChronopostExpressSearch({context:$j("#delivery_chronopost")})}else if("CHP"==shipModeName)$j("#delivery_pickup .startSearch").bind("click",function(){var inputSearchElement=$j("#delivery_pickup  #sitesSearch");if(inputSearchElement&&inputSearchElement.val().length<2)return!1;var zipCodeSearched=$j("#delivery_pickup #zipCodeSearched"),zipCode=$j("#delivery_pickup  #sitesSearch");void 0!==zipCodeSearched&&void 0!==zipCode&&(zipCodeSearched.html(zipCode.val()),verifyIfNeedToGeolocate(zipCode.val())),$j("#valueOfZipCodeSelected").val(zipCodeSearched.html());var searchParams={type:"postalCode",value:$j("#delivery_pickup  #sitesSearch").val(),url:$j("#delivery_pickup #sitesSearch").data("search-url")};return bl.delivery.searchSites(searchParams,"#delivery_pickup","pickUpSitesCatalogPopin",null),!1});else if("INP"==shipModeName||"INP_CHP"==shipModeName||"CHP_LOC"==shipModeName)$j("#delivery_lockers .startSearch").bind("click",function(){var inputSearchElement=$j("#delivery_lockers  #sitesSearch");if(inputSearchElement&&inputSearchElement.val().length<2)return!1;var zipCodeSearched=$j("#delivery_lockers #zipCodeSearched"),zipCode=$j("#delivery_lockers  #sitesSearch");void 0!==zipCodeSearched&&void 0!==zipCode&&(zipCodeSearched.html(zipCode.val()),verifyIfNeedToGeolocate(zipCode.val())),$j("#valueOfZipCodeSelected").val(zipCodeSearched.html());var searchParams={type:"postalCode",value:$j("#delivery_lockers  #sitesSearch").val(),url:$j("#delivery_lockers #sitesSearch").data("search-url")};return bl.delivery.searchSites(searchParams,"#delivery_lockers","pickUpSitesCatalogPopin",null),!1});else if("MDR"==shipModeName||"CLR"==shipModeName||"MDR_CLR"==shipModeName)$j("#delivery_relay .startSearch").bind("click",function(){if($j(".relaySearchZipCode")&&$j(".relaySearchZipCode").val().length<2)return!1;var zipCodeSearched=$j("#delivery_relay #zipCodeSearched"),zipCode=$j("#delivery_relay  #sitesSearch");void 0!==zipCodeSearched&&void 0!==zipCode&&(zipCodeSearched.html(zipCode.val()),verifyIfNeedToGeolocate(zipCode.val())),$j("#valueOfZipCodeSelected").val(zipCodeSearched.html());var searchParams={type:"postalCode",value:$j(".relaySearchZipCode").val(),url:$j(".relaySearchZipCode").data("search-url")};return bl.delivery.searchSites(searchParams,"#delivery_relay","pickUpSitesCatalogPopin",null),!1});else if("LVB"==shipModeName||"GEE"==shipModeName||"GEL"==shipModeName||"COU"==shipModeName||"CRV"==shipModeName){zipCodeSearched=$j("#delivery_home #zipCodeSearched"),zipCode=$j("#delivery_home  #lvbSearchZipCode");void 0!==zipCodeSearched&&void 0!==zipCode&&(zipCodeSearched.html(zipCode.val()),verifyIfNeedToGeolocate(zipCode.val())),$j("#valueOfZipCodeSelected").val(zipCodeSearched.html()),$j("#delivery_home .startSearch").blLvbSearch({context:$j("#delivery_home")})}else if("SDE"==shipModeName){zipCodeSearched=$j("#delivery_solovina_express #zipCodeSearched"),zipCode=$j("#delivery_solovina_express  #sitesSearch");void 0!==zipCodeSearched&&void 0!==zipCode&&(zipCodeSearched.html(zipCode.val()),verifyIfNeedToGeolocate(zipCode.val())),$j("#valueOfZipCodeSelected").val(zipCodeSearched.html()),$j("#delivery_solovina_express .startSearch").blChronopostExpressSearch({context:$j("#delivery_solovina_express")})}bl.delivery.updateGoogleMarkers($j(".display-sites li span.icon:visible")),bl.delivery.updateGoogleMarkers($j(".display-sites .formStoresList .list .icon:visible"))}});var tabs=$j(".center_part .tabs_choice div"),centerContent=($j(".center_part .tabs_content"),$j(".center_part .tabs_details"),$j(".center_part")),postalCodeSubmit=($j(".postal-code input:text").value,$j(".postal-code input:submit")),storeList=$j(".store-list select"),geolocBtn=$j(".zip .geolocation"),relayItem=$j(".googlemaps .formStoresList label"),relayName=$j(".googlemaps .map .relay-name");leftPartLinks.bind("click",function(){$j("#Fpdd .right").removeClass("helpDelivery"),$j(".postal-content .time").remove(),elData=$j(this).attr("data-content"),leftPartLinks.removeClass("active"),$j("#Fpdd .top").removeClass("active"),$j("#Fpdd #delivery_top").addClass("off"),$j(this).addClass("active"),centerContent.addClass("off"),$j("#"+elData).removeClass("off");var codePostalLeftBind=$j("#modal_delivery").attr("data-code-postal"),codePostalRelayLeftBind="";"delivery_relay"==elData&&(codePostalRelayLeftBind=$j(".relaySearchZipCode").val()),"delivery_pickup"==elData&&(codePostalRelayLeftBind=$j(".chpSearchZipCode").val()),"delivery_lockers"==elData&&(codePostalRelayLeftBind=$j(".locSearchZipCode").val());var valueOfZipCodeSelected=$j("#valueOfZipCodeSelected").val();if(valueOfZipCodeSelected&&(codePostalLeftBind=codePostalRelayLeftBind=valueOfZipCodeSelected),"delivery_colissimo"==elData&&($j("#informationSocolissimo").css("display","inline-block"),$j("#informationSocolissimoKO").css("display","none"),$j("#informationSocolissimoOK").css("display","inline-block")),""!=codePostalLeftBind){if("delivery_shop"==elData){$j(".remSearchZipCode").attr("value",codePostalLeftBind),$j(".store-list select").attr("value","");var dataStoreDelivery=$j("#modal_delivery").attr("data-store-delivery");""!=dataStoreDelivery&&$j(".store-list select").attr("value",dataStoreDelivery)}"delivery_home"==elData&&$j("#lvbSearchZipCode").val(codePostalLeftBind)}""!=codePostalRelayLeftBind&&("delivery_relay"==elData&&(5==codePostalRelayLeftBind.length?($j("#relaySearchZipCode").val(codePostalRelayLeftBind),$j(".relaySearchZipCode").val(codePostalRelayLeftBind)):$j("#relaySearchZipCode").val("")),"delivery_pickup"==elData&&(5==codePostalRelayLeftBind.length?($j("#chpSearchZipCode").val(codePostalRelayLeftBind),$j(".chpSearchZipCode").val(codePostalRelayLeftBind)):$j("#chpSearchZipCode").val("")),"delivery_lockers"==elData&&(5==codePostalRelayLeftBind.length?($j("#locSearchZipCode").val(codePostalRelayLeftBind),$j(".locSearchZipCode").val(codePostalRelayLeftBind)):$j("#locSearchZipCode").val("")),"delivery_chronopost"==elData&&5==codePostalRelayLeftBind.length&&$j(".chrSearchZipCode ").val(codePostalRelayLeftBind)),$j(".startSearch",$j("#"+elData)).trigger("click")}),$j("#Fpdd .top span.information").click(function(){var dataGroup=$j(this).parent().attr("data-delivery-group");leftPartLinks.removeClass("active"),$j("#Fpdd .top").removeClass("active"),$j(this).parent().addClass("active"),$j("#Fpdd .center_part").addClass("off"),$j("#Fpdd #delivery_top.infoBlock_"+dataGroup).removeClass("off"),$j("#Fpdd .right").addClass("helpDelivery"),$j("#Fpdd .right").animate({scrollTop:0},0)}),tabs.bind("click",function(){$j(this).hasClass("selected")||($j(this).parent(".tabs_choice").find("div").removeClass("selected"),$j(this).addClass("selected"),$j(this).hasClass("content")?($j(this).parent(".tabs_choice").removeClass("right-select").addClass("left-select").siblings(".tabs_details").addClass("off"),$j(this).parent(".tabs_choice").siblings(".tabs_content").removeClass("off")):$j(this).hasClass("details")&&($j(this).parent(".tabs_choice").removeClass("left-select").addClass("right-select").siblings(".tabs_content").addClass("off"),$j(this).parent(".tabs_choice").siblings(".tabs_details").removeClass("off")))}),$j(".postal-code input:text, .searchBar input:text").bind("keyup",function(e){13===e.originalEvent.keyCode&&($j(this).next().click(),$j(this).parent("label").next().click())}),postalCodeSubmit.bind("click",function(e){$j(this).parents(".tabs_content").find(".postal-content").removeClass("off"),e.preventDefault()}),storeList.bind("change",function(){$j(this).parents(".tabs_content").find(".postal-content").removeClass("off")}),geolocBtn.bind("click",function(){$j(this).parents(".tabs_content").find(".postal-content").removeClass("off")}),relayItem.bind("click",function(){$j(this).hasClass("selected")||(relayItem.removeClass("selected"),$j(this).addClass("selected"),$j(this).find("input:radio").attr("checked","checked")),relayName.text($j(this).attr("data-relay"))}),$j(".left_part div.btm :first").trigger("click"),bindNumericsOnly()},initialDeliveryLoad:function(elData){var dataCodePostal=$j("#modal_delivery").attr("data-code-postal"),dataStore="",favoriteStore=localStorage.getItem("favStore"),codePostalDelivery=getCookie("BL_ZIPCODE_DELIVERY"),lastStoreModalDelivery=getCookie("BL_STORE_DELIVERY_SELECTED"),lastStoreModalStore=getCookie("BL_CLICKED_STORE"),delivrenceStore=getCookie("BL_DELIVRENCE_STORE");""!=delivrenceStore?(delivrenceStore=delivrenceStore.toUpperCase(),"delivery_shop"==elData?$j(".store-list select").attr("value",delivrenceStore):"delivery_home"==elData?($j("#delivery_home .postal-content").empty(),""!=dataCodePostal&&$j("#lvbSearchZipCode").val(dataCodePostal)):"delivery_relay"==elData&&""!=dataCodePostal&&5==dataCodePostal.length&&$j(".relaySearchZipCode").val(getRelayStoreFromCookie()),dataStore=delivrenceStore):""!=lastStoreModalDelivery?("delivery_shop"==elData?$j(".store-list select").attr("value",lastStoreModalDelivery):"delivery_home"==elData?""!=dataCodePostal&&$j("#lvbSearchZipCode").val(dataCodePostal):"delivery_relay"==elData&&""!=dataCodePostal&&5==dataCodePostal.length&&$j(".relaySearchZipCode").val(getRelayStoreFromCookie()),dataStore=lastStoreModalStore):""!=lastStoreModalStore?("delivery_shop"==elData?(lastStoreModalStore=lastStoreModalStore.split("-")[1],$j(".store-list select").attr("value",lastStoreModalStore)):"delivery_home"==elData?""!=dataCodePostal&&$j("#lvbSearchZipCode").val(dataCodePostal):"delivery_relay"==elData&&""!=dataCodePostal&&5==dataCodePostal.length&&$j(".relaySearchZipCode").val(getRelayStoreFromCookie()),dataStore=lastStoreModalStore):""!=codePostalDelivery?("delivery_shop"==elData?$j(".remSearchZipCode").attr("value",codePostalDelivery):"delivery_relay"==elData?""!=codePostalDelivery&&5==codePostalDelivery.length&&$j(".relaySearchZipCode").val(getRelayStoreFromCookie()):"delivery_home"==elData&&$j("#lvbSearchZipCode").val(codePostalDelivery),dataCodePostal=codePostalDelivery):""!=favoriteStore&&null!==favoriteStore&&(favoriteStore=JSON.parse(favoriteStore).storeCode,"delivery_shop"==elData&&""!=favoriteStore&&null!=favoriteStore?$j(".store-list select").attr("value",favoriteStore):"delivery_relay"==elData?""!=dataCodePostal&&5==dataCodePostal.length&&$j(".relaySearchZipCode").val(getRelayStoreFromCookie()):"delivery_home"==elData&&""!=dataCodePostal&&$j("#lvbSearchZipCode").val(dataCodePostal),dataStore=favoriteStore),$j("#modal_delivery").attr("data-code-postal",dataCodePostal),$j("#modal_delivery").attr("data-store-delivery",dataStore)}}),function($j){var context=null,methods={init:function(options){context=options.context;var input=this.filter("input");return input.unbind("click"),input.bind("click",methods._search),$j(document.body).keyup(function(ev){"chrSearchZipCode"==self.document.activeElement.id&&13===ev.which&&methods._search("delivery_relay")}),this},_search:function(event){"delivery_relay"!=event&&event.preventDefault();var url=$j(".zip",context).attr("data-search-url");if(void 0===url||null==url||""==url)return!1;var value=$j("#chrSearchZipCode",context).attr("value");if(null==value||5!=value.length||!isZipCodeFormat(value))return!1;$j(".table-store-scroll tbody",context).empty(),$j(".table-store-scroll table",context).addClass("hidden"),$j("#valueOfZipCodeSelected").val(value);var params={searchCode:value};return $j(".loader",context).show(),$j.getJSON(url,params,methods._createResult),!1},_createResult:function(data){$j(".loader",context).hide();var deliveryDate="";void 0!==data.error&&"0"!=data.error?(deliveryDate="XXXXX",deliveryHour="XX"):(deliveryDate=data.deliverydate,deliveryHour=data.deliveryHour),$j("#informationChronopostExpress").css("display","inline-block"),"XXXXX"==deliveryDate?($j("#informationChronopostExpressKO").css("display","none"),$j("#informationChronopostExpressOK").css("display","none"),$j("#zipcodeInvalide").css("display","inline-block")):(""==deliveryDate?($j("#informationChronopostExpressKO").css("display","inline-block"),$j("#informationChronopostExpressOK").css("display","none")):($j("#informationChronopostExpressDate").html(deliveryDate),$j("#informationChronopostExpressHour").html(deliveryHour),$j("#informationChronopostExpressKO").css("display","none"),$j("#informationChronopostExpressOK").css("display","inline-block")),$j("#zipcodeInvalide").css("display","none"));var codePostal=$j("#chrSearchZipCode",context).attr("value"),zipCodeSearched=$j("#informationChronopostExpress #zipCodeSearched");void 0!==zipCodeSearched&&void 0!==codePostal&&(zipCodeSearched.html(codePostal),verifyIfNeedToGeolocate(codePostal))}};$j.fn.blChronopostExpressSearch=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $j.error("Method "+method+" does not exist on jQuery.blChronopostExpressSearch"):methods.init.apply(this,arguments)}}(jQuery),function($j){var methods={init:function(options){return methods.bindLVBTab(),$j("#delivery_home .zip #lvbSearchZipCode").bind("keyup",methods.loadCityByZipCode),$j("#lvb_select_city").change(function(){if(0==$j("#lvb_select_city")[0].selectedIndex)$j("#delivery_home .tabs_content .postal-content").empty(),$j("#choose-city-several-reult").css("display","block");else{$j("#choose-city-several-reult").css("display","none");var elmtSplit=$j("#lvb_select_city option:selected").val().split(";"),inseeCode=elmtSplit[0],zipCode=elmtSplit[1],city=elmtSplit[2];$j("#lvbSearchZipCode").val(zipCode),$j("#lvb_city").val(city),$j("#lvb_insee_code").val(inseeCode);var dataCP=$j("#modal_delivery").attr("data-code-postal");verifyIfNeedToGeolocate(zipCode),dataCP!=zipCode&&(setCookie("BL_ZIPCODE_DELIVERY",zipCode,"","/"),$j("#modal_delivery").attr("data-code-postal",zipCode),$j("#modal_delivery").attr("data-store-delivery","")),methods.loadTableSlot()}}),$j("#delivery_home .tabs_content .zip #lvb_postal_button").bind("click",methods.loadCityByZipCode),this},initDailySlot:function(e){var dateNumber,dateMonth,dateYear,current=$j(".deliverypopin-daybox:not(.disabled)"),weekDays=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],months=["janvier","fvrier","mars","avril","mai","juin","juillet","aout","septembre","octobre","novembre","dcembre"],dynamicDate=new Date,populateToday=($j(".deliverypopin-date"),new Date);$j(".deliverypopin-daybox").each(function(){dateNumber=populateToday.getDate(),dateMonth=populateToday.getMonth(),dateYear=populateToday.getFullYear(),$j(this).attr("data-date",dateNumber+"-"+dateMonth+"-"+dateYear),populateToday.setDate(populateToday.getDate()+1)});var minDate=new Date,calendar=$j(".deliverypopin .js-aircalendar");if(void 0!==calendar){var minDateAttr=calendar.attr("data-first-available-date");if(void 0!==minDateAttr){var minDateTab=minDateAttr.split("_"),minDay=parseInt(minDateTab[0]),minMonth=parseInt(minDateTab[1])-1,minYear=parseInt(minDateTab[2]);minDate=new Date(minYear,minMonth,minDay)}}var maxDate=new Date,maxDays=30,maxSlot=$j(".leftpart_lvb").attr("data-max-slot");void 0!==maxSlot&&(maxDays=parseInt(maxSlot)),maxDate.setDate(maxDate.getDate()+maxDays);var error01=$j(".deliverypopin-error-01");function nextPrevClick(){$j(".deliverypopin-daybox").addClass("disabled"),current.removeClass("disabled")}!function aircalendar(){$j.fn.datepicker.language.fr={days:weekDays,daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],daysMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],months:months,monthsShort:["Jan","Fev","Mar","Avr","Mai","Jun","Jul","Aou","Sep","Oct","Nov","Dec"],today:"Aujourd'hui",clear:"Clear",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii aa",firstDay:1},$j(".js-aircalendar, .datepicker-close").on("click",function(){$j(".deliverypopin").toggleClass("calendar-displayed"),$j(".deliverypopin").hasClass("calendar-displayed")&&$j(".deliverypopin-aircalendar").datepicker({language:"fr",minDate:minDate,maxDate:maxDate,autoClose:!0,selectOtherMonths:!1,onSelect:function(formattedDate,date,inst){dateNumber=date.getDate(),dateMonth=date.getMonth(),dateYear=date.getFullYear();var startDateStr=dateNumber+"_"+(dateMonth+1)+"_"+dateYear;methods.loadTableSlot(startDateStr,"true"),(current=$j(".deliverypopin-daybox[data-date="+dateNumber+"-"+dateMonth+"-"+dateYear+"]")).hasClass("no-deliveries")?$j(".datepicker--nav").append(error01):($j(".datepicker--nav").remove(".deliverypopin-error"),$j(".deliverypopin-daybox").addClass("disabled"),current.removeClass("disabled"),dynamicDate=date,$j(".deliverypopin").removeClass("calendar-displayed"))}})})}(),function deliveryslider(){$j(".js-deliverypopin-btn-prev").on("click",function(){0!==current.prev(".deliverypopin-daybox").length&&(dynamicDate.setDate(dynamicDate.getDate()-1),current=current.prev(".deliverypopin-daybox"),nextPrevClick())}),$j(".js-deliverypopin-btn-next").on("click",function(){0!==current.next(".deliverypopin-daybox").length&&(dynamicDate.setDate(dynamicDate.getDate()+1),current=current.next(".deliverypopin-daybox"),nextPrevClick())})}()},bindLVBTab:function(){$j("#delivery_home .postal-content .nav_jour, #delivery_home form.formSelectYourDate, #next, #prev").unbind().bind("click",function(){if(!$j(this).hasClass("disabled")){var startDateStr=$j(this).attr("data-startDateStr"),dailySlot=$j(this).attr("data-daily-slot");methods.loadTableSlot(startDateStr,dailySlot)}}),methods.initDailySlot()},loadTableSlot:function(startDateStr,dailySlot){var shipmode=$j(".leftpart_lvb.selected, .leftpart_lvb.active").attr("ship-mode"),zipcode=$j("#lvbSearchZipCode").val(),city=$j("#lvb_city").val(),insee=$j("#lvb_insee_code").val(),shipmodeLabel=$j(".leftpart_lvb.selected, .leftpart_lvb.active").attr("ship-mode-name");if(!($j.isBlank(shipmode)||$j.isBlank(zipcode)||$j.isBlank(city)||$j.isBlank(insee))){var url=$j("#delivery_home .tabs_content .zip #lvb_postal_button").attr("data-refresh-url");url=changeQueryArrtibuteValue(url,"shipModeId",shipmode),url+="&zipcode="+zipcode+"&city="+city+"&insee="+insee+"&shipmodeLabel="+shipmodeLabel,$j.isBlank(startDateStr)||(url+="&startDateStr="+startDateStr),$j.isBlank(dailySlot)||(url+="&dailySlot="+dailySlot);var tabContentToDisplay=$j("#delivery_home .tabs_content .postal-content .slot-appt-content");if(null!=tabContentToDisplay&&null!=tabContentToDisplay&&""!=tabContentToDisplay&&0!==tabContentToDisplay.length||(tabContentToDisplay=$j("#delivery_home .tabs_content .postal-content")),tabContentToDisplay.html('<div class="loader" style="clear: both;"><img alt="Chargement..." src="wcsstore/boulangerstg/statics/plugins/loader/img/ajax-loader.gif" /></div>'),null==typeof url||$j.trim(url).length<=0)return tabContentToDisplay.html('<div class="load-error">Suite  une erreur technique, veuillez ressayer plus tard</div>'),!1;$j.ajax({url:url,complete:function(data,status){if("success"!=status&&"notmodified"!=status)return tabContentToDisplay.html('<div class="load-error">Suite  une erreur technique, veuillez ressayer plus tard</div>'),!1;$j("#delivery_home .tabs_content .postal-content").removeClass("off").addClass("on"),$j("#delivery_home .tabs_content .postal-content").html(""),$j(data.responseText).prependTo("#delivery_home .tabs_content .postal-content");var zipCodeSearched=$j("#delivery_home #zipCodeSearched");void 0!==zipCodeSearched&&void 0!==zipcode&&zipCodeSearched.html(zipcode),methods.bindLVBTab()}})}},loadCityByZipCode:function(e){e.preventDefault(),$j("#choose-city-several-reult").css("display","none"),$j("#lvb_select_city").empty().hide();var zipCode=$j("#delivery_home .zip #lvbSearchZipCode").val();if(!(zipCode.length<5)){$j("#valueOfZipCodeSelected").val(zipCode);var url=$j("#lvb_select_city").attr("data-load-url");return url+="&zipCode="+zipCode,$j.getJSON(url,null,function(data){var result='<option value="" selected>Choisissez une ville</option>';if($j.each(data.cities,function(i,cty){result+='<option value="'+cty.cityCode+";"+cty.zipCode+";"+cty.cityName+'">'+cty.cityName+"</option>"}),$j("#lvb_select_city").html(result),$j("#lvb_select_city").show(),1<$j("#lvb_select_city")[0].options.length)if(2==$j("#lvb_select_city")[0].options.length){$j("#lvb_select_city")[0].options[1].selected=!0;var elmtSplit=$j("#lvb_select_city option:selected").val().split(";"),inseeCode=elmtSplit[0],zipCode=elmtSplit[1],city=elmtSplit[2];$j("#lvbSearchZipCode").val(zipCode),$j("#lvb_city").val(city),$j("#lvb_insee_code").val(inseeCode),verifyIfNeedToGeolocate(zipCode),methods.loadTableSlot()}else $j("#choose-city-several-reult").css("display","block"),$j("#delivery_home .tabs_content .postal-content").removeClass("on").addClass("off")}),!1}$j("#delivery_home .tabs_content .postal-content").removeClass("on").addClass("off")}};$j.fn.blLvbSearch=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $j.error("Method "+method+" does not exist on jQuery.blLvbSearch"):methods.init.apply(this,arguments)}}(jQuery);var jQuery,bl,getText=[],aergt=0,iop=1;if(void 0===$j||"function"!=typeof $j)var $j=jQuery.noConflict();function createVar(iteration,val){code="current"+iteration+"="+val+";",eval(code)}function customPager(a,b){$j.each(a.find(".owl-item"),function(i){if(""!=$j(this).find(".owl-it").attr("data-title")){if(z=$j.parseHTML($j(this).find(".owl-it").attr("data-title")),1<z.length){for(i=0;i<z.length;i++)getText+=" "+z[i].textContent;z=getText}$j($j("."+b+" .owl-controls .owl-pagination .owl-page span")[i]).html(z)}else $j($j("."+b+" .owl-controls .owl-pagination .owl-page span")[i]).html("&nbsp;")})}function isElementInViewport(el){var rect=el.getBoundingClientRect();return 0<=rect.top&&0<=rect.left&&rect.bottom<=(window.innerHeight+55||document.documentElement.clientHeight+55)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)}function loadServiceSelected(){var cookieService=bl.cookie.getServiceSelectedCookie();if(null!=cookieService&&""!=cookieService)for(var cookieSelected=cookieService.split("#"),i=0;i<cookieSelected.length;i++)if(void 0!==cookieSelected[i]&&""!==cookieSelected[i]){var token=cookieSelected[i].split("&"),catentryId=token[0].split(":");$j("#"+catentryId[0]+"\\:"+catentryId[1]+"[data-type-service='"+token[1]+"']").next().trigger("click")}}function toDecodeSearch(urlToDecode){var urlRedirect=window.atob(urlToDecode),url=window.location.href,hash="#searchinputmode=";-1===urlRedirect.indexOf(hash)&&(-1!==url.indexOf(hash)?window.location.href=urlRedirect+window.location.hash:window.location.href=urlRedirect)}void 0===bl&&(bl={}),void 0===bl.slider&&(bl.slider={}),titlesEms={defaut:"<span>notre</span><br/> s&eacute;lection",bundle:"<span>pack</span><br/> <strong>&eacute;co</strong>",bon_plan:"<span>bon</span><br/> <strong>plan</strong>",destockage:"<span>destockage</span>",le_plus_vu:"<span>le </span><strong>plus vu</strong>",meilleure_note:"<strong>meilleure</strong><br/> <span>note</span>",meilleure_vente:"<strong>meilleure</strong><br/> <span>vente</span>",nouveaute:"<span>nouveaut&eacute;</span>",offre_moment:"<strong>offre</strong><span> du<br/> moment</span>",pre_reservation:"<span>pr&eacute;-</span><br/> <strong>r&eacute;servation</strong>",prix_en_baisse:"<span>prix</span><br/> <strong> en baisse</strong>",offre_remboursement:"<span>offre de</span><br/> <strong>remboursement</strong>"},$j.extend(bl.slider,{available:!0,size:"",width:228,init:function(i,l,e,d){bl.slider.size=d,bl.slider.width=l.find("div:first-child").width(),0==bl.slider.width&&(bl.slider.width=228);var t=bl.slider.width*bl.slider.size;i.find(".current .elt2").text(d),l.width(t),bl.slider.next(i,l,t,e,d),bl.slider.prev(i,l,t,e,d)},next:function(i,l,e,d,t){i.find(".next").unbind("click").bind("click",function(){if(bl.slider.available){bl.slider.available=!1;var d=Math.round(l.position().left),t=-(e-bl.slider.width);t<d?(i.find(".disabled").removeClass("disabled"),l.animate({left:d-bl.slider.width},function(){var l=parseInt(i.parent().find(".current .elt1").text());bl.slider.available=!0,i.parent().find(".current .elt1").text(l+1)})):bl.slider.available=!0,d<=t- -bl.slider.width&&$j(this).addClass("disabled")}return!1})},prev:function(i,l,e,d,t){i.find(".prev").unbind("click").bind("click",function(){if(bl.slider.available){bl.slider.available=!1;var d=Math.round(l.position().left);-(e-bl.slider.width)<=d&&d<0?(i.find(".disabled").removeClass("disabled"),l.animate({left:d+bl.slider.width},function(){var l=parseInt(i.parent().find(".current .elt1").text());bl.slider.available=!0,i.parent().find(".current .elt1").text(l-1)})):bl.slider.available=!0,d- -bl.slider.width==0&&$j(this).addClass("disabled")}return!1})}}),"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t,e,o){var i={init:function(e,o){var i=this;i.$elem=t(o),i.options=t.extend({},t.fn.owlCarousel.options,i.$elem.data(),e),i.userOptions=e,i.loadContent()},loadContent:function(){var o,i=this;"function"==typeof i.options.beforeInit&&i.options.beforeInit.apply(this,[i.$elem]),"string"==typeof i.options.jsonPath?(o=i.options.jsonPath,t.getJSON(o,function e(t){var e,o="";if("function"==typeof i.options.jsonSuccess)i.options.jsonSuccess.apply(this,[t]);else{for(e in t.owl)t.owl.hasOwnProperty(e)&&(o+=t.owl[e].item);i.$elem.html(o)}i.logIn()})):i.logIn()},logIn:function(){var t=this;t.$elem.data("owl-originalStyles",t.$elem.attr("style")),t.$elem.data("owl-originalClasses",t.$elem.attr("class")),t.$elem.css({opacity:0}),t.orignalItems=t.options.items,t.checkBrowser(),t.wrapperWidth=0,t.checkVisible=null,t.setVars()},setVars:function(){var t=this;return 0!==t.$elem.children().length&&(t.baseClass(),t.eventTypes(),t.$userItems=t.$elem.children(),t.itemsAmount=t.$userItems.length,t.wrapItems(),t.$owlItems=t.$elem.find(".owl-item"),t.$owlWrapper=t.$elem.find(".owl-wrapper"),t.playDirection="next",t.prevItem=0,t.prevArr=[0],t.currentItem=0,t.customEvents(),void t.onStartup())},onStartup:function(){var t=this;t.updateItems(),t.calculateAll(),t.buildControls(),t.updateControls(),t.response(),t.moveEvents(),t.stopOnHover(),t.owlStatus(),!1!==t.options.transitionStyle&&t.transitionTypes(t.options.transitionStyle),!0===t.options.autoPlay&&(t.options.autoPlay=5e3),t.play(),t.$elem.find(".owl-wrapper").css("display","block"),t.$elem.is(":visible")?t.$elem.css("opacity",1):t.watchVisibility(),t.onstartup=!1,t.eachMoveUpdate(),"function"==typeof t.options.afterInit&&t.options.afterInit.apply(this,[t.$elem])},eachMoveUpdate:function(){var t=this;!0===t.options.lazyLoad&&t.lazyLoad(),!0===t.options.autoHeight&&t.autoHeight(),t.onVisibleItems(),"function"==typeof t.options.afterAction&&t.options.afterAction.apply(this,[t.$elem])},updateVars:function(){var t=this;"function"==typeof t.options.beforeUpdate&&t.options.beforeUpdate.apply(this,[t.$elem]),t.watchVisibility(),t.updateItems(),t.calculateAll(),t.updatePosition(),t.updateControls(),t.eachMoveUpdate(),"function"==typeof t.options.afterUpdate&&t.options.afterUpdate.apply(this,[t.$elem])},reload:function(){var t=this;e.setTimeout(function(){t.updateVars()},0)},watchVisibility:function(){var t=this;return!1===t.$elem.is(":visible")&&(t.$elem.css({opacity:0}),e.clearInterval(t.autoPlayInterval),e.clearInterval(t.checkVisible),void(t.checkVisible=e.setInterval(function(){t.$elem.is(":visible")&&(t.reload(),t.$elem.animate({opacity:1},200),e.clearInterval(t.checkVisible))},500)))},wrapItems:function(){var t=this;t.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>'),t.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">'),t.wrapperOuter=t.$elem.find(".owl-wrapper-outer"),t.$elem.css("display","block")},baseClass:function(){var t=this,e=t.$elem.hasClass(t.options.baseClass),o=t.$elem.hasClass(t.options.theme);e||t.$elem.addClass(t.options.baseClass),o||t.$elem.addClass(t.options.theme)},updateItems:function(){var e,o,i=this;if(!1===i.options.responsive)return!1;if(!0===i.options.singleItem)return i.options.items=i.orignalItems=1,i.options.itemsCustom=!1,i.options.itemsDesktop=!1,i.options.itemsDesktopSmall=!1,i.options.itemsTablet=!1,i.options.itemsTabletSmall=!1,i.options.itemsMobile=!1;if((e=t(i.options.responsiveBaseWidth).width())>(i.options.itemsDesktop[0]||i.orignalItems)&&(i.options.items=i.orignalItems),!1!==i.options.itemsCustom)for(i.options.itemsCustom.sort(function(t,e){return t[0]-e[0]}),o=0;o<i.options.itemsCustom.length;o+=1)i.options.itemsCustom[o][0]<=e&&(i.options.items=i.options.itemsCustom[o][1]);else e<=i.options.itemsDesktop[0]&&!1!==i.options.itemsDesktop&&(i.options.items=i.options.itemsDesktop[1]),e<=i.options.itemsDesktopSmall[0]&&!1!==i.options.itemsDesktopSmall&&(i.options.items=i.options.itemsDesktopSmall[1]),e<=i.options.itemsTablet[0]&&!1!==i.options.itemsTablet&&(i.options.items=i.options.itemsTablet[1]),e<=i.options.itemsTabletSmall[0]&&!1!==i.options.itemsTabletSmall&&(i.options.items=i.options.itemsTabletSmall[1]),e<=i.options.itemsMobile[0]&&!1!==i.options.itemsMobile&&(i.options.items=i.options.itemsMobile[1]);i.options.items>i.itemsAmount&&!0===i.options.itemsScaleUp&&(i.options.items=i.itemsAmount)},response:function(){var o,i,s=this;return!0===s.options.responsive&&(i=t(e).width(),s.resizer=function(){t(e).width()!==i&&(!1!==s.options.autoPlay&&e.clearInterval(s.autoPlayInterval),e.clearTimeout(o),o=e.setTimeout(function(){i=t(e).width(),s.updateVars()},s.options.responsiveRefreshRate))},void t(e).resize(s.resizer))},updatePosition:function(){var t=this;t.jumpTo(t.currentItem),!1!==t.options.autoPlay&&t.checkAp()},appendItemsSizes:function(){var e=this,o=0,i=e.itemsAmount-e.options.items;e.$owlItems.each(function(s){var n=t(this);n.css({width:e.itemWidth}).data("owl-item",Number(s)),(s%e.options.items==0||s===i)&&(i<s||(o+=1)),n.data("owl-roundPages",o)})},appendWrapperSizes:function(){var t=this,e=t.$owlItems.length*t.itemWidth;t.$owlWrapper.css({width:2*e,left:0}),t.appendItemsSizes()},calculateAll:function(){var t=this;t.calculateWidth(),t.appendWrapperSizes(),t.loops(),t.max()},calculateWidth:function(){var t=this;t.itemWidth=Math.round(t.$elem.width()/t.options.items)},max:function(){var t=this,e=-1*(t.itemsAmount*t.itemWidth-t.options.items*t.itemWidth);return t.options.items>t.itemsAmount?(e=t.maximumItem=0,t.maximumPixels=0):(t.maximumItem=t.itemsAmount-t.options.items,t.maximumPixels=e),e},min:function(){return 0},loops:function(){var e,i,s=this,n=0,a=0;for(s.positionsInArray=[0],s.pagesInArray=[],e=0;e<s.itemsAmount;e+=1)a+=s.itemWidth,s.positionsInArray.push(-a),!0===s.options.scrollPerPage&&((i=t(s.$owlItems[e]).data("owl-roundPages"))!==n&&(s.pagesInArray[n]=s.positionsInArray[e],n=i))},buildControls:function(){var e=this;(!0===e.options.navigation||!0===e.options.pagination)&&(e.owlControls=t('<div class="owl-controls"/>').toggleClass("clickable",!e.browser.isTouch).appendTo(e.$elem)),!0===e.options.pagination&&e.buildPagination(),!0===e.options.navigation&&e.buildButtons()},buildButtons:function(){var e=this,o=t('<div class="owl-buttons"/>');e.owlControls.append(o),e.buttonPrev=t("<div/>",{class:"owl-prev",html:e.options.navigationText[0]||""}),e.buttonNext=t("<div/>",{class:"owl-next",html:e.options.navigationText[1]||""}),o.append(e.buttonPrev).append(e.buttonNext),o.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(t){t.preventDefault()}),o.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(o){o.preventDefault(),t(this).hasClass("owl-next")?e.next():e.prev()})},buildPagination:function(){var e=this;e.paginationWrapper=t('<div class="owl-pagination"/>'),e.owlControls.append(e.paginationWrapper),e.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(o){o.preventDefault(),Number(t(this).data("owl-page"))!==e.currentItem&&e.goTo(Number(t(this).data("owl-page")),!0)})},updatePagination:function(){var e,o,i,s,n,a,r=this;if(!1===r.options.pagination)return!1;for(r.paginationWrapper.html(""),e=0,o=r.itemsAmount-r.itemsAmount%r.options.items,s=0;s<r.itemsAmount;s+=1)s%r.options.items==0&&(e+=1,o===s&&(i=r.itemsAmount-r.options.items),n=t("<div/>",{class:"owl-page"}),a=t("<span></span>",{text:!0===r.options.paginationNumbers?e:"",class:!0===r.options.paginationNumbers?"owl-numbers":""}),n.append(a),n.data("owl-page",o===s?i:s),n.data("owl-roundPages",e),r.paginationWrapper.append(n));r.checkPagination()},checkPagination:function(){var e=this;return!1!==e.options.pagination&&void e.paginationWrapper.find(".owl-page").each(function(){t(this).data("owl-roundPages")===t(e.$owlItems[e.currentItem]).data("owl-roundPages")&&(e.paginationWrapper.find(".owl-page").removeClass("active"),t(this).addClass("active"))})},checkNavigation:function(){var t=this;return!1!==t.options.navigation&&void(!1===t.options.rewindNav&&(0===t.currentItem&&0===t.maximumItem?(t.buttonPrev.addClass("disabled"),t.buttonNext.addClass("disabled")):0===t.currentItem&&0!==t.maximumItem?(t.buttonPrev.addClass("disabled"),t.buttonNext.removeClass("disabled")):t.currentItem===t.maximumItem?(t.buttonPrev.removeClass("disabled"),t.buttonNext.addClass("disabled")):0!==t.currentItem&&t.currentItem!==t.maximumItem&&(t.buttonPrev.removeClass("disabled"),t.buttonNext.removeClass("disabled"))))},updateControls:function(){var t=this;t.updatePagination(),t.checkNavigation(),t.owlControls&&(t.options.items>=t.itemsAmount?t.owlControls.hide():t.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(t){var e=this;if(e.isTransition)return!1;if(e.currentItem+=!0===e.options.scrollPerPage?e.options.items:1,e.currentItem>e.maximumItem+(!0===e.options.scrollPerPage?e.options.items-1:0)){if(!0!==e.options.rewindNav)return e.currentItem=e.maximumItem,!1;e.currentItem=0,t="rewind"}e.goTo(e.currentItem,t)},prev:function(t){var e=this;if(e.isTransition)return!1;if(!0===e.options.scrollPerPage&&0<e.currentItem&&e.currentItem<e.options.items?e.currentItem=0:e.currentItem-=!0===e.options.scrollPerPage?e.options.items:1,e.currentItem<0){if(!0!==e.options.rewindNav)return e.currentItem=0,!1;e.currentItem=e.maximumItem,t="rewind"}e.goTo(e.currentItem,t)},goTo:function(t,o,i){var s,n=this;return!n.isTransition&&("function"==typeof n.options.beforeMove&&n.options.beforeMove.apply(this,[n.$elem]),t>=n.maximumItem?t=n.maximumItem:t<=0&&(t=0),n.currentItem=n.owl.currentItem=t,!1!==n.options.transitionStyle&&"drag"!==i&&1===n.options.items&&!0===n.browser.support3d?(n.swapSpeed(0),!0===n.browser.support3d?n.transition3d(n.positionsInArray[t]):n.css2slide(n.positionsInArray[t],1),n.afterGo(),n.singleItemTransition(),!1):(s=n.positionsInArray[t],!0===n.browser.support3d||(!0===jQuery.browser.msie||!0===jQuery.browser.mozilla)&&10<=parseInt(jQuery.browser.version)?(!(n.isCss3Finish=!1)===o?(n.swapSpeed("paginationSpeed"),e.setTimeout(function(){n.isCss3Finish=!0},n.options.paginationSpeed)):"rewind"===o?(n.swapSpeed(n.options.rewindSpeed),e.setTimeout(function(){n.isCss3Finish=!0},n.options.rewindSpeed)):(n.swapSpeed("slideSpeed"),e.setTimeout(function(){n.isCss3Finish=!0},n.options.slideSpeed)),n.transition3d(s)):!0===o?n.css2slide(s,n.options.paginationSpeed):"rewind"===o?n.css2slide(s,n.options.rewindSpeed):n.css2slide(s,n.options.slideSpeed),void n.afterGo()))},jumpTo:function(t){var e=this;"function"==typeof e.options.beforeMove&&e.options.beforeMove.apply(this,[e.$elem]),t>=e.maximumItem||-1===t?t=e.maximumItem:t<=0&&(t=0),e.swapSpeed(0),!0===e.browser.support3d?e.transition3d(e.positionsInArray[t]):e.css2slide(e.positionsInArray[t],1),e.currentItem=e.owl.currentItem=t,e.afterGo()},afterGo:function(){var t=this;t.prevArr.push(t.currentItem),t.prevItem=t.owl.prevItem=t.prevArr[t.prevArr.length-2],t.prevArr.shift(0),t.prevItem!==t.currentItem&&(t.checkPagination(),t.checkNavigation(),t.eachMoveUpdate(),!1!==t.options.autoPlay&&t.checkAp()),"function"==typeof t.options.afterMove&&t.prevItem!==t.currentItem&&t.options.afterMove.apply(this,[t.$elem])},stop:function(){this.apStatus="stop",e.clearInterval(this.autoPlayInterval)},checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var t=this;return!(t.apStatus="play")!==t.options.autoPlay&&(e.clearInterval(t.autoPlayInterval),void(t.autoPlayInterval=e.setInterval(function(){t.next(!0)},t.options.autoPlay)))},swapSpeed:function(t){var e=this;"slideSpeed"===t?e.$owlWrapper.css(e.addCssSpeed(e.options.slideSpeed)):"paginationSpeed"===t?e.$owlWrapper.css(e.addCssSpeed(e.options.paginationSpeed)):"string"!=typeof t&&e.$owlWrapper.css(e.addCssSpeed(t))},addCssSpeed:function(t){return{"-webkit-transition":"all "+t+"ms ease","-moz-transition":"all "+t+"ms ease","-o-transition":"all "+t+"ms ease",transition:"all "+t+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(t){return{"-webkit-transform":"translate3d("+t+"px, 0px, 0px)","-moz-transform":"translate3d("+t+"px, 0px, 0px)","-o-transform":"translate3d("+t+"px, 0px, 0px)","-ms-transform":"translate3d("+t+"px, 0px, 0px)",transform:"translate3d("+t+"px, 0px,0px)"}},transition3d:function(t){this.$owlWrapper.css(this.doTranslate(t))},css2move:function(t){this.$owlWrapper.css({left:t})},css2slide:function(t,e){var o=this;o.isCssFinish=!1,o.$owlWrapper.stop(!0,!0).animate({left:t},{duration:e||o.options.slideSpeed,complete:function(){o.isCssFinish=!0}})},checkBrowser:function(){var t,i,s,n,r="translate3d(0px, 0px, 0px)",l=o.createElement("div");l.style.cssText="  -moz-transform:"+r+"; -ms-transform:"+r+"; -o-transform:"+r+"; -webkit-transform:"+r+"; transform:"+r,t=/translate3d\(0px, 0px, 0px\)/g,s=null!==(i=l.style.cssText.match(t))&&1===i.length,n="ontouchstart"in e||e.navigator.msMaxTouchPoints,this.browser={support3d:s,isTouch:n}},moveEvents:function(){var t=this;(!1!==t.options.mouseDrag||!1!==t.options.touchDrag)&&(t.gestures(),t.disabledEvents())},eventTypes:function(){var t=this,e=["s","e","x"];t.ev_types={},!0===t.options.mouseDrag&&!0===t.options.touchDrag?e=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:!1===t.options.mouseDrag&&!0===t.options.touchDrag?e=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===t.options.mouseDrag&&!1===t.options.touchDrag&&(e=["mousedown.owl","mousemove.owl","mouseup.owl"]),t.ev_types.start=e[0],t.ev_types.move=e[1],t.ev_types.end=e[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(t){t.preventDefault()}),this.$elem.on("mousedown.disableTextSelect",function(e){return t(e.target).is("input, textarea, select, option")})},gestures:function(){function i(t){if(void 0!==t.touches)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(void 0===t.touches){if(void 0!==t.pageX)return{x:t.pageX,y:t.pageY};if(void 0===t.pageX)return{x:t.clientX,y:t.clientY}}}function s(e){"on"===e?(t(o).on(l.ev_types.move,a),t(o).on(l.ev_types.end,r)):"off"===e&&(t(o).off(l.ev_types.move),t(o).off(l.ev_types.end))}function a(s){var n,a,r=s.originalEvent||s||e.event;l.newPosX=i(r).x-p.offsetX,l.newPosY=i(r).y-p.offsetY,l.newRelativeX=l.newPosX-p.relativePos,"function"==typeof l.options.startDragging&&!0!==p.dragging&&0!==l.newRelativeX&&(p.dragging=!0,l.options.startDragging.apply(l,[l.$elem])),(8<l.newRelativeX||l.newRelativeX<-8)&&!0===l.browser.isTouch&&(void 0!==r.preventDefault?r.preventDefault():r.returnValue=!1,p.sliding=!0),(10<l.newPosY||l.newPosY<-10)&&!1===p.sliding&&t(o).off("touchmove.owl"),n=function(){return l.newRelativeX/5},a=function(){return l.maximumPixels+l.newRelativeX/5},l.newPosX=Math.max(Math.min(l.newPosX,n()),a()),!0===l.browser.support3d?l.transition3d(l.newPosX):l.css2move(l.newPosX)}function r(o){var i,n,a,r=o.originalEvent||o||e.event;r.target=r.target||r.srcElement,!(p.dragging=!1)!==l.browser.isTouch&&l.$owlWrapper.removeClass("grabbing"),l.newRelativeX<0?l.dragDirection=l.owl.dragDirection="left":l.dragDirection=l.owl.dragDirection="right",0!==l.newRelativeX&&(i=l.getNewPosition(),l.goTo(i,!1,"drag"),p.targetElement===r.target&&!0!==l.browser.isTouch&&(t(r.target).on("click.disable",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t(e.target).off("click.disable")}),a=(n=t._data(r.target,"events").click).pop(),n.splice(0,0,a))),s("off")}var l=this,p={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};l.isCssFinish=!0,l.$elem.on(l.ev_types.start,".owl-wrapper",function n(o){var n,a=o.originalEvent||o||e.event;if(3===a.which)return!1;if(!(l.itemsAmount<=l.options.items)){if(!1===l.isCssFinish&&!l.options.dragBeforeAnimFinish)return!1;if(!1===l.isCss3Finish&&!l.options.dragBeforeAnimFinish)return!1;!1!==l.options.autoPlay&&e.clearInterval(l.autoPlayInterval),!0===l.browser.isTouch||l.$owlWrapper.hasClass("grabbing")||l.$owlWrapper.addClass("grabbing"),l.newPosX=0,l.newRelativeX=0,t(this).css(l.removeTransition()),n=t(this).position(),p.relativePos=n.left,p.offsetX=i(a).x-n.left,p.offsetY=i(a).y-n.top,s("on"),p.sliding=!1,p.targetElement=a.target||a.srcElement}})},getNewPosition:function(){var t=this,e=t.closestItem();return e>t.maximumItem?(t.currentItem=t.maximumItem,e=t.maximumItem):0<=t.newPosX&&(e=0,t.currentItem=0),e},closestItem:function(){var e=this,o=!0===e.options.scrollPerPage?e.pagesInArray:e.positionsInArray,i=e.newPosX,s=null;return t.each(o,function(n,a){i-e.itemWidth/20>o[n+1]&&i-e.itemWidth/20<a&&"left"===e.moveDirection()?(s=a,!0===e.options.scrollPerPage?e.currentItem=t.inArray(s,e.positionsInArray):e.currentItem=n):i+e.itemWidth/20<a&&i+e.itemWidth/20>(o[n+1]||o[n]-e.itemWidth)&&"right"===e.moveDirection()&&(!0===e.options.scrollPerPage?(s=o[n+1]||o[o.length-1],e.currentItem=t.inArray(s,e.positionsInArray)):(s=o[n+1],e.currentItem=n+1))}),e.currentItem},moveDirection:function(){var t,e=this;return e.newRelativeX<0?(t="right",e.playDirection="next"):(t="left",e.playDirection="prev"),t},customEvents:function(){var t=this;t.$elem.on("owl.next",function(){t.next()}),t.$elem.on("owl.prev",function(){t.prev()}),t.$elem.on("owl.play",function(e,o){t.options.autoPlay=o,t.play(),t.hoverStatus="play"}),t.$elem.on("owl.stop",function(){t.stop(),t.hoverStatus="stop"}),t.$elem.on("owl.goTo",function(e,o){t.goTo(o)}),t.$elem.on("owl.jumpTo",function(e,o){t.jumpTo(o)})},stopOnHover:function(){var t=this;!0===t.options.stopOnHover&&!0!==t.browser.isTouch&&!1!==t.options.autoPlay&&(t.$elem.on("mouseover",function(){t.stop()}),t.$elem.on("mouseout",function(){"stop"!==t.hoverStatus&&t.play()}))},lazyLoad:function(){var e,o,i,s,a=this;if(!1===a.options.lazyLoad)return!1;for(e=0;e<a.itemsAmount;e+=1)"loaded"!==(o=t(a.$owlItems[e])).data("owl-loaded")&&(i=o.data("owl-item"),"string"==typeof(s=o.find(".lazyOwl")).data("src")?(void 0===o.data("owl-loaded")&&(s.hide(),o.addClass("loading").data("owl-loaded","checked")),(!0!==a.options.lazyFollow||i>=a.currentItem)&&i<a.currentItem+a.options.items&&s.length&&a.lazyPreload(o,s)):o.data("owl-loaded","loaded"))},lazyPreload:function(t,o){function i(){t.data("owl-loaded","loaded").removeClass("loading"),o.removeAttr("data-src"),"fade"===a.options.lazyEffect?o.fadeIn(400):o.show(),"function"==typeof a.options.afterLazyLoad&&a.options.afterLazyLoad.apply(this,[a.$elem])}var n,a=this,r=0;"DIV"===o.prop("tagName")?(o.css("background-image","url("+o.data("src")+")"),n=!0):o[0].src=o.data("src"),function s(){r+=1,a.completeImg(o.get(0))||!0===n?i():r<=100?e.setTimeout(s,100):i()}()},autoHeight:function(){function o(){var o=t(n.$owlItems[n.currentItem]).height();n.wrapperOuter.css("height",o+"px"),n.wrapperOuter.hasClass("autoHeight")||e.setTimeout(function(){n.wrapperOuter.addClass("autoHeight")},0)}var s,n=this,a=t(n.$owlItems[n.currentItem]).find("img");void 0!==a.get(0)?(s=0,function i(){s+=1,n.completeImg(a.get(0))?o():s<=100?e.setTimeout(i,100):n.wrapperOuter.css("height","")}()):o()},completeImg:function(t){return!!t.complete&&("undefined"===typeof t.naturalWidth||0!==t.naturalWidth)},onVisibleItems:function(){var e,o=this;for(!0===o.options.addClassActive&&o.$owlItems.removeClass("active"),o.visibleItems=[],e=o.currentItem;e<o.currentItem+o.options.items;e+=1)o.visibleItems.push(e),!0===o.options.addClassActive&&t(o.$owlItems[e]).addClass("active");o.owl.visibleItems=o.visibleItems},transitionTypes:function(t){this.outClass="owl-"+t+"-out",this.inClass="owl-"+t+"-in"},singleItemTransition:function(){var e=this,o=e.outClass,i=e.inClass,s=e.$owlItems.eq(e.currentItem),n=e.$owlItems.eq(e.prevItem),a=Math.abs(e.positionsInArray[e.currentItem])+e.positionsInArray[e.prevItem],r=Math.abs(e.positionsInArray[e.currentItem])+e.itemWidth/2,l="webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend";e.isTransition=!0,e.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":r+"px","-moz-perspective-origin":r+"px","perspective-origin":r+"px"}),n.css(function t(t){return{position:"relative",left:t+"px"}}(a)).addClass(o).on(l,function(){e.endPrev=!0,n.off(l),e.clearTransStyle(n,o)}),s.addClass(i).on(l,function(){e.endCurrent=!0,s.off(l),e.clearTransStyle(s,i)})},clearTransStyle:function(t,e){var o=this;t.css({position:"",left:""}).removeClass(e),o.endPrev&&o.endCurrent&&(o.$owlWrapper.removeClass("owl-origin"),o.endPrev=!1,o.endCurrent=!1,o.isTransition=!1)},owlStatus:function(){var t=this;t.owl={userOptions:t.userOptions,baseElement:t.$elem,userItems:t.$userItems,owlItems:t.$owlItems,currentItem:t.currentItem,prevItem:t.prevItem,visibleItems:t.visibleItems,isTouch:t.browser.isTouch,browser:t.browser,dragDirection:t.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect"),t(o).off(".owl owl"),t(e).off("resize",this.resizer)},unWrap:function(){var t=this;0!==t.$elem.children().length&&(t.$owlWrapper.unwrap(),t.$userItems.unwrap().unwrap(),t.owlControls&&t.owlControls.remove()),t.clearEvents(),t.$elem.attr("style",t.$elem.data("owl-originalStyles")||"").attr("class",t.$elem.data("owl-originalClasses"))},destroy:function(){var t=this;t.stop(),e.clearInterval(t.checkVisible),t.unWrap(),t.$elem.removeData()},reinit:function(e){var o=this,i=t.extend({},o.userOptions,e);o.unWrap(),o.init(i,o.$elem)},addItem:function(t,e){var o,i=this;return!!t&&(0===i.$elem.children().length?(i.$elem.append(t),i.setVars(),!1):(i.unWrap(),(o=void 0===e||-1===e?-1:e)>=i.$userItems.length||-1===o?i.$userItems.eq(-1).after(t):i.$userItems.eq(o).before(t),void i.setVars()))},removeItem:function(t){var e,o=this;return 0!==o.$elem.children().length&&(e=void 0===t||-1===t?-1:t,o.unWrap(),o.$userItems.eq(e).remove(),void o.setVars())}};t.fn.owlCarousel=function(e){return this.each(function(){if(!0===t(this).data("owl-init"))return!1;t(this).data("owl-init",!0);var o=Object.create(i);o.init(e,this),t.data(this,"owlCarousel",o)})},t.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:e,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}}(jQuery,window,document),$j(window).load(function(){$j("#ems_totem > div.emsDyn").each(function(index,value){$j(this).removeClass("monoLarge").addClass("mono")}),$j(".long_200_defaut").each(function(index,value){$j(this).removeClass("long_200_defaut").addClass("court_defaut")}),$j(".long_200_bundle").each(function(index,value){$j(this).removeClass("long_200_bundle").addClass("court_bundle")}),$j(".sliderDynDefault").each(function(){createVar(iop,1),bl.slider.init($j(this).parent(),$j(this).find(".wrapper"),iop,$j(this).find(".slide").length),iop++}),$j(".emsDyn .product").each(function(){var a=$j(this);for(key in titlesEms)1!=a.hasClass("long_1000_"+key)&&1!=a.hasClass("long_1000_400_"+key)&&1!=a.hasClass("long_705_320_"+key)&&1!=a.hasClass("long_705_"+key)&&1!=a.hasClass("long_860_"+key)&&1!=a.hasClass("long_860_130_"+key)||a.find(".ems_top_mono_flag").html(titlesEms[key])}),$j("input.sliderName[type=hidden]").each(function(){var nameSlider=$j(this).val(),isPaginationRequired=!0,isThisTopPageEMS=!0;if(isThisTopPageEMS=-1!=$j(this).parent().parent().attr("class").indexOf("h400"),isPaginationRequired=!("home_page"!=$j(this).parent().attr("data-typepage")||!isThisTopPageEMS),"EMS_DESKTOP_PM_1"===nameSlider||"EMS_DESKTOP_PL_1"===nameSlider||"EMS_DESKTOP_PM_6"===nameSlider)var autoplayDelay=!1,EMS_DESKTOP_PM_PL_1=!0;else autoplayDelay=4500;$j("."+nameSlider+" .owl-carousel").owlCarousel({navigation:!1,navigationText:["",""],pagination:isPaginationRequired,paginationNumbers:!1,paginationSpeed:600,autoPlay:autoplayDelay,responsive:!0,slideSpeed:1e3,singleItem:!0,stopOnHover:!0,navigation:!0,afterInit:function(a){EMS_DESKTOP_PM_PL_1||a.mouseenter(function(){a.find(".owl-buttons").stop(!0,!0).animate({opacity:1},700)}).mouseleave(function(){a.find(".owl-buttons").animate({opacity:.2},700)}).trigger("mouseleave");var items=a.parent().find(".owl-page").length,w=a.parents(".emsDyn").width();a.find(".owl-page").width(w/items),customPager(a,nameSlider)},afterUpdate:function(a){customPager(a,nameSlider);var items=a.parent().find(".owl-page").length,w=a.parents(".emsDyn").width();a.find(".owl-page").width(w/items)}})});for(var listeItem=$j(".owl-item"),i=0;i<listeItem;i++)listeItem[i].style.width=screen.width;$j.ajax({type:"GET",url:baseHref+basePath+"EMSToHide",dataType:"Json"}).success(function(data){data&&$j(data.productsToHide).each(function(index,catentryId){var classToHide=".ems-product-"+catentryId;$j(classToHide+".off").remove(),$j(".spare>"+classToHide).remove(),$j(classToHide).each(function(index,classToHide){var isMulti=$j(classToHide).parents(".emsDyn").hasClass("multi"),isMono=$j(classToHide).parents(".emsDyn").hasClass("mono"),lastElementEmsDyn=$j(classToHide).parents(".emsDyn").children(":last"),listElementEmsDyn=$j(classToHide).parents(".emsDyn").children(),listElementSpareOff=$j(classToHide).parents(".emsDyn").next().children(),CampainSameName=!1;if(isMono){var campainName=$j(classToHide).attr("data-campain-name");if(0===(spare=$j(classToHide).siblings("[data-campain-name='"+campainName+"']*.off:first")).length){listElementSpareOff.each(function(index,ElementSpareOff){var campainNameElement=$j(ElementSpareOff).attr("data-campain-name");return $j(ElementSpareOff).hasClass("off")?campainNameElement===campainName?(spare=$j(ElementSpareOff),!1):void 0:(spare=$j(ElementSpareOff),!1)});var SpareisOff=$j(spare).hasClass("off"),campainNameSpareoff=$j(spare).attr("data-campain-name");listElementEmsDyn.each(function(index,ElementEmsDyn){$j(ElementEmsDyn).attr("data-campain-name")===campainNameSpareoff&&(CampainSameName=!0)}),(!CampainSameName||CampainSameName&&SpareisOff&&campainName===campainNameSpareoff)&&(CampainSameName&&SpareisOff&&campainName===campainNameSpareoff?($j(spare).removeClass("off"),$j(spare).insertAfter(classToHide)):($j(spare).removeClass("off"),$j(spare).insertAfter(lastElementEmsDyn)))}$j(classToHide).siblings("[data-campain-name='"+campainName+"']*.off:first").removeClass("off")}else if(isMulti){var campainClassToHide=$j(classToHide).attr("data-campain-name"),spare=$j(classToHide).siblings(".off:first"),campains_spare=$j(spare).attr("data-campain-name"),numbertitle=0,numberElementDisplay=0;0===$j(classToHide).siblings("[data-campain-name='"+campainClassToHide+"']").length?(void 0===campains_spare&&(spare=$j(spare).siblings(".off:first"),campains_spare=$j(spare).attr("data-campain-name")),listElementEmsDyn.each(function(index,ElementEmsDyn){if($j(ElementEmsDyn).attr("data-campain-name")===campainClassToHide)return!0;if($j(ElementEmsDyn).attr("data-campain-name")===campains_spare&&numberElementDisplay<4&&!$j(ElementEmsDyn).is("h2"))$j(ElementEmsDyn).removeClass("off"),$j(ElementEmsDyn).insertAfter(classToHide),numberElementDisplay++;else{if(!$j(ElementEmsDyn).is("h2"))return!1;0===numbertitle&&($j(listElementEmsDyn[0]).is("h2")?$j(ElementEmsDyn).replaceWith($j("h2:eq(2).off").removeClass("off")):$j(ElementEmsDyn).removeClass("off").insertBefore($j(listElementEmsDyn[0])),numbertitle++)}}),(listElementEmsDyn.length<3||3===listElementEmsDyn.length&&listElementEmsDyn[0])&&$j(listElementEmsDyn).remove()):0==spare||$j(spare).is("h2")||campainClassToHide!==campains_spare||$j(classToHide).siblings(".off:first").removeClass("off")}else $j(classToHide).siblings(".off:first").removeClass("off")}),$j(classToHide).remove();var index_sliderItem=0,sliderItems=$j(".ems-slider-product-"+catentryId);0<sliderItems.length&&sliderItems.each(function(index,sliderItem){var emsLocation=$j(sliderItem).parents(".owl-carousel").attr("data-owl-location"),itemIndex=$j(sliderItem).parents(".owl-item").index(),campains_selected=$j(sliderItem).attr("data-campain-name"),sliderItems_spareoff=$j(sliderItem).parents(".owl-carousel").next().children(),spare=$j(sliderItem).parents(".owl-carousel").next().children(":first"),ListSpareoff=$j(sliderItem).parents(".spare.off").children(),testspareoff=!1,Backup_By_SameCampaign=!1;ListSpareoff.each(function(index,element_spareoff){$j(element_spareoff).children().attr("class")==$j(sliderItems[index_sliderItem]).attr("class")&&($j(element_spareoff).remove(),testspareoff=!0)}),testspareoff||$j(".owl-carousel-"+emsLocation).owlCarousel().data("owlCarousel").removeItem(itemIndex),sliderItems_spareoff.each(function(index,sliderItem_spareoff){if($j(sliderItem_spareoff).children().attr("data-campain-name")==campains_selected){var spare_backup=$j(sliderItem_spareoff);if(0!==spare_backup.length)return $j(".owl-carousel-"+emsLocation).owlCarousel().data("owlCarousel").addItem(spare_backup),!(Backup_By_SameCampaign=!0)}}),Backup_By_SameCampaign||0===spare.length||$j(".owl-carousel-"+emsLocation).owlCarousel().data("owlCarousel").addItem(spare),index_sliderItem++})})}).fail(function(){console.log("ERROR - AJAX EMStoHide")})}),$j(document).ready(function(){$j("body").on("click touchstart",".owl-next , .owl-prev",function(){$j(".owl-item img").each(function(){var img=$j(this);if(isElementInViewport(img[0]))img[0].removeAttribute("data-lazy-click"),lazyLoadImages();else var interval=setInterval(function(){isElementInViewport(img[0])&&(img[0].removeAttribute("data-lazy-click"),lazyLoadImages(),clearInterval(interval)),setTimeout(function(){clearInterval(interval)},2e3)},100)})});var interval=setInterval(function(){(0<$j(".emsDyn .clickable").length||2<=$j(".ems .owl-controls").length)&&($j(".fake").addClass("off"),clearInterval(interval))},500)}),$j(function(){var textId;void 0===bl&&(window.bl={}),$j(".add-services .btn-collapse").click(function(){var text=$j(this).text();"btn-service-domicile"==this.id?$j(this).text("Fermer"==text?"Autres services  domicile":"Fermer"):("Toutes les garanties"!=text&&1!=textId||(textId=1,$j(this).text("Toutes les garanties"==text?"Fermer":"Toutes les garanties")),"Toutes les assurances"!=text&&2!=textId||(textId=2,$j(this).text("Toutes les assurances"==text?"Fermer":"Toutes les assurances")),"Toutes les garanties et assurances"!=text&&3!=textId||(textId=3,$j(this).text("Toutes les garanties et assurances"==text?"Fermer":"Toutes les garanties et assurances"))),$j(this).toggleClass("open"),$j(this).closest(".add-services").find(".collapse").stop().slideToggle()}),$j(".add-services .add-services-status .add").live("click",function(event){$j(this);var inputName=$j(this).prev("input").attr("name"),typeService=$j(this).prev("input").attr("data-type-service"),valueServiceSelected=$j(this).prev("input").val();$j('input[name="'+inputName+'"].added').each(function(index){var valInput=$j(this).val();$j(this).attr("data-type-service")===typeService&&valueServiceSelected!==valInput&&($j(this).prop("checked",!1),$j(this).closest(".add-services-bloc").find(".add-services-status .add").text("Ajouter"),$j(this).closest(".add-services-bloc").find(".add-services-remove a").fadeOut(),$j(this).removeClass("added"),$j(".serviceForLayer").each(function(index){var valueofService=$j(this).find("button.added").val();valInput===valueofService&&($j(this).css("display","none"),$j(this).removeClass("added").addClass("add"))}))}),$j(this).closest(".push-layer").length||$j(this).text("Ajout"),$j(this).prev().addClass("added"),$j(this).closest(".add-services-bloc").find(".add-services-remove a").fadeIn().css("display","inline-block"),$j(".serviceForLayer").each(function(index){var valueofService=$j(this).find("button.added").val();void 0===valueofService&&(valueofService=$j(this).find("button.add").val()),valueofService===valueServiceSelected&&($j(this).css("display","block"),$j(this).find("a.remove").css("display","block"),$j(this).removeClass("add").addClass("added"),$j(this).closest(".push-layer").length?($j(this).find("button.added").removeClass("add").addClass("added"),$j(this).find("button.add").removeClass("add").addClass("added")):($j(this).find("button.added").removeClass("add").addClass("added").text("Ajout"),$j(this).find("button.add").removeClass("add").addClass("added").text("Ajout")))}),$j(".bestService").find('.add-services-status input[type="radio"]').hasClass("added")||($j(".bestServiceForLayer").css("display","none"),$j(".bestServiceForLayer").removeClass("added").addClass("add")),bl.cookie.serviceSelected(valueServiceSelected,typeService)}),$j(".add-services .add-services-remove a").live("click",function(){$j(this).closest(".add-services-bloc").find('.add-services-status input[type="radio"]').prop("checked",!1),$j(this).closest(".add-services-bloc").find('.add-services-status input[type="radio"]').removeClass("added"),$j(this).closest(".add-services-bloc").find(".add-services-status .add").text("Ajouter"),$j(this).closest(".add-services-bloc").find(".add-services-remove a").fadeOut();var valueServiceSelected=$j(this).closest(".add-services-bloc").find('.add-services-status input[type="radio"]').val(),valuetypeServiceSelected=$j(this).closest(".add-services-bloc").find('.add-services-status input[type="radio"]').attr("data-type-service");$j(".serviceForLayer").each(function(index){$j(this).find("button.added").val()===valueServiceSelected&&($j(this).css("display","none"),$j(this).removeClass("added").addClass("add"))}),bl.cookie.deleteServiceSelected(valueServiceSelected,valuetypeServiceSelected)}),loadServiceSelected()}),$j(".color-block_link").on("click",function(e){e.preventDefault(),null!=this.getAttribute("href")&&(window.location=this.getAttribute("href"))}),$j(function(){$j(".modal .add-services button.add").live("click",function(){$j(this).closest(".push-layer").length?$j(this).removeClass("add").addClass("added"):$j(this).removeClass("add").addClass("added").text("Ajout"),$j(this).closest(".serviceForLayer").find(".remove").fadeIn().css("display","block");var valueServiceSelected=$j(this).closest(".serviceForLayer").find("button").val(),typeService=$j(this).closest(".serviceForLayer").find("button").attr("data-type-service");$j(".add-services-bloc").each(function(index){$j(this).find('.add-services-status input[type="radio"]').val()===valueServiceSelected&&($j(this).closest(".push-layer").length||$j(this).find('.add-services-status input[type="radio"]').next().text("Ajout"),$j(this).find('.add-services-status input[type="radio"]').addClass("added"),$j(this).closest(".add-services-bloc").find(".add-services-remove a").fadeIn().css("display","inline-block"),$j(this).find('.add-services-status input[type="radio"]').prop("checked",!0))}),$j("#preview .modal .servicesForLayer .serviceForLayer").each(function(index){$j(this).attr("data-value")===valueServiceSelected&&($j(this).css("display","block"),$j(this).removeClass("add").addClass("added"))});var partNumber=$j(this).attr("data-part-number");if(void 0!==partNumber){var dataLayerProductServices=tc_vars.product_services;if(void 0!==dataLayerProductServices)for(var i=0;i<dataLayerProductServices.length;i++){var serviceId=tc_vars.product_services[i].product_service_id;if(partNumber===serviceId){var eventName="Ajouts_Services::popin::"+tc_vars.product_services[i].product_service_description+"_"+serviceId+"::"+tc_vars.product_description+"_"+tc_vars.product_sap;tc_events_global(this,"ajouts_services",{event_name:eventName,event_type:"A"});break}}else{var partnumberProduct=$j(this).attr("data-sap-number");eventName="Ajouts_Services::popin::"+$j(this).attr("data-description")+"_"+partNumber+"::"+$j(this).attr("data-description-product").replace(/ /g,"_").toUpperCase()+"_"+partnumberProduct;tc_events_global(this,"ajouts_services",{event_name:eventName,event_type:"A"})}}bl.cookie.serviceSelected(valueServiceSelected,typeService)}),$j(".modal .add-services .remove").live("click",function(){$j(this).closest(".push-layer").length?$j(this).closest(".table").find("button.added").removeClass("added").addClass("add"):$j(this).closest(".table").find("button.added").removeClass("added").addClass("add").text("Ajouter"),$j(this).closest(".serviceForLayer").find(".remove").fadeOut(),$j(this).closest(".serviceForLayer").removeClass("added");var valueServiceSelected=$j(this).closest(".serviceForLayer").find("button").val(),typeService=$j(this).closest(".serviceForLayer").find("button").attr("data-type-service");$j("#preview .modal .servicesForLayer .serviceForLayer").each(function(index){$j(this).attr("data-value")===valueServiceSelected&&($j(this).css("display","none"),$j(this).removeClass("added").addClass("add"))}),$j(".add-services-bloc").each(function(index){$j(this).find('.add-services-status input[type="radio"]').val()===valueServiceSelected&&($j(this).find('.add-services-status input[type="radio"]').prop("checked",!1),$j(this).find('.add-services-status input[type="radio"]').removeClass("added"),$j(this).closest(".push-layer").length||$j(this).find(".add-services-status .add").text("Ajouter"),$j(this).find(".add-services-remove a").fadeOut())}),bl.cookie.deleteServiceSelected(valueServiceSelected,typeService)}),$j(".modal .btn-cart").on("click",function(){if(null!=tc_vars.product_description&&""!=tc_vars.product_description){var eventName="Ajouts_Paniers::popin::"+tc_vars.product_description+"_"+tc_vars.product_sap;tc_events_global(this,"ajouts_paniers",{level2_id:tc_vars.xiti_xtn2,event_name:eventName,event_type:"A"})}else{var partnumberProduct=$j(this).attr("data-sap-number");eventName="Ajouts_Paniers::popin::"+$j(this).attr("data-description-product").replace(/ /g,"_").toUpperCase()+"_"+partnumberProduct;tc_events_global(this,"ajouts_paniers",{level2_id:tc_vars.xiti_xtn2,event_name:eventName,event_type:"A"})}$j.removeCookie("BL_SERVICE_SELECTED",{path:"/"})})}),$j(document).ready(function(){$j(".searchInputMode, .emsSearchInputMode").on("click",function(){if(void 0!==this.getAttribute("data-url")&&null!==this.getAttribute("data-url")){toDecodeSearch($j(this).val().split("'")[1])}else{var urlRedirect=$j(this).attr("href"),url=window.location.href,hash="#searchinputmode=";if(-1!==urlRedirect.indexOf(hash))return;-1!==url.indexOf(hash)&&$j(this).attr("href",$j(this).attr("href")+window.location.hash)}}),$j(".searchInputModeSim").on("click",function(e){if(window.location.href.indexOf("sci")){var facet=$j(this).closest(".filterOn");if($j(this).closest(".filterOn").attr("data-url-facet"))var valueDeleted=facet.attr("data-url-facet");else{var facetValue=facet.attr("data-facet-value");valueDeleted=$j("#panelFacet").find('.filterOn[data-facet-value="'+facetValue+'"]').attr("data-url-facet")}-1<window.location.href.indexOf("|")?(valueDeleted=valueDeleted.replace("_","~"),urlRedirect=-1<window.location.href.indexOf(valueDeleted+"|")?window.location.href.replace(valueDeleted+"|",""):window.location.href.split("|"+valueDeleted)[0]):urlRedirect="/sci/"+$j(".searchTerm").text()}else{var urlRedirect=$j(this).attr("data-value"),url=window.location.href,hash="#searchinputmode=",urlHash=window.location.hash;void 0===urlRedirect&&(urlRedirect=$j(this).attr("href")),void 0===urlRedirect&&(urlRedirect=$j(this).attr("data-url")),e.preventDefault(),$j(this).parents(".sortList").find("ul li").each(function(){$j(this).hasClass("checked")&&$j(this).removeClass("checked"),document.getElementsByClassName("searchInputModeSim")[$j(this).index()].setAttribute("data-search-input-mode",urlHash.replace("#",""))}),$j(this).addClass("checked"),-1!==url.indexOf(hash)?-1!==urlRedirect.indexOf(hash)?window.location.href=urlRedirect:window.location.href=urlRedirect+urlHash:window.location.href=urlRedirect}}),$j(".triSearchInputMode").on("change",function(){if("true"===this.options[this.selectedIndex].getAttribute("data-decode-seo")){toDecodeSearch($j(this).val().split("'")[1])}else{var urlRedirect=$j(this).val(),url=(window.baseHref,window.location.href),hash="#searchinputmode=";if(-1!==urlRedirect.indexOf(hash))return;-1!==url.indexOf(hash)?window.location.href=this.options[this.selectedIndex].getAttribute("value")+window.location.hash:window.location.href=this.options[this.selectedIndex].getAttribute("value")}});var urlOnLoad=window.location.href;if(-1<urlOnLoad.indexOf("/sci")){var listOptions=$j(".triSearchInputMode option"),newUrl="/sci",urlSplitted=urlOnLoad.split("/");if(-1<urlOnLoad.indexOf("?")){var urlSplittedParameters=urlSplitted[urlSplitted.length-1].split("?"),parametersString=urlSplittedParameters[urlSplittedParameters.length-1],parametersToUrl=[];if(-1<parametersString.indexOf("&"))for(var parameterString=parametersString.split("&"),i=0;i<parameterString.length;i++)-1===parameterString[i].indexOf("sorting_")&&parametersToUrl.push(parameterString[i]);else-1==parametersString.indexOf("sorting_")&&parametersToUrl.push(parametersString);if(0<parametersToUrl.length){newUrl+="/nav-filtre",newUrl+="/"+urlSplittedParameters[0];for(i=0;i<parametersToUrl.length;i++){var operator="&";0===i&&(operator="?"),newUrl+=operator+parametersToUrl[i]}}else newUrl+="/"+urlSplittedParameters[0]}else newUrl+="/"+urlSplitted[urlSplitted.length-1];for(i=0;i<listOptions.length;i++){var optionUrl=newUrl;listOptions[i].hasAttribute("data-attr-direction")&&listOptions[i].hasAttribute("data-attr-sorting")&&i!==listOptions.length-1&&(0!==i&&(-1<newUrl.indexOf("?")?optionUrl+="&"+listOptions[i].getAttribute("data-attr-sorting")+"="+listOptions[i].getAttribute("data-attr-direction"):optionUrl+="?"+listOptions[i].getAttribute("data-attr-sorting")+"="+listOptions[i].getAttribute("data-attr-direction")),listOptions[i].setAttribute("value",optionUrl))}}else if(0<urlOnLoad.indexOf("sorting__lead_price=asc"))for(listOptions=$j(".triSearchInputMode option"),i=0;i<listOptions.length;i++)listOptions[i].hasAttribute("selected")&&listOptions[i].removeAttribute("selected"),"Prix croissant"==listOptions[i].text&&listOptions[i].setAttribute("selected","selected")});